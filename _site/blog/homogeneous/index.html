<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>关于齐次坐标系的入门级思考 &#8211; OnceMore</title>
<meta name="description" content="">
<meta name="keywords" content="Computer Visions">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="关于齐次坐标系的入门级思考">
<meta property="og:description" content="">
<meta property="og:url" content="http://localhost:4000/blog/homogeneous/">
<meta property="og:site_name" content="OnceMore">

<meta name="google-site-verification" content="i2ojlx9jpDBBAKREtMe5JMN1DCdIAlO97Qrf4vOuFF4">



<link rel="canonical" href="http://localhost:4000/blog/homogeneous/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="OnceMore Feed">
<link rel="author" href="https://google.com/https://plus.google.com/110411659539252839234?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://localhost:4000/blog">博客</a></li>
		<li><a href="http://localhost:4000">主页</a></li>
		<li><a href="http://localhost:4000/blog/about/">关于博客</a></li>
		<li>
			<a href="#">文章目录</a>
			<ul class="dl-submenu">
				<li><a href="http://localhost:4000/blog/posts/">所有文章</a></li>
				<li><a href="http://localhost:4000/blog/tags/">所有标签</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  <div class="entry-image">
    <img src="http://localhost:4000/images/abstract-3.jpg" alt="关于齐次坐标系的入门级思考">
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://localhost:4000/blog/homogeneous/" rel="bookmark" title="关于齐次坐标系的入门级思考">关于齐次坐标系的入门级思考</a></h1>
        
        <h2>September 19, 2014</h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~2 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>今天看计算机视觉方面的资料时遇到了关于<strong>齐次坐标系(Homogeneous Coordinates)</strong>的问题，
于是翻阅资料进行了浅显的一些了解，这里记下一些总结出来的思考。</p>

<h1 id="section">初步了解</h1>

<h2 id="section-1">齐次坐标的引入</h2>
<p>在欧式空间里，两条共面的平行线无法相交，然而在<strong>投影空间(Projective Space)</strong>内却不是这样，
一个感性的理解是，如下图中的两条铁轨的间距随着视线变远而减小，直至在地平线处(无限远点)相交。</p>

<p><img src="/images/homogeneous/railway.jpg" alt="RailWay" /></p>

<p>欧式空间采用<script type="math/tex">(x,y,z)</script>来表示一个三维点，但是无穷远点<script type="math/tex">(\infty,\infty,\infty)</script>在欧式空间里是没有意义的,
但是在投影空间中进行图形和几何运算并不是一个简单的问题，为了解决这个问题，
数学家August Ferdinand Möbius(大概每个中国人都知道的莫比乌斯)提出了齐次坐标系，采用N+1个量来表示N维坐标。
例如，在二维齐次坐标系中，我们引入一个量<script type="math/tex">w</script>,将一个二维点<script type="math/tex">(x,y)</script>表示为<script type="math/tex">(X,Y,w)</script>的形式，其转换关系是</p>

<script type="math/tex; mode=display">
\begin{array}{l}
x=\frac{X}{w}\\
y=\frac{Y}{w}
\end{array}
</script>

<p>例如，在欧式坐标中的一个二维点<script type="math/tex">(1,2)</script>可以在齐次坐标中表示为<script type="math/tex">(1,2,1)</script>，如果点逐渐移动向无穷远处，
其欧式坐标变为<script type="math/tex">(\infty,\infty)</script>，而齐次坐标变为<script type="math/tex">(1,2,0)</script>，注意到在齐次坐标下不需要<script type="math/tex">\infty</script>就可以表示无限远处的点。</p>

<h2 id="section-2">“齐次”之名由何而来？</h2>

<p>如果我们要将欧式坐标的一个二维点<script type="math/tex">(1,2)</script>转换为齐次坐标，根据规则，我们可以选择刚才用到的<script type="math/tex">(1,2,1)</script>，也可以
选择<script type="math/tex">(2,4,2)</script>，还可以选择<script type="math/tex">(4,8,4),(8,16,8)...</script>，即<script type="math/tex">(k,2k,k),k\in\mathbb{R}</script>都是“合法”的齐次坐标表示，这些
点都映射到欧式空间中的一点，即这些点具有<strong>尺度不变性(Scale Invariant)</strong>，是”齐性的”(同族的)，所以称之为齐次坐标。</p>

<h2 id="section-3">一个不太严格的证明两条平行线可以相交</h2>

<p>考虑两条平行线：</p>

<script type="math/tex; mode=display">
\left\{ \begin{array}{l}
Ax+By+C=0\\
Ax+By+D=0
\end{array} \right.
</script>

<p>在欧式空间中，<script type="math/tex">C=D</script>时两条线重合，否则不相交。尝试用<script type="math/tex">\frac{x}{w},\frac{y}{w}</script>替换<script type="math/tex">x,y</script>
(如前面提到的，用N+1个量表示N维坐标，这里增加了一个量<script type="math/tex">w</script>)，可以得到：</p>

<script type="math/tex; mode=display">
\left\{ \begin{array}{l}
Ax+By+Cw=0\\
Ax+By+Dw=0
\end{array} \right.
</script>

<p>可以得到解<script type="math/tex">(x,y,0)</script>，即两条平行线在<script type="math/tex">(x,y,0)</script>处相遇，称之为无穷点(注意这里不要用欧式空间的思维去想象这个点在哪里)。</p>

<h2 id="section-4">重要性</h2>

<p>《计算机图形学(OpenGL版)》的作者F.S. Hill Jr.曾说过一句话：</p>

<blockquote>
  <p>“齐次坐标表示是计算机图形学的重要手段之一，它既能够用来明确区分向量和点，同时也更易用于进行仿射（线性）几何变换。”</p>
</blockquote>

<p>于是我们知道，其重要性，主要有二，其一时区分向量和点，其二是易于进行<strong>仿射变化(Affine Transformation)</strong>，
但是这两点内部的原因又是什么呢？吹牛逼要吹到家，总不能说是大牛说的就是对的吧，要理解这两点，需要进行更细致一些的了解，请往下看。</p>

<h1 id="section-5">深入理解</h1>

<p>首先，我们需要对齐次坐标系的形式化表达更明了，为了简化，主要以2维点做之后的说明。</p>

<h3 id="section-6">2维点</h3>

<p>欧式坐标表示：</p>

<script type="math/tex; mode=display">\textbf{x}=(x,y) \in \mathbb{R}^2</script>

<p>齐次坐标表示：</p>

<script type="math/tex; mode=display">\tilde{x}=(\hat{x},\hat{y},w) \in \mathbb{P}^2 </script>

<p><script type="math/tex">w=0</script>时称为<strong>无穷点(points at infinity)</strong>，其中<script type="math/tex">\mathbb{P}^2=\mathbb{R}^3-(0,0,0)</script>为<strong>2D投影空间</strong>。<strong>齐次矢量</strong><script type="math/tex">\tilde{x}</script>可转换为欧式表示：</p>

<script type="math/tex; mode=display">\tilde{x}=(\hat{x},\hat{y},w)=w(x,y,1)=w\bar{\textbf{x}}</script>

<p><script type="math/tex">\bar{\textbf{x}}</script>称为<strong>增广矢量(augmented vector)</strong>。</p>

<h3 id="section-7">2维线</h3>

<p>齐次表示：</p>

<script type="math/tex; mode=display">\tilde{l}=(a,b,c)</script>

<p>对应欧式空间直线方程：</p>

<script type="math/tex; mode=display">\bar{\textbf{x}}\cdot\tilde{l}=ax+by+c=0</script>

<p>例外是在<script type="math/tex">\tilde{l}=(0,0,1)</script>时为<strong>无穷线</strong>，包含了所有的2维无穷点。</p>

<p>可将<script type="math/tex">\tilde{l}</script>标准化为<script type="math/tex">l=(\hat{n}_x,\hat{n}_y,d)=(\hat{\textbf{n}},d),\parallel\hat{\textbf{n}}\parallel=1</script>,
<script type="math/tex">\hat{\textbf{n}}</script>称为<strong>标准化矢量</strong>，与直线<script type="math/tex">\tilde{l}</script>垂直，<script type="math/tex">d</script>为原点到直线的距离，下图给出了比较形象的解释：</p>

<p><img src="\images\homogeneous\2dline.png" alt="2D line" /></p>

<p>采用齐次坐标系时，可求得两条直线的交点的齐次表达：</p>

<script type="math/tex; mode=display">\tilde{x}=\tilde{l}_1\times\tilde{l}_2</script>

<p><script type="math/tex">\times</script>表示叉积。同时，两个点确定的直线方程的齐次表达为：</p>

<script type="math/tex; mode=display">\tilde{l}=\tilde{x}_1\times\tilde{x}_2</script>

<p>以上结论的严格的证明是很容易的，最粗暴简单的思路就是在欧式空间内计算出结果后转化为齐次表达，并与采用齐次表达计算结果进行对比，
这里略过。</p>

<h2 id="section-8">为什么更易用于仿射变换？</h2>

<p>对于一个2维点<script type="math/tex">p=(x,y)</script>，仿射变换(T)是线性变换(Ap)和平移变换(+t)的叠加:</p>

<script type="math/tex; mode=display">
T(p)=Ap+t
</script>

<p>线性变换在欧式空间中可以表示为矩阵乘积形式，如旋转变换和缩放变换：</p>

<script type="math/tex; mode=display">% <![CDATA[

\left[ \begin{array}{l}
\grave{x}\\
\grave{y}
\end{array} \right]=
\left[ \begin{array}{cc}
cos(\theta) & -sin(\theta)\\
sin(\theta) & cos(\theta)
\end{array}
\right]
\left[ \begin{array}{l}
x\\
y
\end{array}
\right]
 %]]></script>

<script type="math/tex; mode=display">% <![CDATA[

\left[ \begin{array}{l}
\grave{x}\\
\grave{y}
\end{array} \right]=
\left[ \begin{array}{cc}
S_x & 0\\
0 & S_y
\end{array}
\right]
\left[ \begin{array}{l}
x\\
y
\end{array}
\right]
 %]]></script>

<p>而平移变换</p>

<script type="math/tex; mode=display">
\left[ \begin{array}{l}
\grave{x}\\
\grave{y}
\end{array} \right]=
\left[ \begin{array}{c}
x\\
y
\end{array}
\right]
+\left[ \begin{array}{l}
t_x\\
t_y
\end{array}
\right]
</script>

<p>却不能用矩阵相乘的形式表达。现在引入齐次坐标系表达<script type="math/tex">\tilde{p}=(x,y,1)</script>，(尺度不变性，实际上在高一维的空间映射到<script type="math/tex">w=1</script>平面, 这样计算后结果直接可导出到欧式空间)。可以将旋转变换和尺度变换表示为： </p>

<script type="math/tex; mode=display">% <![CDATA[

\left[ \begin{array}{l}
\grave{x}\\
\grave{y}\\
1
\end{array} \right]=
\left[ \begin{array}{ccc}
cos(\theta) & -sin(\theta) & 0 \\
sin(\theta) & cos(\theta) & 0 \\
0 & 0 & 1
\end{array}
\right]
\left[ \begin{array}{l}
x\\
y\\
1
\end{array}
\right]
 %]]></script>

<script type="math/tex; mode=display">% <![CDATA[

\left[ \begin{array}{l}
\grave{x}\\
\grave{y}\\
1
\end{array} \right]=
\left[ \begin{array}{ccc}
S_x & 0 & 0\\
0 & S_y & 0\\
0 & 0 & 1
\end{array}
\right]
\left[ \begin{array}{l}
x\\
y\\
1
\end{array}
\right]
 %]]></script>

<p>平移变换表示为：</p>

<script type="math/tex; mode=display">% <![CDATA[

\left[ \begin{array}{l}
\grave{x}\\
\grave{y}\\
1
\end{array} \right]=
\left[ \begin{array}{ccc}
1 & 0 & t_x\\
0 & 1 & t_y\\
0 & 0 & 1
\end{array}
\right]
\left[ \begin{array}{l}
x\\
y\\
1
\end{array}
\right]
 %]]></script>

<p>然后我们可以导出仿射变换的矩阵形式，</p>

<script type="math/tex; mode=display">% <![CDATA[

T=\left[
\begin{array}{cc}
\textbf{A} & \textbf{t}\\
\textbf{O}_{1\times2} & 1
\end{array}
\right]
\left[ \begin{array}{l}
x\\
y\\
1
\end{array}
\right]
 %]]></script>

<p>其中<script type="math/tex">\textbf{O}_{1\times2}=[0~~0]</script>，仿射变换保留了点的共线/面性质及比例(可以参考一些图形学资料)，这在图形处理中非常重要，比如对于
平面上的一个几何形状进行变换，只需要对其顶点进行变换就可实现(在2维线上的点变换后一定与变换后的端点共线)。而齐次坐标系的
引入使仿射变换能以紧凑统一的矩阵形式表达和计算，这体现了其对仿射变换的重要性。</p>

<h2 id="section-9">为什么能够明确区分向量和点？</h2>

<p>当我们在坐标系<script type="math/tex">xOy</script>中用<script type="math/tex">(a,b)</script>定义一个向量<script type="math/tex">\vec{v}</script>时,表示<script type="math/tex">\vec{v}=a\vec{x}+b\vec{y}</script>，
当我们在同样的坐标系中用<script type="math/tex">(a,b)</script>表示一个点<script type="math/tex">p</script>时，表示<script type="math/tex">p-o=a\vec{x}+b\vec{y}</script>，假若写下<script type="math/tex">(2,1)</script>，
如无附加说明，不能区别出它是向量还是点。将点的表示重写为：</p>

<script type="math/tex; mode=display">
p=[a~~b~~1]\left[
\begin{array}{c}
\vec{x}\\
\vec{y}\\
o
\end{array}
\right]
</script>

<p>将向量的表示写为:</p>

<script type="math/tex; mode=display">
p=[a~~b~~0]\left[
\begin{array}{c}
\vec{x}\\
\vec{y}\\
o
\end{array}
\right]
</script>

<p>这样能够清晰地区分向量和点，用3个量表示2维点，这即是齐次坐标的思想。</p>

<h1 id="section-10">下一步</h1>

<p>文章为了便于思考，讨论的都是简单的情形，还有很多问题都没有严格的证明，比如，
3维点表达是否还适用？面表达，线表达呢？还有仿射变换为什么保留了共线/面信息？
更深入的了解建议找一本计算机图形学的资料，能够了解到更多关于投影空间，2D变换，3D变换，3D到2D变换的形式化表示,
以及更严格的证明和表述。</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#Computer Visions" title="Pages tagged Computer Visions" class="tag">Computer Visions</a></span>
        
            <div style="text-align:center; width:220px; margin-left:auto; margin-right:auto;">
            <span class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a><a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
            </span>
            </div><!-- /.social-share -->
        
      </footer>
        <!-- 社交化评论 -->
        
            <!-- UY BEGIN -->
            <div id="uyan_frame"></div>
            <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1955791"></script>
            <!-- UY END -->
        
    </div><!-- /.entry-content -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="http://localhost:4000/blog/opencv2basic/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="http://localhost:4000/blog/opencv2scan/" title="OpenCV2访问像素值的几种方法">OpenCV2访问像素值的几种方法</a></h3>
      <p>进行空域处理的第一步就是要访问图像某个位置的像素值，OpenCV2提供了几种访问图像像素的方法，主要包括随机访问稀疏位置集合和遍历图像大面积连续区域(甚至整幅图像)像素两类模式，本文对几种常用的方法进行总结。**GOALS**:* 随机访问像素* 遍历区域像素   * 实例...&hellip; <a href="http://localhost:4000/blog/opencv2scan/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="http://localhost:4000/blog/opencv2basic/" title="OpenCV2 基础操作">OpenCV2 基础操作</a></h4>
        <span>Published on August 04, 2014</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="http://localhost:4000/blog/opencv2linux/" title="快速开始学习OpenCV">快速开始学习OpenCV</a></h4>
        <span>Published on July 31, 2014</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 OnceMore. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49487364-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>


</body>
</html>
