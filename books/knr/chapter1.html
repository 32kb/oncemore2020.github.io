<!DOCTYPE HTML>
<html lang="en" >


<head>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>The C Programming Language-Chapter 1 | 《The C Programming Language - 2nd Edition》</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="generator" content="GitBook 2.6.7">  
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon"> 
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-disqus/plugin.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-yahei/yahei.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
 
    
    
    
    <link rel="prev" href="./index.html" />
    
 
    
</head>

<body class="theme-deepblue">
    <div class="header">
        <a aria-label="Table of Contents" class="btn-toggle-summary" href="#">
            <i class="fa fa-align-justify"></i>
        </a>
        <a class="logo">The C Programming Language</a>
        <ul class="nav">
            
        </ul>
    </div>
     
    <div class="book" data-level="1" data-basepath="." data-revision="Wed Mar 02 2016 07:39:24 GMT+0000 (UTC)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">

            
                
                    <a href="./index.html">

                        

                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="1" data-path="chapter1.html">

            
                
                    <a href="./chapter1.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        Chapter 1
                    </a>
                
            
            
        </li>
    


        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    
    <a href="#" target="_blank" class="btn pull-right weibo-sharing-link sharing-link" data-sharing="weibo" aria-label="Weibo"><i class="fa fa-weibo"></i></a>
    
    


    
    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >《The C Programming Language - 2nd Edition》</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="chapter-1--a-tutorial-introduction"><a name="chapter-1--a-tutorial-introduction" class="plugin-anchor" href="#chapter-1--a-tutorial-introduction"><span class="fa fa-link"></span></a>Chapter 1 - A Tutorial Introduction</h2>
<h1 id="helloworld"><a name="helloworld" class="plugin-anchor" href="#helloworld"><span class="fa fa-link"></span></a>Hello,world!</h1>
<p>C&#x6E90;&#x6587;&#x4EF6;&#x540E;&#x7F00;&#x4E3A;<code>*.c</code>&#xFF0C;&#x5982;&#x4E0B;helloworld.c&#x6587;&#x4EF6;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

main()
{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello,world!\n&quot;</span>);
}
</code></pre>
<p>&#x4F7F;&#x7528;gcc&#x7F16;&#x8BD1;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x4E0D;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F1A;&#x5F97;&#x5230;<code>a.out</code>&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x8F93;&#x5165;<code>./a.out</code>&#x8FD0;&#x884C;&#x7A0B;&#x5E8F;&#xFF0C;
&#x6216;&#x8005;&#x5728;gcc&#x7F16;&#x8BD1;&#x65F6;&#x7528;<code>-o</code>&#x9009;&#x9879;&#x6307;&#x5B9A;&#x76EE;&#x6807;&#x7A0B;&#x5E8F;&#xFF0C;&#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;&#x6267;&#x884C;&#x76EE;&#x6807;&#x7A0B;&#x5E8F;&#x3002;</p>
<pre><code class="lang-bash">$ gcc helloworld.c
$ ./a.out
Hello,world!

$ gcc helloworld.c -o hello
$ ./hello
Hello,world!
</code></pre>
<p>C&#x6E90;&#x7A0B;&#x5E8F;&#x5728;&#x4EFB;&#x4F55;&#x6761;&#x4EF6;&#x4E0B;&#x90FD;&#x5305;&#x62EC;<strong>&#x51FD;&#x6570;(functions)</strong>&#x548C;<strong>&#x53D8;&#x91CF;(variables)</strong>&#xFF0C;&#x51FD;&#x6570;&#x5305;&#x62EC;&#x6307;&#x5B9A;&#x8BA1;&#x7B97;&#x64CD;&#x4F5C;&#x7684;<strong>&#x8BED;&#x53E5;(statements)</strong>&#xFF0C;
&#x53D8;&#x91CF;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x671F;&#x95F4;&#x4F7F;&#x7528;&#x7684;&#x503C;&#x3002;<strong>main&#x51FD;&#x6570;</strong>&#x6BD4;&#x8F83;&#x7279;&#x6B8A;&#xFF0C;&#x7A0B;&#x5E8F;&#x4ECE;main&#x51FD;&#x6570;&#x7684;&#x5F00;&#x5934;&#x5F00;&#x59CB;&#x6267;&#x884C;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x6BCF;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x90FD;&#x5FC5;&#x987B;&#x5728;&#x67D0;&#x4E2A;&#x5730;&#x65B9;&#x5177;&#x6709;main&#x51FD;&#x6570;&#x3002;
main&#x51FD;&#x6570;&#x901A;&#x5E38;&#x4F1A;<strong>&#x8C03;&#x7528;(call)</strong>&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x6765;&#x6267;&#x884C;&#x4EFB;&#x52A1;,&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5305;&#x542B;&#x7684;<strong>&#x5E93;&#x6587;&#x4EF6;(libraries)</strong>&#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#xFF0C;
&#x5982;<code>helloworld.c</code>&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x884C;<code>#include &lt;stdio.h&gt;</code>&#x544A;&#x8BC9;<strong>&#x7F16;&#x8BD1;&#x5668;(compiler)</strong>&#x9700;&#x8981;&#x5305;&#x542B;<strong>&#x6807;&#x51C6;&#x8F93;&#x5165;/&#x8F93;&#x51FA;&#x5E93;(standard input/output library)</strong>&#xFF0C;
&#x56E0;&#x4E3A;<strong>C&#x8BED;&#x8A00;&#x672C;&#x8EAB;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x8F93;&#x5165;/&#x8F93;&#x51FA;&#x529F;&#x80FD;</strong>&#xFF0C;<code>main</code>&#x51FD;&#x6570;&#x9700;&#x8981;&#x8C03;&#x7528;<code>stdio.h</code>&#x4E2D;&#x7684;<code>printf()</code>&#x51FD;&#x6570;&#x3002;</p>
<p>&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x8BA9;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x79F0;&#x4E3A;<strong>&#x53C2;&#x6570;(arguments)</strong>&#x7684;&#x503C;&#x5217;&#x8868;&#x7ED9;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#xFF0C;
&#x5728;<code>helloworld.c</code>&#x4E2D;&#xFF0C;<code>main</code>&#x51FD;&#x6570;&#x4E0D;&#x63A5;&#x6536;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x662F;&#x4E00;&#x4E2A;&#x7A7A;&#x53C2;&#x6570;&#x5217;&#x8868;<code>()</code>&#x3002;
&#x51FD;&#x6570;&#x7684;&#x8BED;&#x53E5;&#x88AB;&#x5305;&#x62EC;&#x5728;<code>{ }</code>&#x4E2D;&#xFF0C;<code>helloworld.c</code>&#x53EA;&#x6709;&#x4E00;&#x6761;&#x8BED;&#x53E5;&#xFF0C;&#x8C03;&#x7528;&#x4E86;<code>printf()</code>&#x51FD;&#x6570;&#xFF0C;
&#x53C2;&#x6570;&#x4E3A;<code>&quot;Hello,world\n&quot;</code>&#xFF0C;<code>printf()</code>&#x662F;&#x4E00;&#x4E2A;<strong>&#x5E93;&#x51FD;&#x6570;</strong>&#xFF0C;&#x7528;&#x4E8E;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x3002;&#x4E0A;&#x4F8B;&#x4E2D;&#x4F20;&#x9012;&#x7684;&#x662F;&#x4E00;&#x4E2A;<strong>&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;</strong>&#xFF0C;
<code>\n</code>&#x79F0;&#x4E3A;<strong>&#x6362;&#x884C;&#x7B26;</strong>&#xFF0C;&#x5728;&#x8F93;&#x51FA;&#x5B57;&#x7B26;&#x4E32;&#x540E;&#x8FDB;&#x884C;&#x6362;&#x884C;&#x3002;<code>printf()</code>&#x51FD;&#x6570;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x8BBE;&#x7F6E;&#x6362;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x7684;&#x7A0B;&#x5E8F;&#x4F1A;&#x5F97;&#x5230;&#x548C;<code>helloworld.c</code>&#x4E00;&#x6837;&#x7684;&#x8F93;&#x51FA;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

main()
{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello,&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;world!&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);
}
</code></pre>
<p><code>\n</code>&#x5B9E;&#x9645;&#x4E0A;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;(&#x6362;&#x884C;&#x7B26;)&#xFF0C;&#x6362;&#x884C;&#x7B26;&#x5C5E;&#x4E8E;&#x4E0D;&#x80FD;&#x663E;&#x5F0F;&#x6253;&#x5370;&#x6216;&#x663E;&#x5F0F;&#x53EF;&#x89C1;&#x7684;&#x7B26;&#x53F7;&#xFF0C;C &#x7528;<strong>&#x8F6C;&#x4E49;&#x5B57;&#x7B26;(escape sequence)</strong>&#x6765;&#x5904;&#x7406;&#x8FD9;&#x7C7B;&#x5B57;&#x7B26;&#x3002;
&#x5982;<code>\t</code>&#x4EE3;&#x8868;&#x5236;&#x8868;&#x7B26;&#xFF0C;<code>\b</code>&#x8868;&#x793A;&#x9000;&#x683C;&#xFF0C;<code>\&quot;</code>&#x8868;&#x793A;&#x53CC;&#x5F15;&#x53F7;&#xFF0C;<code>\\</code>&#x8868;&#x793A;&#x53CD;&#x659C;&#x6760;&#x3002;</p>
<blockquote>
<p>Exercise 1-1. Run the &quot;hello, world&quot; program on your system. Experiment with leaving out parts of the
program, to see what error messages you get.</p>
</blockquote>
<pre><code class="lang-c"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello, world\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x4E2D;&#x52A0;&#x5165;&#x4E86;<code>return</code>&#x8BED;&#x53E5;&#xFF0C;&#x56E0;&#x4E3A;<code>main</code>&#x51FD;&#x6570;&#x603B;&#x662F;&#x8FD4;&#x56DE;<code>int</code>&#x578B;&#x53D8;&#x91CF;&#xFF0C;&#x663E;&#x5F0F;&#x5730;&#x6307;&#x51FA;&#x662F;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x7F16;&#x7801;&#x98CE;&#x683C;&#x3002;</p>
<blockquote>
<p>exercise 1-2. Experiment to find out what happens when printf&apos;s argument string contains \c, where c
is some character not listed above.</p>
</blockquote>
<pre><code class="lang-c"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">char</span> c;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&#x54CD;&#x94C3;&#x8B66;&#x544A;. \a\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&#x6362;&#x9875;. \f\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&#x8FD9;&#x4E2A;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;, \r, &#x5C06;&#x5149;&#x6807;&#x79FB;&#x5411;&#x884C;&#x9996;.\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t&#x6C34;&#x5E73;&#x5236;&#x8868;&#x7B26;.\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&#x5782;&#x76F4;&#x5236;&#x8868;&#x7B26;\v&#x6362;&#x884C;&#x5E76;&#x7F29;&#x8FDB;&#x5230;&#x4E0A;&#x4E00;&#x884C;&#x884C;&#x5C3E;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;.\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&#x56DE;&#x683C;&lt;&gt;.\b\b&quot;</span>);
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%c&quot;</span>,&amp;c);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x6CE8;&#x610F;&#x6709;&#x4E00;&#x4E9B;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#x4F1A;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x7EC8;&#x7AEF;&#x4E0B;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7684;&#x6548;&#x679C;(&#x5982;<code>\v</code>)&#x3002;</p>
<h1 id="&#x53D8;&#x91CF;&#x548C;&#x7B97;&#x672F;&#x8868;&#x8FBE;&#x5F0F;"><a name="&#x53D8;&#x91CF;&#x548C;&#x7B97;&#x672F;&#x8868;&#x8FBE;&#x5F0F;" class="plugin-anchor" href="#&#x53D8;&#x91CF;&#x548C;&#x7B97;&#x672F;&#x8868;&#x8FBE;&#x5F0F;"><span class="fa fa-link"></span></a>&#x53D8;&#x91CF;&#x548C;&#x7B97;&#x672F;&#x8868;&#x8FBE;&#x5F0F;</h1>
<p>&#x6E29;&#x5EA6;&#x8F6C;&#x6362;&#x7A0B;&#x5E8F;$$^{\circ}C=(5/9)(^{\circ}F-32)$$</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/* print Fahrenheit-Celsius table
    for fahr = 0,20,...300 */</span>
main()
{
    <span class="hljs-keyword">int</span> fahr,celsius;
    <span class="hljs-keyword">int</span> lower,upper,step;

    lower = <span class="hljs-number">0</span>;    <span class="hljs-comment">/* lower limit of temperature scale */</span>
    upper = <span class="hljs-number">300</span>;    <span class="hljs-comment">/* upper limit */</span>
    step = <span class="hljs-number">20</span>;    <span class="hljs-comment">/* step size */</span>

    fahr = lower;
    <span class="hljs-keyword">while</span> (fahr &lt;= upper) {
        celsius = <span class="hljs-number">5</span> * (fahr -<span class="hljs-number">32</span>) / <span class="hljs-number">9</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\t%d\n&quot;</span>, fahr, celsius);
        fahr = fahr + step;
    }
}
</code></pre>
<p><code>/* */</code>&#x4E4B;&#x95F4;&#x7684;&#x5185;&#x5BB9;&#x79F0;&#x4E3A;<strong>&#x6CE8;&#x91CA;(comment)</strong>&#xFF0C;&#x5176;&#x95F4;&#x7684;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#x90FD;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x5668;&#x6392;&#x9664;&#x3002;</p>
<p>C&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x5728;&#x4F7F;&#x7528;&#x4E4B;&#x524D;&#x5FC5;&#x987B;&#x88AB;<strong>&#x58F0;&#x660E;(declaration)</strong>&#xFF0C;&#x8BF4;&#x660E;&#x53D8;&#x91CF;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x901A;&#x5E38;&#x5305;&#x62EC;&#x53D8;&#x91CF;&#x7C7B;&#x578B;&#x548C;&#x53D8;&#x91CF;&#x5217;&#x8868;&#x3002;
<code>int</code>&#x7C7B;&#x578B;&#x8868;&#x793A;&#x6574;&#x578B;&#x3002;C&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x5982;<code>float</code>(&#x6D6E;&#x70B9;&#x578B;)&#xFF0C;<code>char</code>(&#x5B57;&#x7B26;&#x578B;)&#xFF0C;<code>short</code>(&#x77ED;&#x6574;&#x578B;)&#xFF0C;
<code>long</code>(&#x957F;&#x6574;&#x578B;)&#xFF0C;<code>double</code>(&#x53CC;&#x7CBE;&#x5EA6;&#x6D6E;&#x70B9;&#x578B;)&#x7B49;&#x3002;&#x8FD9;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x5927;&#x5C0F;&#x662F;<strong>&#x4F9D;&#x8D56;&#x4E8E;&#x673A;&#x5668;(machine-dependent)</strong>&#x7684;&#x3002;</p>
<p><code>=</code>&#x8868;&#x793A;<strong>&#x8D4B;&#x503C;&#x8FD0;&#x7B97;(assignment statements)</strong>&#x3002;</p>
<p>&#x6E29;&#x5EA6;&#x8868;&#x7684;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x65B9;&#x5F0F;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x91C7;&#x7528;<strong>&#x5FAA;&#x73AF;(loop)</strong>&#x6765;&#x5904;&#x7406;&#xFF0C;&#x4E0A;&#x4F8B;&#x4E2D;&#x91C7;&#x7528;&#x4E86;<code>while</code>&#x5FAA;&#x73AF;&#x3002;
&#x5176;&#x64CD;&#x4F5C;&#x6D41;&#x7A0B;&#x4E3A;&#xFF1A;</p>
<ol>
<li>&#x6D4B;&#x8BD5;&#x62EC;&#x53F7;&#x5185;&#x6761;&#x4EF6;</li>
<li>&#x5982;&#x679C;&#x62EC;&#x53F7;&#x5185;&#x6761;&#x4EF6;&#x4E3A;&#x771F;&#xFF0C;&#x5FAA;&#x73AF;&#x4F53;(<code>{ }</code>&#x5185;&#x7684;&#x8BED;&#x53E5;)&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x6D4B;&#x8BD5;&#x62EC;&#x53F7;&#x5185;&#x6761;&#x4EF6;&#xFF0C;&#x5FAA;&#x73AF;<code>1.</code>&#x548C;<code>2.</code></li>
<li>&#x5982;&#x679C;&#x62EC;&#x53F7;&#x5185;&#x6761;&#x4EF6;&#x4E3A;&#x5047;&#xFF0C;&#x5219;&#x5FAA;&#x73AF;&#x7EC8;&#x6B62;</li>
</ol>
<p>&#x5C06;&#x5FAA;&#x73AF;&#x8BED;&#x53E5;&#x7528;<code>{ }</code>&#x62EC;&#x8D77;&#x6765;&#xFF0C;&#x540C;&#x65F6;&#x5BF9;&#x8BED;&#x53E5;&#x91C7;&#x7528;<strong>&#x7F29;&#x8FDB;(indent)</strong>&#x662F;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x7F16;&#x7801;&#x98CE;&#x683C;&#x3002;<strong>K&amp;R</strong>&#x5EFA;&#x8BAE;:</p>
<blockquote>
<p>writing only one statement per line, and using blanks around operators to clarify grouping.</p>
</blockquote>
<p>&#x6CE8;&#x610F;&#x5230;<code>celsius = 5 * (fahr - 32) / 9;</code>&#x4E2D;&#x5148;&#x4E58;5&#x518D;&#x9664;&#x4EE5;9&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x4E58;&#x4EE5;5/9&#xFF0C;&#x56E0;&#x4E3A;C&#x7684;&#x6574;&#x578B;&#x9664;&#x6CD5;&#x4F1A;&#x622A;&#x65AD;&#x5C0F;&#x6570;
&#x90E8;&#x5206;&#xFF0C;&#x56E0;&#x4E3A;5&#x548C;9&#x90FD;&#x662F;&#x6574;&#x6570;&#xFF0C;5/9&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x662F;0&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x9020;&#x6210;&#x6574;&#x4E2A;&#x6E29;&#x5EA6;&#x8868;&#x8F6C;&#x6362;&#x51FA;&#x6765;&#x7684;&#x90FD;&#x662F;0&#x3002;</p>
<p>&#x4E0A;&#x4F8B;&#x7684;<code>printf()</code>&#x51FD;&#x6570;&#x7528;&#x5230;&#x4E86;&#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;&#xFF0C;<code>%d</code>&#x8868;&#x793A;&#x5341;&#x8FDB;&#x5236;(decimal)&#x6574;&#x578B;&#xFF0C;&#x53D8;&#x91CF;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#x4E4B;&#x540E;&#x6309;&#x6B21;&#x5E8F;&#x5217;&#x51FA;&#xFF0C;&#x7528;<code>,</code>&#x5206;&#x9694;&#x3002;
&#x4F8B;&#x5B50;&#x90A3;&#x6837;&#x4F7F;&#x7528;<code>printf()</code>&#x8868;&#x793A;&#x8F93;&#x51FA;<code>fahr</code>&#x548C;<code>celsius</code>&#x53D8;&#x91CF;&#xFF0C;&#x4E2D;&#x95F4;&#x7528;&#x4E00;&#x4E2A;&#x5236;&#x8868;&#x7B26;<code>\t</code>&#x9694;&#x5F00;&#x3002;&#x6CE8;&#x610F;<code>%</code>&#x548C;&#x540E;&#x9762;&#x7684;&#x53D8;&#x91CF;&#x5217;&#x8868;&#x5143;&#x7D20;&#x6570;
&#x91CF;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x5143;&#x7D20;&#x7684;&#x7C7B;&#x578B;&#x5FC5;&#x987B;&#x5339;&#x914D;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;<code>printf()</code>&#x5E76;&#x4E0D;&#x662F;C&#x8BED;&#x8A00;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5E76;&#x4E14;C&#x8BED;&#x8A00;&#x4E2D;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#xFF0C;<code>printf()</code>&#x5C5E;&#x4E8E;&#x6807;&#x51C6;&#x5E93;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x4E0A;&#x4F8B;&#x7684;&#x8F93;&#x51FA;&#x5E76;&#x4E0D;&#x662F;&#x5F88;&#x7F8E;&#x89C2;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x53F3;&#x5BF9;&#x9F50;&#xFF0C;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5BF9;<code>%d</code>&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x5BBD;&#x5EA6;&#xFF0C;
&#x6BD4;&#x5982;<code>printf(&quot;%3d %6d\n&quot;,fahr,celsius);</code>&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x5C06;<code>fahr</code>&#x7528;3&#x4E2A;&#x5B57;&#x7B26;&#x5BBD;&#x5EA6;&#x8F93;&#x51FA;&#xFF0C;<code>celsius</code>&#x7528;6&#x4E2A;&#x5B57;&#x7B26;&#x5BBD;&#x5EA6;&#x8F93;&#x51FA;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x7531;&#x4E8E;&#x6574;&#x578B;&#x9664;&#x6CD5;&#x622A;&#x65AD;&#xFF0C;&#x4E0A;&#x4F8B;&#x5E76;&#x4E0D;&#x662F;&#x5F88;&#x7CBE;&#x786E;&#xFF0C;&#x4F7F;&#x7528;<strong>&#x6D6E;&#x70B9;&#x578B;</strong>&#x6765;&#x8FDB;&#x884C;&#x8FD0;&#x7B97;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/* print Fahrenheit-Celsius table
for fahr = 0, 20, ..., 300; floating-point version */</span>
main()
{
    <span class="hljs-keyword">float</span> fahr, celsius;
    <span class="hljs-keyword">float</span> lower, upper, step;

    lower = <span class="hljs-number">0</span>;    <span class="hljs-comment">/* lower limit of temperatuire scale */</span>
    upper = <span class="hljs-number">300</span>;    <span class="hljs-comment">/* upper limit */</span>
    step = <span class="hljs-number">20</span>;    <span class="hljs-comment">/* step size */</span>

    fahr = lower;
    <span class="hljs-keyword">while</span> (fahr &lt;= upper) {
        celsius = (<span class="hljs-number">5.0</span>/<span class="hljs-number">9.0</span>) * (fahr-<span class="hljs-number">32.0</span>);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3.0f %6.1f\n&quot;</span>, fahr, celsius);
        fahr = fahr + step;
    }
}
</code></pre>
<p>&#x5C06;<code>fahr</code>&#x548C;<code>celsius</code>&#x6539;&#x6210;<strong>float</strong>&#x7C7B;&#x578B;&#x540E;&#xFF0C;&#x6E29;&#x5EA6;&#x8F6C;&#x6362;&#x80FD;&#x4EE5;&#x66F4;&#x81EA;&#x7136;&#x7684;&#x5F62;&#x5F0F;&#x5199;&#x51FA;&#x3002;<code>5.0</code>&#x548C;<code>9.0</code>&#x8868;&#x793A;&#x8FD9;&#x4E24;&#x4E2A;
&#x5E38;&#x91CF;&#x662F;&#x6D6E;&#x70B9;&#x578B;&#xFF0C;&#x5219;<code>5.0/9.0</code>&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x622A;&#x65AD;&#x3002;&#x5982;&#x679C;<strong>&#x64CD;&#x4F5C;&#x6570;</strong>&#x90FD;&#x662F;&#x6D6E;&#x70B9;&#x578B;&#xFF0C;&#x5219;&#x6309;&#x7167;&#x6D6E;&#x70B9;&#x578B;&#x8FD0;&#x7B97;(&#x5982;&#x4E0A;&#x4F8B;)&#xFF0C;
&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x6570;&#x65E2;&#x6709;&#x6574;&#x578B;&#x4E5F;&#x6709;&#x6D6E;&#x70B9;&#x578B;&#xFF0C;&#x5219;&#x6574;&#x578B;&#x4F1A;&#x5728;&#x8FD0;&#x7B97;&#x4E4B;&#x524D;&#x8F6C;&#x6362;&#x6210;&#x6D6E;&#x70B9;&#x578B;&#x3002;<strong>K&amp;R</strong>&#x5EFA;&#x8BAE;&#xFF1A;</p>
<blockquote>
<p>writing float-point constants with explicit decimal points even when they have integral
  values emphasizes their floating-point nature for human readers.</p>
</blockquote>
<p><code>printf()</code>&#x4E2D;&#x7684;<code>%3.0f</code>&#x8868;&#x793A;&#x6D6E;&#x70B9;&#x6570;<code>fahr</code>&#x7528;&#x81F3;&#x5C11;3&#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x5BBD;&#x5EA6;&#x6253;&#x5370;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x5E26;&#x5C0F;&#x6570;&#x70B9;&#x548C;&#x5C0F;&#x6570;&#x90E8;&#x5206;&#xFF0C;<code>%6.1f</code>
&#x8868;&#x793A;&#x6D6E;&#x70B9;&#x6570;<code>celsius</code>&#x7528;&#x81F3;&#x5C11;6&#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x5BBD;&#x5EA6;&#x6253;&#x5370;&#xFF0C;&#x5728;&#x5C0F;&#x6570;&#x70B9;&#x540E;&#x5E26;1&#x4F4D;&#x5C0F;&#x6570;&#x3002;&#x6CE8;&#x610F;&#x6307;&#x5B9A;&#x6D6E;&#x70B9;&#x6570;&#x683C;&#x5F0F;&#x7684;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x7701;&#x53BB;&#xFF0C;
&#x5982;<code>%6f</code>&#x53EA;&#x6307;&#x5B9A;&#x5BBD;&#x5EA6;&#xFF0C;<code>%,2f</code>&#x53EA;&#x6307;&#x5B9A;&#x5C0F;&#x6570;&#x70B9;&#x540E;&#x4FDD;&#x7559;&#x4E24;&#x4F4D;&#x5C0F;&#x6570;&#xFF0C;&#x800C;&#x5BBD;&#x5EA6;&#x4E0D;&#x53D7;&#x9650;&#x5236;&#xFF0C;<code>%f</code>&#x53EA;&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x6D6E;&#x70B9;&#x6570;&#x3002;</p>
<p>&#x540C;&#x65F6;&#xFF0C;<code>printf()</code>&#x8FD8;&#x80FD;&#x8BC6;&#x522B;&#x7684;&#x683C;&#x5F0F;&#x5316;&#x53C2;&#x6570;&#x6709;<code>%o</code>(&#x516B;&#x8FDB;&#x5236;&#x6574;&#x6570;)&#xFF0C;<code>%x</code>(&#x5341;&#x516D;&#x8FDB;&#x5236;&#x6574;&#x6570;)&#xFF0C;<code>%c</code>(&#x5B57;&#x7B26;)&#xFF0C;<code>%s</code>(&#x5B57;&#x7B26;&#x4E32;)
&#x4EE5;&#x53CA;<code>%%</code>(&#x4E0D;&#x8F6C;&#x6362;&#x683C;&#x5F0F;&#xFF0C;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&quot;%&quot;)</p>
<blockquote>
<p>Exercise 1-3. Modify the temperature conversion program to print a heading above the table.</p>
</blockquote>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">float</span> fahr,celsius;
    <span class="hljs-keyword">int</span> lower,upper,step;

    lower = <span class="hljs-number">0</span>;
    upper = <span class="hljs-number">300</span>;
    step = <span class="hljs-number">20</span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3c %6c\n&quot;</span>,<span class="hljs-string">&apos;F&apos;</span>,<span class="hljs-string">&apos;C&apos;</span>);
    fahr=lower;
    <span class="hljs-keyword">while</span>(fahr&lt;=upper)
    {
        celsius=(<span class="hljs-number">5.0</span>/<span class="hljs-number">9.0</span>)*(fahr-<span class="hljs-number">32.0</span>);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3.0f %6.1f\n&quot;</span>,fahr,celsius);
        fahr = fahr+step;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<blockquote>
<p>Exercise 1-4. Write a program to print the corresponding Celsius to Fahrenheit table.</p>
</blockquote>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">float</span> fahr,celsius;
    <span class="hljs-keyword">int</span> lower,upper,step;

    lower = <span class="hljs-number">0</span>;
    upper = <span class="hljs-number">300</span>;
    step = <span class="hljs-number">20</span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3c %6c\n&quot;</span>,<span class="hljs-string">&apos;C&apos;</span>,<span class="hljs-string">&apos;F&apos;</span>);
    celsius=lower;
    <span class="hljs-keyword">while</span>(celsius&lt;=upper)
    {
        fahr=(<span class="hljs-number">9.0</span>/<span class="hljs-number">5.0</span>)*celsius+<span class="hljs-number">32.0</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3.0f %6.1f\n&quot;</span>,celsius,fahr);
        celsius = celsius+step;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h1 id="for&#x8BED;&#x53E5;"><a name="for&#x8BED;&#x53E5;" class="plugin-anchor" href="#for&#x8BED;&#x53E5;"><span class="fa fa-link"></span></a>for&#x8BED;&#x53E5;</h1>
<p>&#x6E29;&#x5EA6;&#x8F6C;&#x6362;&#x7A0B;&#x5E8F;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF1A;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-comment">/* print Fahrenheit-Celsius table */</span>
main()
{
    <span class="hljs-keyword">int</span> fahr;

    <span class="hljs-keyword">for</span> (fahr = <span class="hljs-number">0</span>; fahr &lt;= <span class="hljs-number">300</span>; fahr = fahr + <span class="hljs-number">20</span>)
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3d %6.1f\n&quot;</span>, fahr, (<span class="hljs-number">5.0</span>/<span class="hljs-number">9.0</span>)*(fahr-<span class="hljs-number">32</span>));
}
</code></pre>
<p>&#x4E0E;&#x4E4B;&#x524D;&#x7684;&#x7A0B;&#x5E8F;&#x4E0D;&#x540C;&#xFF0C;&#x9664;&#x4E86;<code>fahr</code>&#x4E4B;&#x5916;&#x7684;&#x53D8;&#x91CF;&#x90FD;&#x7CBE;&#x7B80;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;<code>fahr</code>&#x4E3A;int&#x7C7B;&#x578B;&#x3002;</p>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x8F6C;&#x6362;&#x6E29;&#x5EA6;&#x7684;&#x8BA1;&#x7B97;&#x5E76;&#x5165;&#x4E86;<code>printf()</code>&#x8BED;&#x53E5;&#x3002;&#x8FD9;&#x4EE3;&#x8868;&#x4E86;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x89C4;&#x5219;&#xFF1A;</p>
<blockquote>
<p>in any context where it is permissible to use the value of some type,you can use a more complicated expression of that type.</p>
</blockquote>
<p>&#x7A0B;&#x5E8F;&#x4E2D;<code>printf()</code>&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x5FC5;&#x987B;&#x4E0E;<code>%6.1f</code>&#x5339;&#x914D;&#xFF0C;&#x90A3;&#x4E48;&#x4EFB;&#x4F55;&#x6D6E;&#x70B9;&#x578B;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x90FD;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x3002;</p>
<p><strong>for&#x8BED;&#x53E5;</strong>&#x5C5E;&#x4E8E;&#x5FAA;&#x73AF;&#x8BED;&#x53E5;&#xFF0C;&#x5305;&#x62EC;<strong>&#x521D;&#x59CB;&#x5316;(initialization)</strong>:<code>fahr = 0;</code>&#xFF0C;<strong>&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;(test condition)</strong>:<code>fahr &lt;= 300;</code>&#xFF0C;&#x4EE5;&#x53CA;
<strong>&#x6B65;&#x8FDB;(increment step)</strong>:<code>fahr = fahr + 20</code>&#x3002;&#x5FAA;&#x73AF;&#x5728;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x4E0D;&#x6EE1;&#x8DB3;&#x65F6;&#x7EC8;&#x6B62;&#x3002;</p>
<p><code>for</code>&#x548C;<code>while</code>&#x4E4B;&#x95F4;&#x7684;&#x9009;&#x62E9;&#x9700;&#x8981;&#x89C6;&#x60C5;&#x51B5;&#x800C;&#x5B9A;&#x3002;<code>for</code>&#x901A;&#x5E38;&#x9002;&#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316;&#x548C;&#x6B65;&#x8FDB;&#x662F;&#x5355;&#x4E00;&#x8BED;&#x53E5;&#x5E76;&#x4E14;&#x5177;&#x6709;&#x4E00;&#x5B9A;&#x8054;&#x7CFB;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x76F8;&#x6BD4;<code>while</code>&#x66F4;&#x52A0;&#x7D27;&#x51D1;&#xFF0C;
&#x56E0;&#x4E3A;&#x4ED6;&#x5C06;&#x5FAA;&#x73AF;&#x63A7;&#x5236;&#x8BED;&#x53E5;&#x653E;&#x5728;&#x4E86;&#x540C;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#x3002;</p>
<blockquote>
<p>Exercise 1-5. Modify the temperature conversion program to print the table in reverse order,that is, from 300 degrees to 0.</p>
</blockquote>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/*for version*/</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">float</span> fahr,celsius;
    <span class="hljs-keyword">int</span> lower,upper,step;

    lower = <span class="hljs-number">0</span>;
    upper = <span class="hljs-number">300</span>;
    step = <span class="hljs-number">20</span>;

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3c%6c&quot;</span>,<span class="hljs-string">&apos;C&apos;</span>,<span class="hljs-string">&apos;F&apos;</span>);
    <span class="hljs-keyword">for</span>(celsius = upper;celsius &gt;= lower;celsius -= step)
    {
        fahr = (<span class="hljs-number">9.0</span>/<span class="hljs-number">5.0</span>) * celsius + <span class="hljs-number">32.0</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3.0f%6.1f\n&quot;</span>,celsius,fahr);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}


<span class="hljs-comment">/*while version*/</span>
<span class="hljs-comment">//int main(void)</span>
<span class="hljs-comment">//{</span>
<span class="hljs-comment">//    float fahr,celsius;</span>
<span class="hljs-comment">//    int lower,upper,step;</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//    lower = 0;</span>
<span class="hljs-comment">//    upper = 300;</span>
<span class="hljs-comment">//    step = 20;</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//    printf(&quot;%3c%6c\n&quot;,&apos;C&apos;,&apos;F&apos;);</span>
<span class="hljs-comment">//    celsius = upper;</span>
<span class="hljs-comment">//    while(celsius &gt;= lower)</span>
<span class="hljs-comment">//    {</span>
<span class="hljs-comment">//        fahr = (9.0/5.0)*celsius + 32.0;</span>
<span class="hljs-comment">//        printf(&quot;%3.0f %6.1f\n&quot;,celsius,fahr);</span>
<span class="hljs-comment">//        celsius -= step;</span>
<span class="hljs-comment">//    }</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//    return 0;</span>
<span class="hljs-comment">//}</span>
</code></pre>
<h1 id="&#x7B26;&#x53F7;&#x5E38;&#x91CF;"><a name="&#x7B26;&#x53F7;&#x5E38;&#x91CF;" class="plugin-anchor" href="#&#x7B26;&#x53F7;&#x5E38;&#x91CF;"><span class="fa fa-link"></span></a>&#x7B26;&#x53F7;&#x5E38;&#x91CF;</h1>
<p>&#x5C06;300&#x548C;20&#x8FD9;&#x6837;&#x7684;&quot;magic numbers&quot;&#x76F4;&#x63A5;&#x653E;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x662F;&#x4E00;&#x79CD;&#x574F;&#x4E60;&#x60EF;&#xFF0C;&#x7834;&#x574F;&#x4E86;&#x7A0B;&#x5E8F;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x96BE;&#x4EE5;&#x7CFB;&#x7EDF;&#x5730;&#x4FEE;&#x6539;&#x3002;
&#x4E00;&#x79CD;&#x5904;&#x7406;&#x8FD9;&#x7C7B;&quot;magic numbers&quot;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x7ED9;&#x4ED6;&#x4EEC;&#x8BBE;&#x7F6E;&#x6709;&#x610F;&#x4E49;&#x7684;&#x540D;&#x79F0;&#xFF0C;<code>#define</code>&#x8BED;&#x53E5;&#x4E3A;<strong>&#x7B26;&#x53F7;&#x5E38;&#x91CF;(symbolic constant)</strong>
&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x8868;&#x793A;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> name replacement list</span>
</code></pre>
<p>&#x8FD9;&#x6837;&#x4E00;&#x6765;&#x4EFB;&#x4F55;&#x51FA;&#x73B0;<code>name</code>&#x7684;&#x5730;&#x65B9;(&#x9664;&#x4E86;&#x5728;&#x5F15;&#x53F7;&#x4E4B;&#x5185;&#x6216;&#x662F;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x540D;&#x79F0;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x4E4B;&#x5916;)&#x90FD;&#x4F1A;&#x88AB;&#x66FF;&#x6362;&#x4E3A;&#x76F8;&#x5E94;&#x7684;<code>replacement text</code>&#x3002;
<code>name</code>&#x548C;&#x53D8;&#x91CF;&#x4E00;&#x6837;&#xFF0C;&#x662F;&#x4EE5;&#x5B57;&#x6BCD;&#x5F00;&#x5934;&#x7684;&#x7531;&#x5B57;&#x6BCD;&#x548C;&#x6570;&#x5B57;&#x7EC4;&#x6210;&#x7684;&#x5E8F;&#x5217;&#x3002;<code>replacement text</code>&#x4E0D;&#x9650;&#x4E8E;&#x6570;&#x5B57;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x3002;
&#x8FD9;&#x6837;&#x6E29;&#x5EA6;&#x8F6C;&#x6362;&#x7A0B;&#x5E8F;&#x6539;&#x8FDB;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> LOWER <span class="hljs-number">0</span>        <span class="hljs-comment">/* lower limit of table */</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> UPPER <span class="hljs-number">300</span>        <span class="hljs-comment">/* upper limit */</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> STEP <span class="hljs-number">20</span>        <span class="hljs-comment">/* step size */</span></span>

<span class="hljs-comment">/* print Fahrenheit-Celsius table */</span>
main()
{
    <span class="hljs-keyword">int</span> fahr;
    <span class="hljs-keyword">for</span> (fahr = LOWER; fahr &lt;= UPPER; fahr = fahr + STEP)
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3d %6.1f\n&quot;</span>, fahr, (<span class="hljs-number">5.0</span>/<span class="hljs-number">9.0</span>)*(fahr-<span class="hljs-number">32</span>));
}
</code></pre>
<p>&#x6CE8;&#x610F;&#x5230;<code>#define</code>&#x884C;&#x5E76;&#x6CA1;&#x6709;&#x4EE5;<code>;</code>&#x7ED3;&#x675F;&#x3002;<code>LOWER</code>&#xFF0C;<code>UPPER</code>&#xFF0C;<code>STEP</code><strong>&#x5E76;&#x4E0D;&#x662F;</strong>&#x53D8;&#x91CF;,&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x58F0;&#x660E;&#x8BED;&#x53E5;&#x4E2D;&#x3002;
&#x7B26;&#x53F7;&#x5E38;&#x91CF;&#x901A;&#x5E38;&#x91C7;&#x7528;&#x5927;&#x5199;&#x5F62;&#x5F0F;&#x4E66;&#x5199;&#xFF0C;&#x8FD9;&#x6837;&#x80FD;&#x4E0E;&#x53D8;&#x91CF;&#x540D;&#x52A0;&#x4EE5;&#x533A;&#x5206;&#x3002;</p>
<h1 id="&#x5B57;&#x7B26;&#x8F93;&#x5165;&#x8F93;&#x51FA;"><a name="&#x5B57;&#x7B26;&#x8F93;&#x5165;&#x8F93;&#x51FA;" class="plugin-anchor" href="#&#x5B57;&#x7B26;&#x8F93;&#x5165;&#x8F93;&#x51FA;"><span class="fa fa-link"></span></a>&#x5B57;&#x7B26;&#x8F93;&#x5165;/&#x8F93;&#x51FA;</h1>
<p><strong>&#x6587;&#x672C;&#x6D41;(text stream)</strong>&#x6307;&#x5212;&#x5206;&#x4E3A;&#x884C;&#x7684;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#xFF0C;&#x6BCF;&#x4E00;&#x884C;&#x7531;0&#x4E2A;&#x6216;&#x66F4;&#x591A;&#x7684;&#x5B57;&#x7B26;&#x7D27;&#x8DDF;&#x4E00;&#x4E2A;&#x6362;&#x884C;&#x7B26;&#xFF0C;<strong>&#x6807;&#x51C6;&#x5E93;</strong>&#x8D1F;&#x8D23;&#x786E;&#x8BA4;&#x8F93;&#x5165;/&#x8F93;&#x51FA;&#x6D41;
&#x7684;&#x8FD9;&#x79CD;&#x89C4;&#x8303;&#xFF0C;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x5E93;&#x7684;C&#x7A0B;&#x5E8F;&#x5458;&#x53EF;&#x4EE5;&#x4E0D;&#x5FC5;&#x62C5;&#x5FC3;&#x662F;&#x5426;&#x7B26;&#x5408;&#x4E0A;&#x8FF0;&#x89C4;&#x8303;&#x3002;</p>
<p>&#x6807;&#x51C6;&#x5E93;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x51FD;&#x6570;&#x6765;&#x4E00;&#x6B21;&#x8BFB;&#x5165;&#x6216;&#x662F;&#x5199;&#x5165;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;<code>getchar()</code>&#x548C;<code>putchar()</code>&#x662F;&#x6700;&#x7B80;&#x5355;&#x7684;&#x3002;</p>
<p>&#x6BCF;&#x6B21;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;<code>getchar()</code>&#x4ECE;&#x6587;&#x672C;&#x6D41;&#x4E2D;&#x8BFB;&#x5165;<em>&#x4E0B;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x5B57;&#x7B26;</em>&#x5E76;&#x8FD4;&#x56DE;&#x5B83;&#x7684;&#x503C;&#xFF0C;
<code>putchar()</code>&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x3002;</p>
<h2 id="&#x6587;&#x4EF6;&#x62F7;&#x8D1D;"><a name="&#x6587;&#x4EF6;&#x62F7;&#x8D1D;" class="plugin-anchor" href="#&#x6587;&#x4EF6;&#x62F7;&#x8D1D;"><span class="fa fa-link"></span></a>&#x6587;&#x4EF6;&#x62F7;&#x8D1D;</h2>
<p>&#x91C7;&#x7528;<code>getchar()</code>&#x548C;<code>putchar()</code>&#x80FD;&#x591F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x5730;&#x5C06;&#x8F93;&#x5165;&#x62F7;&#x8D1D;&#x5230;&#x8F93;&#x51FA;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/* copy input to output; 1st version*/</span>
main()
{
    <span class="hljs-keyword">int</span> c;
    c = getchar();
    <span class="hljs-keyword">while</span> (c != EOF) {
        <span class="hljs-built_in">putchar</span>(c);
        c = getchar();
    }
}
</code></pre>
<p>&#x5173;&#x7CFB;&#x64CD;&#x4F5C;&#x7B26;<code>!=</code>&#x8868;&#x793A;&quot;&#x4E0D;&#x7B49;&#x4E8E;&quot;&#x3002;</p>
<p><code>char</code>&#x7C7B;&#x578B;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x5B57;&#x7B26;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;&#x4EFB;&#x4F55;&#x6574;&#x578B;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x5B57;&#x7B26;&#x6570;&#x636E;&#x3002;&#x7A0B;&#x5E8F;&#x4E2D;&#x91C7;&#x7528;<code>int</code>&#x6709;&#x91CD;&#x8981;&#x539F;&#x56E0;&#x3002;&#x4E3A;&#x4E86;&#x8BC6;&#x522B;&#x8F93;&#x5165;&#x7684;&#x7EC8;&#x6B62;&#xFF0C;
<code>getchar()</code>&#x5728;&#x8F93;&#x5165;&#x7ED3;&#x675F;&#x4E4B;&#x540E;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x533A;&#x522B;&#x4E8E;&#x4EFB;&#x4F55;&#x6709;&#x6548;&#x5B57;&#x7B26;&#x7684;&#x503C;&#xFF0C;&#x88AB;&#x79F0;&#x4E3A;<code>EOF</code>(end of file)&#x3002;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5C06;<code>c</code>&#x58F0;&#x660E;&#x4E3A;&#x8DB3;&#x591F;
&#x88C5;&#x4E0B;<code>getchar()</code>&#x8FD4;&#x56DE;&#x7684;&#x4EFB;&#x4F55;&#x503C;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x91C7;&#x7528;<code>char</code>&#x7C7B;&#x578B;&#xFF0C;&#x56E0;&#x4E3A;<code>c</code>&#x5FC5;&#x987B;&#x80FD;&#x591F;&#x88C5;&#x4E0B;&#x9664;&#x6709;&#x6548;&#x5B57;&#x7B26;(<code>char</code>&#x80FD;&#x5B58;&#x7684;&#x6240;&#x6709;&#x503C;)&#x4EE5;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x503C;
&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x91C7;&#x7528;<code>int</code>&#x3002;</p>
<p><code>EOF</code>&#x5B9A;&#x4E49;&#x5728;<code>&lt;stdio.h&gt;</code>&#x4E2D;&#xFF0C;&#x5176;&#x5177;&#x4F53;&#x503C;&#x5E76;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x4F1A;&#x662F;<code>char</code>&#x6240;&#x80FD;&#x8868;&#x793A;&#x7684;&#x4EFB;&#x4F55;&#x503C;&#xFF0C;&#x91C7;&#x7528;&#x7B26;&#x53F7;&#x5E38;&#x91CF;&#x6765;&#x5904;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x7A0B;&#x5E8F;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;
&#x4EFB;&#x4F55;&#x5177;&#x4F53;&#x6570;&#x503C;&#x3002;</p>
<p>&#x540C;&#x65F6;&#xFF0C;<code>c=getchar();</code>&#x8BED;&#x53E5;&#x672C;&#x8EAB;&#x5177;&#x6709;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x4E0E;&#x8D4B;&#x503C;&#x8FD0;&#x7B97;&#x540E;&#x8D4B;&#x503C;&#x7B26;&#x53F7;&#x5DE6;&#x8FB9;&#x7684;&#x503C;&#x4E00;&#x81F4;&#xFF0C;&#x8FD9;&#x5C31;&#x5141;&#x8BB8;&#x8FD9;&#x6761;&#x8D4B;&#x503C;&#x8BED;&#x53E5;&#x4F5C;&#x4E3A;&#x66F4;&#x5927;&#x7684;&#x8868;&#x8FBE;&#x5F0F;
&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x6BD4;&#x5982;&#x5C06;&#x8FD9;&#x6761;&#x8D4B;&#x503C;&#x8BED;&#x53E5;&#x4F5C;&#x4E3A;<code>while</code>&#x5FAA;&#x73AF;&#x7684;&#x6D4B;&#x8BD5;&#x6761;&#x4EF6;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-comment">/* copy input to output; 2nd version */</span>
main()
{
    <span class="hljs-keyword">int</span> c;
    <span class="hljs-keyword">while</span> ((c = getchar()) != EOF)
        <span class="hljs-built_in">putchar</span>(c);
}
</code></pre>
<p>&#x7A0B;&#x5E8F;&#x5F97;&#x5230;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7D27;&#x51D1;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x8BFB;&#x6027;&#x66F4;&#x5F3A;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4E5F;&#x66F4;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x3002;</p>
<p>&#x8D4B;&#x503C;&#x8BED;&#x53E5;&#x4E24;&#x4FA7;&#x7684;&#x62EC;&#x53F7;&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;<code>!=</code>&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x4E8E;<code>=</code>&#xFF0C;&#x5173;&#x7CFB;&#x6D4B;&#x8BD5;&#x4F1A;&#x5728;&#x8D4B;&#x503C;&#x4E4B;&#x524D;&#x8FDB;&#x884C;&#x3002;&#x8FD9;&#x6837;&#x4E00;&#x6765;<code>c=getchar()!=EOF</code>
&#x548C;<code>c=(getchar()!=EOF)</code>&#x662F;&#x7B49;&#x4EF7;&#x7684;&#xFF0C;&#x5C06;&#x5BFC;&#x81F4;<code>c</code>&#x7684;&#x503C;&#x4E0D;&#x662F;0&#x5C31;&#x662F;1.</p>
<blockquote>
<p>Exercsise 1-6. Verify that the expression getchar() != EOF is 0 or 1.</p>
</blockquote>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Press a key.ENTER would be nice :-)\n\n&quot;</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The expression \&quot;getchar()!=EOF\&quot; is:%d&quot;</span>,getchar()!=EOF);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>Linux&#x4E0B;&#x4F7F;&#x7528;<code>&lt;Ctrl-D&gt;</code>&#x7ED3;&#x675F;&#x8F93;&#x5165;&#xFF0C;&#x5F53;&#x8F93;&#x5165;&#x6709;&#x6548;&#x5B57;&#x7B26;&#x65F6;&#xFF0C;&#x8868;&#x8FBE;&#x5F0F;&#x503C;&#x4E3A;1&#xFF0C;&#x5426;&#x5219;&#x4E3A;0.</p>
<blockquote>
<p>Exercise 1-7. Write a program to print the value of EOF.</p>
</blockquote>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The value of EOF is %d\n\n&quot;</span>,EOF);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>Linux &#x4E0B;<code>&lt;stdio.h&gt;</code>&#x4E2D;&#x5B9A;&#x4E49;&#x7684;<code>EOF</code>&#x503C;&#x4E3A;-1.</p>
<h2 id="&#x5B57;&#x7B26;&#x7EDF;&#x8BA1;"><a name="&#x5B57;&#x7B26;&#x7EDF;&#x8BA1;" class="plugin-anchor" href="#&#x5B57;&#x7B26;&#x7EDF;&#x8BA1;"><span class="fa fa-link"></span></a>&#x5B57;&#x7B26;&#x7EDF;&#x8BA1;</h2>
<p>&#x7EDF;&#x8BA1;&#x5B57;&#x7B26;&#x4E2A;&#x6570;&#x7684;&#x7A0B;&#x5E8F;&#xFF1A;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/* count characters in input; 1st version */</span>
main()
{
    <span class="hljs-keyword">long</span> nc;

    nc = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (getchar() != EOF)
        ++nc;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%ld\n&quot;</span>, nc);
}
</code></pre>
<p><code>++</code>&#x64CD;&#x4F5C;&#x7B26;&#x8868;&#x793A;&#x81EA;&#x589E;1&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>nc = nc + 1</code>&#xFF0C;&#x4F46;&#x662F;<code>++nc</code>&#x66F4;&#x4E3A;&#x7B80;&#x6D01;&#x548C;&#x9AD8;&#x6548;&#x3002;&#x76F8;&#x5E94;&#x7684;,<code>--</code>&#x5BF9;&#x5E94;&#x81EA;&#x51CF;1&#x3002;
<code>++</code>&#x548C;<code>--</code>&#x653E;&#x5728;&#x53D8;&#x91CF;&#x524D;&#x548C;&#x53D8;&#x91CF;&#x540E;&#x5728;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x503C;&#xFF0C;&#x867D;&#x7136;&#x90FD;&#x5BF9;&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x52A0;1&#x6216;&#x8005;&#x51CF;1&#x3002;</p>
<p><code>long</code>&#x6574;&#x578B;&#x81F3;&#x5C11;&#x662F;32&#x4F4D;&#xFF0C;&#x5BF9;&#x5E94;&#x683C;&#x5F0F;&#x5316;&#x5B57;&#x7B26;<code>%ld</code>&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;<code>long</code>&#x6574;&#x578B;&#x662F;&#x56E0;&#x4E3A;<code>int</code>&#x7C7B;&#x578B;&#x662F;16&#x4F4D;&#xFF0C;&#x6700;&#x5927;&#x53EF;&#x8868;&#x793A;32767&#xFF0C;
&#x8FD9;&#x5728;&#x7EDF;&#x8BA1;&#x65F6;&#x5F88;&#x5BB9;&#x6613;&#x53D1;&#x751F;&#x6EA2;&#x51FA;&#x3002;&#x82E5;&#x8981;&#x7EDF;&#x8BA1;&#x66F4;&#x591A;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;<code>double</code>&#x7C7B;&#x578B;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x91C7;&#x7528;<code>for</code>&#x8BED;&#x53E5;&#x5B9E;&#x73B0;&#x7684;&#x53E6;&#x4E00;&#x4E2A;
&#x5B57;&#x7B26;&#x7EDF;&#x8BA1;&#x7248;&#x672C;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/* count characters in input; 2nd version */</span>
main()
{
    <span class="hljs-keyword">double</span> nc;
    <span class="hljs-keyword">for</span> (nc = <span class="hljs-number">0</span>; getchar() != EOF; ++nc)
        ;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.0f\n&quot;</span>, nc);
}
</code></pre>
<p><code>float</code>&#x548C;<code>double</code>&#x90FD;&#x4F7F;&#x7528;<code>%f</code>&#x6765;&#x8FDB;&#x884C;&#x683C;&#x5F0F;&#x5316;&#xFF0C;<code>%.0f</code>&#x8868;&#x793A;&#x4E0D;&#x8F93;&#x51FA;&#x5C0F;&#x6570;&#x70B9;&#x548C;&#x5C0F;&#x6570;&#x90E8;&#x5206;(&#x5728;&#x7EDF;&#x8BA1;&#x7ED3;&#x679C;&#x4E2D;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;)&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x6240;&#x6709;&#x7684;&#x5DE5;&#x4F5C;&#x5728;&#x6D4B;&#x8BD5;&#x548C;&#x6B65;&#x8FDB;&#x4E2D;&#x5B8C;&#x6210;&#xFF0C;<code>for</code>&#x5FAA;&#x73AF;&#x4F53;&#x4E3A;&#x7A7A;&#xFF0C;&#x4F46;&#x662F;C&#x8BED;&#x6CD5;&#x8981;&#x6C42;<code>for</code>&#x8BED;&#x53E5;&#x9700;&#x8981;&#x6709;&#x5FAA;&#x73AF;&#x4F53;&#xFF0C;&#x6240;&#x4EE5;&#x653E;&#x7F6E;
<strong>&#x7A7A;&#x8BED;&#x53E5;(null statement)</strong>&#x6765;&#x6EE1;&#x8DB3;&#x8BED;&#x6CD5;&#x8981;&#x6C42;&#x3002;&#x653E;&#x5728;&#x5355;&#x72EC;&#x4E00;&#x884C;&#x4EE5;&#x589E;&#x52A0;&#x53EF;&#x8BFB;&#x6027;&#x3002;</p>
<p>&#x5982;&#x679C;&#x88AB;&#x7EDF;&#x8BA1;&#x7684;&#x6587;&#x672C;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x4E0A;&#x9762;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#x90FD;&#x4F1A;&#x8F93;&#x51FA;&#x6B63;&#x786E;&#x7B54;&#x6848;0&#x3002;&#x4ECE;&#x8FD9;&#x4E4B;&#x4E2D;&#x53EF;&#x770B;&#x51FA;<code>while</code>&#x548C;<code>for</code>&#x8BED;&#x53E5;&#x7684;&#x4F18;&#x70B9;&#xFF1A;&#x5728;&#x5FAA;&#x73AF;
&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#x3002;&#x8FD9;&#x786E;&#x4FDD;&#x4E86;&#x7A0B;&#x5E8F;&#x5BF9;&#x4E00;&#x4E9B;&#x5C0F;&#x7684;&#x6270;&#x52A8;(&#x8FB9;&#x754C;&#x6761;&#x4EF6;)&#x4ECD;&#x7136;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x7ED3;&#x679C;&#x6B63;&#x786E;&#x3002;</p>
<h2 id="&#x884C;&#x7EDF;&#x8BA1;"><a name="&#x884C;&#x7EDF;&#x8BA1;" class="plugin-anchor" href="#&#x884C;&#x7EDF;&#x8BA1;"><span class="fa fa-link"></span></a>&#x884C;&#x7EDF;&#x8BA1;</h2>
<p>&#x4E4B;&#x524D;&#x63D0;&#x5230;&#x8FC7;&#xFF0C;&#x6807;&#x51C6;&#x5E93;&#x786E;&#x4FDD;&#x8F93;&#x5165;&#x6587;&#x672C;&#x6D41;&#x662F;&#x884C;&#x5E8F;&#x5217;&#xFF0C;&#x6BCF;&#x4E00;&#x884C;&#x7531;&#x6362;&#x884C;&#x7B26;&#x7ED3;&#x675F;&#xFF0C;&#x6240;&#x4EE5;&#x8FDB;&#x884C;&#x884C;&#x7EDF;&#x8BA1;&#x7B49;&#x6548;&#x4E3A;&#x7EDF;&#x8BA1;&#x65B0;&#x884C;(&#x6362;&#x884C;&#x7B26;)&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-comment">/* count lines in input */</span>

main()
{
    <span class="hljs-keyword">int</span> c, nl;

    nl = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> ((c = getchar()) != EOF)
        <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos;\n&apos;</span>)
            ++nl;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, nl);
}
</code></pre>
<p><code>if</code>&#x8BED;&#x53E5;&#x62EC;&#x53F7;&#x4E4B;&#x5185;&#x6761;&#x4EF6;&#x4E3A;&#x771F;&#x65F6;&#x6267;&#x884C;&#x8BED;&#x53E5;(&#x4E00;&#x884C;&#x6216;&#x662F;&#x7531;<code>{}</code>&#x62EC;&#x8D77;&#x6765;&#x7684;&#x591A;&#x884C;)&#xFF0C;&#x8BBE;&#x7F6E;&#x7F29;&#x8FDB;&#x80FD;&#x589E;&#x52A0;&#x53EF;&#x8BFB;&#x6027;&#x3002;</p>
<p><code>==</code>&#x7684;&#x610F;&#x601D;&#x662F;&quot;&#x7B49;&#x4E8E;&quot;&#xFF0C;&#x7528;&#x4E24;&#x4E2A;&quot;=&quot;&#x6765;&#x548C;&#x8D4B;&#x503C;&#x7B26;<code>=</code>&#x52A0;&#x4EE5;&#x533A;&#x5206;&#x3002;&#x6DF7;&#x6DC6;&#x4E24;&#x8005;&#x5F80;&#x5F80;&#x4F1A;&#x51FA;&#x9519;&#xFF0C;&#x4F46;&#x662F;&#x7F16;&#x8BD1;&#x5668;&#x4E0D;&#x4F1A;&#x63D0;&#x9192;&#x3002;</p>
<p>&#x5355;&#x5F15;&#x53F7;<code>&apos;</code>&#x62EC;&#x8D77;&#x6765;&#x7684;&#x5B57;&#x7B26;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x6574;&#x578B;&#x503C;&#xFF0C;&#x7B49;&#x4E8E;&#x673A;&#x5668;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x7D22;&#x5F15;&#x503C;&#xFF0C;&#x79F0;&#x4E3A;<strong>&#x5B57;&#x7B26;&#x5E38;&#x91CF;(character constant)</strong>&#x3002;
&#x5982;&#x5B57;&#x7B26;&apos;A&apos;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x5E38;&#x91CF;&#xFF0C;&#x5728;<em>ASCII&#x5B57;&#x7B26;&#x96C6;</em>&#x4E2D;&#x7684;&#x503C;&#x4E3A;65&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x5B57;&#x7B26;&apos;A&apos;&#x7684;&#x5185;&#x90E8;&#x8868;&#x793A;&#x65B9;&#x6CD5;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4F7F;&#x7528;&apos;A&apos;&#x6BD4;&#x4F7F;&#x7528;65
&#x8981;&#x597D;&#xFF0C;&#x56E0;&#x4E3A;&#x663E;&#x5F0F;&#x542B;&#x4E49;&#xFF0C;&#x5E76;&#x4E14;&#x72EC;&#x7ACB;&#x4E8E;&#x5B57;&#x7B26;&#x96C6;&#x3002;</p>
<p>&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x4E2D;&#x7684;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#x4ECD;&#x7136;&#x662F;&#x5408;&#x6CD5;&#x7684;&#x5B57;&#x7B26;&#x5E38;&#x91CF;&#xFF0C;&apos;\n&apos;&#x8868;&#x793A;&#x6362;&#x884C;&#x7B26;&#xFF0C;&#x5728;ASCII&#x4E2D;&#x7684;&#x503C;&#x4E3A;10&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;<code>\n</code>&#x4EC5;&#x4EC5;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x3002;</p>
<blockquote>
<p>Exercise 1-8. Write a program to count blanks, tabs, and newlines.</p>
</blockquote>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> blanks,tabs,newlines;
    <span class="hljs-keyword">int</span> c;
    <span class="hljs-keyword">int</span> done = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> lastchar = <span class="hljs-number">0</span>;

    blanks = <span class="hljs-number">0</span>;
    tabs = <span class="hljs-number">0</span>;
    newlines = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span>(done == <span class="hljs-number">0</span>)
    {
        c = getchar();

        <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos; &apos;</span>)
            ++blanks;

        <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos;\t&apos;</span>)
            ++tabs;

        <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos;\n&apos;</span>)
            ++newlines;

        <span class="hljs-keyword">if</span>(c == EOF)
        {
            <span class="hljs-keyword">if</span>(lastchar != <span class="hljs-string">&apos;\n&apos;</span>)
            {
                ++newlines;
            }
            done = <span class="hljs-number">1</span>;
        }

        lastchar = c;
    }

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Blanks:%d\nTabs:%d\nNewlines:%d\n&quot;</span>,blanks,tabs,newlines);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x5728;&#x5224;&#x65AD;<code>EOF</code>&#x65F6;&#x6D4B;&#x8BD5;<code>EOF</code>&#x4E4B;&#x524D;&#x7684;&#x5B57;&#x7B26;&#x662F;&#x4E3A;&#x4E86;&#x5904;&#x7406;&#x67D0;&#x4E9B;&#x4E0D;&#x4EE5;&#x6362;&#x884C;&#x7B26;&#x7ED3;&#x675F;&#x7684;&#x6587;&#x4EF6;&#x3002;</p>
<blockquote>
<p>Exercise 1-9. Write a program to copy its input to its output, replacing each string of one or more blanks by a single blank.</p>
</blockquote>
<p>&#x65B9;&#x6CD5;&#x4E00;&#xFF1A;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;<code>inspace</code>&#x53D8;&#x91CF;&#x6765;&#x6807;&#x5FD7;&#x5F53;&#x524D;&#x5904;&#x7406;&#x7684;&#x5B57;&#x7B26;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#x683C;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
  <span class="hljs-keyword">int</span> c;
  <span class="hljs-keyword">int</span> inspace;
  inspace = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">while</span>((c = getchar()) != EOF)
  {
    <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos; &apos;</span>)
    {
      <span class="hljs-keyword">if</span>(inspace == <span class="hljs-number">0</span>)
      {
        inspace = <span class="hljs-number">1</span>;
        <span class="hljs-built_in">putchar</span>(c);
      }
    }
    <span class="hljs-comment">/* We haven&apos;t met &apos;else&apos; yet, so we have to be a little clumsy */</span>
    <span class="hljs-keyword">if</span>(c != <span class="hljs-string">&apos; &apos;</span>)
    {
      inspace = <span class="hljs-number">0</span>;
      <span class="hljs-built_in">putchar</span>(c);
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x65B9;&#x6CD5;&#x4E8C;&#xFF1A;&#x8BB0;&#x5F55;&#x4E4B;&#x524D;&#x7684;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8F93;&#x51FA;&#x5F53;&#x524D;&#x7A7A;&#x683C;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/* count lines in input */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
        <span class="hljs-keyword">int</span> c, pc; <span class="hljs-comment">/* c = character, pc = previous character */</span>

        <span class="hljs-comment">/* set pc to a value that wouldn&apos;t match any character, in case
        this program is ever modified to get rid of multiples of other
        characters */</span>

        pc = EOF;

        <span class="hljs-keyword">while</span> ((c = getchar()) != EOF) {
                <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos; &apos;</span>)
                        <span class="hljs-keyword">if</span> (pc != <span class="hljs-string">&apos; &apos;</span>)   <span class="hljs-comment">/* or if (pc != c) */</span>
                                <span class="hljs-built_in">putchar</span>(c);

                <span class="hljs-comment">/* We haven&apos;t met &apos;else&apos; yet, so we have to be a little clumsy */</span>
                <span class="hljs-keyword">if</span> (c != <span class="hljs-string">&apos; &apos;</span>)
                        <span class="hljs-built_in">putchar</span>(c);
                pc = c;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x65B9;&#x6CD5;&#x4E09;&#xFF1A;&#x5F53;&#x51FA;&#x73B0;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#x540E;&#xFF0C;&#x5C31;&#x628A;&#x4E4B;&#x540E;&#x53EF;&#x80FD;&#x7D27;&#x63A5;&#x7740;&#x51FA;&#x73B0;&#x7684;&#x7A7A;&#x683C;&#x5168;&#x90E8;&#x8DF3;&#x8FC7;&#x3002;&#x6CE8;&#x610F;&#x4E3A;&#x4EC0;&#x4E48;&#x4F7F;&#x7528;<code>break</code>
&#x90A3;&#x91CC;&#x8FD8;&#x9700;&#x8981;&#x5224;&#x5B9A;&#x662F;&#x5426;&#x4E3A;<code>EOF</code>.</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> c;

    <span class="hljs-keyword">while</span>((c=getchar())!=EOF)
    {
        <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&apos; &apos;</span>)
        {
            <span class="hljs-built_in">putchar</span>(c);
            <span class="hljs-keyword">while</span>((c=getchar())==<span class="hljs-string">&apos; &apos;</span>&amp;&amp;c!=EOF)
            ;
        }
        <span class="hljs-keyword">if</span>(c==EOF)
            <span class="hljs-keyword">break</span>;
        <span class="hljs-built_in">putchar</span>(c);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<blockquote>
<p>Exercise 1-10. Write a program to copy its input to its output, replacing each tab by \t, each
  backspace by \b, and each backslash by \. This makes tabs and backspaces visible in an
  unambiguous way.</p>
</blockquote>
<p>&#x65B9;&#x6CD5;&#x4E00;&#xFF1A;&#x53D8;&#x91CF;<code>d</code>&#x7528;&#x6765;&#x6807;&#x5FD7;&#x662F;&#x5426;&#x51FA;&#x73B0;&#x4E86;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x4E09;&#x79CD;&#x7B26;&#x53F7;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x5219;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x5E76;&#x5C06;<code>d</code>&#x7F6E;1&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> c,d;

    <span class="hljs-keyword">while</span>((c=getchar())!=EOF)
    {
        d=<span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&apos;\\&apos;</span>){
            <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\\&apos;</span>);
            <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\\&apos;</span>);
            d=<span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&apos;\t&apos;</span>){
            <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\\&apos;</span>);
            <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;t&apos;</span>);
            d=<span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&apos;\b&apos;</span>){
            <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\\&apos;</span>);
            <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;b&apos;</span>);
            d=<span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">if</span>(d==<span class="hljs-number">0</span>)
            <span class="hljs-built_in">putchar</span>(c);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x65B9;&#x6CD5;&#x4E8C;&#xFF1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x5E38;&#x91CF;<code>ESC_CHAR</code>&#x6765;&#x8BC6;&#x522B;&#x53CD;&#x659C;&#x6760;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> ESC_CHAR <span class="hljs-string">&apos;\\&apos;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
  <span class="hljs-keyword">int</span> c;

  <span class="hljs-keyword">while</span>((c = getchar()) != EOF)
  {
    <span class="hljs-keyword">switch</span>(c)
    {
      <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;\b&apos;</span>:
        <span class="hljs-built_in">putchar</span>(ESC_CHAR);
        <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;b&apos;</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;\t&apos;</span>:
        <span class="hljs-built_in">putchar</span>(ESC_CHAR);
        <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;t&apos;</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> ESC_CHAR:
        <span class="hljs-built_in">putchar</span>(ESC_CHAR);
        <span class="hljs-built_in">putchar</span>(ESC_CHAR);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-built_in">putchar</span>(c);
        <span class="hljs-keyword">break</span>;
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 id="&#x5355;&#x8BCD;&#x7EDF;&#x8BA1;"><a name="&#x5355;&#x8BCD;&#x7EDF;&#x8BA1;" class="plugin-anchor" href="#&#x5355;&#x8BCD;&#x7EDF;&#x8BA1;"><span class="fa fa-link"></span></a>&#x5355;&#x8BCD;&#x7EDF;&#x8BA1;</h2>
<p>&#x5B9A;&#x4E49;&quot;&#x5355;&#x8BCD;&quot;&#x4E3A;&#x4E0D;&#x5305;&#x542B;&#x7A7A;&#x683C;&#xFF0C;&#x5236;&#x8868;&#x7B26;&#x6216;&#x662F;&#x6362;&#x884C;&#x7B26;&#x7684;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x3002;&#x5355;&#x8BCD;&#x7EDF;&#x8BA1;&#x548C;UNIX&#x7CFB;&#x7EDF;&#x7A0B;&#x5E8F;<code>wc</code>&#x7C7B;&#x4F3C;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> IN <span class="hljs-number">1</span>    <span class="hljs-comment">/* inside a word */</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> OUT <span class="hljs-number">0</span>    <span class="hljs-comment">/* outside a word */</span></span>

<span class="hljs-comment">/* count lines, words, and characters in input */</span>
main()
{
    <span class="hljs-keyword">int</span> c, nl, nw, nc, state;

    state = OUT;
    nl = nw = nc = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> ((c = getchar()) != EOF) {
        ++nc;
        <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos;\n&apos;</span>)
            ++nl;
        <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos; &apos;</span> || c == <span class="hljs-string">&apos;\n&apos;</span> || c == <span class="hljs-string">&apos;\t&apos;</span>)
            state = OUT;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (state == OUT) {
            state = IN;
            ++nw;
        }
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d %d %d\n&quot;</span>, nl, nw, nc);
}
</code></pre>
<p>&#x6BCF;&#x6B21;&#x7A0B;&#x5E8F;&#x5904;&#x7406;&#x5230;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x7684;&#x5F00;&#x5934;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x5C06;&#x5355;&#x8BCD;&#x8BA1;&#x6570;&#x52A0;1&#xFF0C;<code>state</code>&#x53D8;&#x91CF;&#x914D;&#x5408;&#x7B26;&#x53F7;&#x5E38;&#x91CF;<code>IN</code>&#x548C;<code>OUT</code>&#x7528;&#x6765;&#x8BB0;&#x5F55;&#x5F53;&#x524D;&#x5904;&#x7406;&#x7684;&#x5B57;&#x7B26;&#x662F;&#x5426;&#x5728;&#x4E00;
&#x4E2A;&#x5355;&#x8BCD;&#x5185;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x8BBE;&#x7F6E;&#x4E3A;<code>OUT</code>&#x3002;&#x4F7F;&#x7528;<code>IN</code>&#x548C;<code>OUT</code>&#x800C;&#x4E0D;&#x662F;<code>1</code>&#x548C;<code>0</code>&#xFF0C;K&amp;R&#x8BF4;&#x660E;&#x5982;&#x4E0B;&#x3002;</p>
<blockquote>
<p>In a program as tiny as this, it makes little difference, but in larger programs, the increase in clarity is well worth the
modest extra effort to write it this way from the beginning.</p>
</blockquote>
<p><code>nl = nw = nc = 0;</code>&#x8FD9;&#x6761;&#x8BED;&#x53E5;&#x57FA;&#x4E8E;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x4E8B;&#x5B9E;&#xFF0C;&#x5373;C&#x7684;&#x8D4B;&#x503C;&#x8BED;&#x53E5;&#x4ECE;&#x53F3;&#x5230;&#x5DE6;&#x8FDB;&#x884C;&#xFF0C;&#x5219;&#x8FD9;&#x6761;&#x8BED;&#x53E5;&#x548C;<code>nl = (nw = (nc = 0));</code>&#x662F;&#x7B49;&#x6548;&#x7684;&#x3002;</p>
<p><code>||</code>&#x662F;<strong>&#x903B;&#x8F91;&#x6216;</strong>&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x76F8;&#x5E94;&#x7684;<code>&amp;&amp;</code>&#x8868;&#x793A;<strong>&#x903B;&#x8F91;&#x4E0E;</strong>&#x64CD;&#x4F5C;&#x7B26;(&#x4F18;&#x5148;&#x7EA7;&#x6BD4;<code>||</code>&#x9AD8;)&#x3002;&#x903B;&#x8F91;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x503C;&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#x8BA1;&#x7B97;&#xFF0C;&#x5E76;&#x4E14;&#x4E00;&#x65E6;&#x786E;&#x5B9A;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x503C;
&#x4E4B;&#x540E;&#x5C31;&#x4E0D;&#x518D;&#x8FDB;&#x884C;&#x8FD0;&#x7B97;(&#x77ED;&#x8DEF;&#x8FD0;&#x7B97;)&#xFF0C;&#x8FD9;&#x5728;&#x5F88;&#x591A;&#x590D;&#x6742;&#x573A;&#x5408;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x3002;</p>
<p><code>else</code>&#x7528;&#x6765;&#x5904;&#x7406;<code>if</code>&#x540E;&#x9762;&#x7684;&#x6761;&#x4EF6;&#x4E0D;&#x6EE1;&#x8DB3;&#x65F6;(&#x8FD8;&#x6709;&#x5269;&#x4E0B;&#x7684;&#x8BB8;&#x591A;&#x53EF;&#x80FD;)&#x7684;&#x573A;&#x5408;&#xFF0C;&#x4E0D;&#x96BE;&#x60F3;&#x5230;&#x8FD9;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#x4E00;&#x6B21;&#x53EA;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x3002;</p>
<blockquote>
<p>Exercise 1-11. How would you test the word count program? What kinds of input are most
likely to uncover bugs if there are any?</p>
</blockquote>
<p>&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;(&#x6709;&#x70B9;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;&#x601D;&#x60F3;)&#xFF1A;</p>
<ul>
<li>&#x5305;&#x542B;0&#x4E2A;&#x5355;&#x8BCD;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6;</li>
<li>&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x957F;&#x7684;&#x5355;&#x8BCD;&#x800C;&#x4E0D;&#x6362;&#x884C;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6;</li>
<li>&#x5305;&#x542B;&#x6240;&#x6709;&#x7A7A;&#x767D;&#x7B26;(&#x2018;\f&#x2019;,&apos;\t&apos;,&apos;\v&apos;)&#x800C;&#x6CA1;&#x6709;&#x6362;&#x884C;&#x7B26;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6;</li>
<li>&#x5305;&#x542B;66000&#x4E2A;&#x6362;&#x884C;&#x7B26;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6;(&#x6CE8;&#x610F;<code>unsigned int</code>&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x7684;&#x6574;&#x6570;&#x8303;&#x56F4;)</li>
<li>&#x5728;&#x5355;&#x8BCD;&#x4E4B;&#x95F4;&#x8BBE;&#x7F6E;&#x5927;&#x91CF;&#x7684;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#x5E8F;&#x5217;</li>
<li>&#x5305;&#x542B;66000&#x4E2A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x7684;&#x5355;&#x8BCD;&#xFF0C;&#x6BCF;&#x884C;66&#x4E2A;</li>
<li>&#x5305;&#x542B;66000&#x4E2A;&#x5355;&#x8BCD;&#xFF0C;&#x6CA1;&#x6709;&#x6362;&#x884C;</li>
<li>&#x91C7;&#x7528;<code>/usr/dict</code>&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;(&#x5728;ubuntu&#x4E2D;&#x4E3A;<code>/usr/share/dict/words</code>)</li>
<li>&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x5305;&#x542B;&#x5927;&#x91CF;&#x7684;&#x957F;&#x5355;&#x8BCD;</li>
<li>&#x5C06;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;(&#x4E8C;&#x8FDB;&#x5236;)&#x4F5C;&#x4E3A;&#x8F93;&#x5165;</li>
<li>&#x5C06;<code>dev/null</code>&#x4F5C;&#x4E3A;&#x8F93;&#x5165;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x662F;&#x7528;&#x6765;&#x4EA7;&#x751F;&#x7B26;&#x5408;&#x524D;7&#x6761;&#x6D4B;&#x8BD5;&#x89C4;&#x5219;&#x7684;&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x7684;&#x7A0B;&#x5E8F;&#xFF1A;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;assert.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    FILE *f;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> i;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> *ws = <span class="hljs-string">&quot; \f\t\v&quot;</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> *al = <span class="hljs-string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> *i5 = <span class="hljs-string">&quot;a b c d e f g h i j k l m &quot;</span>
                      <span class="hljs-string">&quot;n o p q r s t u v w x y z &quot;</span>
                      <span class="hljs-string">&quot;a b c d e f g h i j k l m &quot;</span>
                      <span class="hljs-string">&quot;n o p q r s t u v w x y z &quot;</span>
                      <span class="hljs-string">&quot;a b c d e f g h i j k l m &quot;</span>
                      <span class="hljs-string">&quot;n\n&quot;</span>;

    <span class="hljs-comment">/* &#x751F;&#x6210;&#x5982;&#x4E0B;&#x89C4;&#x5219;: */</span>
    <span class="hljs-comment">/* &#x5305;&#x542B;0&#x4E2A;&#x5355;&#x8BCD;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6; */</span>
    f = fopen(<span class="hljs-string">&quot;test0&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>);
    assert(f != <span class="hljs-literal">NULL</span>);
    fclose(f);

    <span class="hljs-comment">/* &#x5305;&#x542B;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x957F;&#x7684;&#x5355;&#x8BCD;&#x800C;&#x4E0D;&#x6362;&#x884C;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6; */</span>
    f = fopen(<span class="hljs-string">&quot;test1&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>);
    assert(f != <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ((<span class="hljs-number">66000u</span>l / <span class="hljs-number">26</span>) + <span class="hljs-number">1</span>); i++)
    <span class="hljs-built_in">fputs</span>(al, f);
    fclose(f);

    <span class="hljs-comment">/* &#x5305;&#x542B;&#x6240;&#x6709;&#x7A7A;&#x767D;&#x7B26;&#x800C;&#x6CA1;&#x6709;&#x6362;&#x884C;&#x7B26;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6; */</span>
    f = fopen(<span class="hljs-string">&quot;test2&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>);
    assert(f != <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ((<span class="hljs-number">66000u</span>l / <span class="hljs-number">4</span>) + <span class="hljs-number">1</span>); i++)
    <span class="hljs-built_in">fputs</span>(ws, f);
    fclose(f);

    <span class="hljs-comment">/* &#x5305;&#x542B;66000&#x4E2A;&#x6362;&#x884C;&#x7B26;&#x7684;&#x8F93;&#x5165;&#x6587;&#x4EF6; */</span>
    f = fopen(<span class="hljs-string">&quot;test3&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>);
    assert(f != <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">66000</span>; i++)
    fputc(<span class="hljs-string">&apos;\n&apos;</span>, f);
    fclose(f);

    <span class="hljs-comment">/* &#x5728;&#x5355;&#x8BCD;&#x4E4B;&#x95F4;&#x8BBE;&#x7F6E;&#x5927;&#x91CF;&#x7684;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#x5E8F;&#x5217; */</span>
    f = fopen(<span class="hljs-string">&quot;test4&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>);
    assert(f != <span class="hljs-literal">NULL</span>);
    <span class="hljs-built_in">fputs</span>(<span class="hljs-string">&quot;word&quot;</span>, f);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ((<span class="hljs-number">66000u</span>l / <span class="hljs-number">26</span>) + <span class="hljs-number">1</span>); i++)
    <span class="hljs-built_in">fputs</span>(ws, f);
    <span class="hljs-built_in">fputs</span>(<span class="hljs-string">&quot;word&quot;</span>, f);
    fclose(f);

    <span class="hljs-comment">/* &#x5305;&#x542B;66000&#x4E2A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x7684;&#x5355;&#x8BCD;&#xFF0C;&#x6BCF;&#x884C;66&#x4E2A; */</span>
    f = fopen(<span class="hljs-string">&quot;test5&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>);
    assert(f != <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++)
    <span class="hljs-built_in">fputs</span>(i5, f);
    fclose(f);

    <span class="hljs-comment">/* &#x5305;&#x542B;66000&#x4E2A;&#x5355;&#x8BCD;&#xFF0C;&#x6CA1;&#x6709;&#x6362;&#x884C; */</span>
    f = fopen(<span class="hljs-string">&quot;test6&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>);
    assert(f != <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">66000</span>; i++)
    <span class="hljs-built_in">fputs</span>(<span class="hljs-string">&quot;word &quot;</span>, f);
    fclose(f);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<blockquote>
<p>Exercise 1-12. Write a program that prints its input one word per line.</p>
</blockquote>
<p>&#x540C;&#x6837;&#x4F7F;&#x7528;<code>inspace</code>&#x6765;&#x6807;&#x8BC6;&#x5F53;&#x524D;&#x5904;&#x7406;&#x7684;&#x5B57;&#x7B26;&#x662F;&#x5426;&#x5728;&#x5355;&#x8BCD;&#x4E4B;&#x95F4;&#xFF0C;&#x5728;&#x5FC5;&#x8981;&#x7684;&#x65F6;&#x5019;&#x6362;&#x884C;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> c;
    <span class="hljs-keyword">int</span> inspace=<span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span>((c=getchar())!=EOF)
    {
        <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&apos; &apos;</span>||c==<span class="hljs-string">&apos;\t&apos;</span>||c==<span class="hljs-string">&apos;\n&apos;</span>)
        {
            <span class="hljs-keyword">if</span>(inspace==<span class="hljs-number">0</span>)
            {
                inspace=<span class="hljs-number">1</span>;
                <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\n&apos;</span>);
            }
        }
        <span class="hljs-keyword">else</span>
        {
            inspace=<span class="hljs-number">0</span>;
            <span class="hljs-built_in">putchar</span>(c);
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h1 id="&#x6570;&#x7EC4;"><a name="&#x6570;&#x7EC4;" class="plugin-anchor" href="#&#x6570;&#x7EC4;"><span class="fa fa-link"></span></a>&#x6570;&#x7EC4;</h1>
<p>&#x5982;&#x679C;&#x8981;&#x7528;&#x7A0B;&#x5E8F;&#x6765;&#x7EDF;&#x8BA1;&#x6570;&#x5B57;(0-9)&#xFF0C;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x5B57;&#x7B26;&#x7684;&#x51FA;&#x73B0;&#x6B21;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x6765;&#x8BB0;&#x5F55;&#x7ED3;&#x679C;&#x8981;&#x6BD4;&#x91C7;&#x7528;10&#x4E2A;&#x53D8;&#x91CF;&#x6765;&#x8BB0;&#x5F55;10&#x4E2A;&#x6570;&#x5B57;&#x8981;&#x597D;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">/* count digits, white space, others */</span>
main()
{
    <span class="hljs-keyword">int</span> c, i, nwhite, nother;
    <span class="hljs-keyword">int</span> ndigit[<span class="hljs-number">10</span>];

    nwhite = nother = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i)
        ndigit[i] = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span> ((c = getchar()) != EOF)
        <span class="hljs-keyword">if</span> (c &gt;= <span class="hljs-string">&apos;0&apos;</span> &amp;&amp; c &lt;= <span class="hljs-string">&apos;9&apos;</span>)
            ++ndigit[c-<span class="hljs-string">&apos;0&apos;</span>];
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos; &apos;</span> || c == <span class="hljs-string">&apos;\n&apos;</span> || c == <span class="hljs-string">&apos;\t&apos;</span>)
            ++nwhite;
        <span class="hljs-keyword">else</span>
            ++nother;

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;digits =&quot;</span>);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i)
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; %d&quot;</span>, ndigit[i]);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;, white space = %d, other = %d\n&quot;</span>,
        nwhite, nother);
}
</code></pre>
<p><code>int ndigit[10];</code>&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x5B58;&#x653E;10&#x4E2A;&#x6574;&#x6570;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x4ECE;0&#x5F00;&#x59CB;&#xFF0C;&#x6240;&#x4EE5;10&#x4E2A;&#x5143;&#x7D20;&#x4E3A;<code>ndigit[0]</code>,<code>ndigit[1]</code>,...,<code>ndigit[9]</code>&#xFF0C;
&#x4ECE;for&#x8BED;&#x53E5;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x8FD9;&#x79CD;&#x89C4;&#x5B9A;&#x3002;&#x6570;&#x7EC4;&#x7684;&#x7D22;&#x5F15;&#x503C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4EFB;&#x4F55;&#x6574;&#x578B;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</p>
<p><code>if (c &gt;= &apos;0&apos; &amp;&amp; c &lt;= &apos;9&apos;)</code>&#x7528;&#x6765;&#x6D4B;&#x8BD5;<code>c</code>&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x5982;&#x679C;&#x662F;&#xFF0C;&#x5219;&#x5176;&#x5B9E;&#x9645;&#x6570;&#x503C;&#x4E3A;<code>c - &apos;0&apos;</code>&#xFF0C;&#x8FD9;&#x4F9D;&#x8D56;&#x4E8E;&#x6240;&#x91C7;&#x7528;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x5185;&#x6570;&#x5B57;&#x7684;&#x7F16;&#x7801;
&#x662F;&#x8FDE;&#x7EED;&#x7684;&#xFF0C;&#x6240;&#x5E78;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x90FD;&#x662F;&#x8FD9;&#x6837;&#x7ED9;&#x6570;&#x5B57;&#x7F16;&#x7801;&#x7684;&#x3002;</p>
<p>&#x7A0B;&#x5E8F;&#x5904;&#x7406;&#x5176;&#x4ED6;&#x60C5;&#x51B5;(&#x4E0D;&#x662F;&#x6570;&#x5B57;)&#x65F6;&#x5F15;&#x5165;&#x4E86;<code>else if</code>&#xFF0C;&#x8FD9;&#x6837;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5904;&#x7406;&#x591A;&#x5206;&#x652F;&#x6761;&#x4EF6;&#x7684;&#x673A;&#x5236;(<code>switch</code>&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5904;&#x7406;)&#x3002;&#x5206;&#x652F;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;&#x8FDB;&#x884C;
&#x5224;&#x65AD;&#x76F4;&#x5230;&#x67D0;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x6761;&#x4EF6;&#x6EE1;&#x8DB3;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x5BF9;&#x5E94;&#x5206;&#x652F;&#x7684;&#x8BED;&#x53E5;&#x3002;</p>
<p>&#x5728;&#x591A;&#x5206;&#x652F;&#x751A;&#x81F3;&#x5B58;&#x5728;&#x5206;&#x652F;&#x5D4C;&#x5957;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E25;&#x683C;&#x4F7F;&#x7528;&#x7F29;&#x8FDB;&#x662F;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x7F16;&#x7801;&#x98CE;&#x683C;&#x3002;</p>
<blockquote>
<p>Exercise 1-13. Write a program to print a histogram of the lengths of words in its input. It is
easy to draw the histogram with the bars horizontal; a vertical orientation is more challenging.</p>
</blockquote>
<p>&#x7528;&#x5782;&#x76F4;&#x76F4;&#x65B9;&#x56FE;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x7684;&#x7A0B;&#x5E8F;&#x5982;&#x4E0B;&#x3002;&#x7406;&#x89E3;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x6709;&#x51E0;&#x4E2A;&#x96BE;&#x70B9;&#x3002;&#x5176;&#x4E00;&#x662F;&#x5404;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x7528;&#x9014;&#xFF0C;&#x5728;&#x6CE8;&#x91CA;&#x4E2D;&#x6807;&#x51FA;&#x3002;&#x5176;&#x4E8C;
&#x662F;<code>inspace</code>&#x548C;<code>firstletter</code>&#x8FD9;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x5C06;<code>firstletter</code>&#x521D;&#x59CB;&#x5316;&#x4E3A;1&#x7684;&#x76EE;&#x7684;&#x662F;&#x63A7;&#x5236;&#x8F93;&#x5165;&#x5F00;&#x5934;&#x65F6;&#x6A21;&#x62DF;&#x4E3A;&#x521A;&#x5904;&#x7406;
&#x5B8C;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#xFF0C;&#x5728;&#x7A0B;&#x5E8F;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x5C06;&#x5176;&#x7F6E;0&#x3002;&#x5176;&#x4E09;&#x662F;&#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;&#x5782;&#x76F4;&#x76F4;&#x65B9;&#x56FE;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E4B;&#x6240;&#x4EE5;&#x8BB0;&#x5F55;<code>maxval</code>&#x4E5F;&#x662F;&#x4E3A;&#x8F93;&#x51FA;
&#x76F4;&#x65B9;&#x56FE;&#x670D;&#x52A1;&#x7684;&#x3002;&#x7279;&#x522B;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x53D8;&#x91CF;&#x521D;&#x59CB;&#x5316;&#x662F;&#x4E0D;&#x80FD;&#x5077;&#x61D2;&#x7684;&#xFF0C;&#x6BD4;&#x5982;<code>maxval</code>&#xFF0C;&#x56E0;&#x4E3A;&#x5355;&#x8BCD;&#x957F;&#x5EA6;&#x5927;&#x4E8E;&#x96F6;&#x624D;&#x4F1A;&#x88AB;&#x7EDF;&#x8BA1;&#xFF0C;&#x6240;&#x4EE5;
&#x521D;&#x59CB;&#x5316;&#x5176;&#x4E3A;0&#x662F;&#x5408;&#x7406;&#x7684;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXLEN <span class="hljs-number">10</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> c;
    <span class="hljs-keyword">int</span> inspace = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> firstletter = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">int</span> wordlen = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> maxval = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> thisval = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> thisindex;
    <span class="hljs-keyword">int</span> lengtharr[MAXLEN+<span class="hljs-number">1</span>];
    <span class="hljs-keyword">int</span> done=<span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span>(thisindex=<span class="hljs-number">0</span>;thisindex&lt;=MAXLEN;thisindex++)
    {
        lengtharr[thisindex]=<span class="hljs-number">0</span>;
    }

    <span class="hljs-keyword">while</span>(!done)
    {
        c=getchar();
        <span class="hljs-keyword">if</span>(c==<span class="hljs-string">&apos; &apos;</span>||c==<span class="hljs-string">&apos;\t&apos;</span>||c==<span class="hljs-string">&apos;\n&apos;</span>||c==EOF)
        {
            <span class="hljs-keyword">if</span>(inspace==<span class="hljs-number">0</span>)
            {
                firstletter=<span class="hljs-number">0</span>;
                inspace=<span class="hljs-number">1</span>;

                <span class="hljs-keyword">if</span>(wordlen&lt;=MAXLEN)
                {
                    <span class="hljs-keyword">if</span>(wordlen&gt;<span class="hljs-number">0</span>)
                    {
                        thisval = ++lengtharr[wordlen-<span class="hljs-number">1</span>];
                        <span class="hljs-keyword">if</span>(thisval&gt;maxval)
                        {
                            maxval=thisval;
                        }
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    thisval=++lengtharr[MAXLEN];
                    <span class="hljs-keyword">if</span>(thisval&gt;maxval)
                    {
                        maxval=thisval;
                    }
                }
            }
            <span class="hljs-keyword">if</span>(c==EOF)
            {
                done=<span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-keyword">if</span>(inspace==<span class="hljs-number">1</span>||firstletter==<span class="hljs-number">1</span>)
            {
                wordlen=<span class="hljs-number">0</span>;
                firstletter=<span class="hljs-number">0</span>;
                inspace=<span class="hljs-number">0</span>;
            }
            ++wordlen;
        }
    }

    <span class="hljs-keyword">for</span>(thisval=maxval;thisval&gt;<span class="hljs-number">0</span>;thisval--)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%4d|&quot;</span>,thisval);
        <span class="hljs-keyword">for</span>(thisindex=<span class="hljs-number">0</span>;thisindex&lt;=MAXLEN;thisindex++)
        {
            <span class="hljs-keyword">if</span>(lengtharr[thisindex]&gt;=thisval)
            {
                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   *&quot;</span>);
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;    &quot;</span>);
            }
        }
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;    +&quot;</span>);
    <span class="hljs-keyword">for</span>(thisindex=<span class="hljs-number">0</span>;thisindex&lt;=MAXLEN;thisindex++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;----&quot;</span>);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n     &quot;</span>);
    <span class="hljs-keyword">for</span>(thisindex=<span class="hljs-number">0</span>;thisindex&lt;MAXLEN;thisindex++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%4d&quot;</span>,thisindex+<span class="hljs-number">1</span>);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;  &gt;%d\n&quot;</span>,MAXLEN);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<blockquote>
<p>Exercise 1-14. Write a program to print a histogram of the frequencies of different characters
in its input.</p>
</blockquote>
<p>&#x7531;&#x4E8E;&#x5B57;&#x7B26;&#x96C6;&#x5185;&#x7684;&#x5B57;&#x7B26;&#x5E76;&#x4E0D;&#x662F;&#x90FD;&#x53EF;&#x89C1;&#xFF0C;&#x6240;&#x4EE5;&#x8F93;&#x51FA;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#x662F;&#x91C7;&#x7528;&#x5176;ASCII&#x7801;&#x6765;&#x6807;&#x6CE8;&#x662F;&#x6BD4;&#x8F83;&#x5408;&#x7406;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> NUM_CHARS <span class="hljs-number">256</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> c;
    <span class="hljs-keyword">long</span> freqarr[NUM_CHARS+<span class="hljs-number">1</span>];        <span class="hljs-comment">/* &#x8BB0;&#x5F55;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F; */</span>

    <span class="hljs-keyword">long</span> thisval=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">long</span> maxval=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> thisidx=<span class="hljs-number">0</span>;

    <span class="hljs-comment">/* &#x521D;&#x59CB;&#x5316;&#x7EDF;&#x8BA1;&#x7ED3;&#x679C; */</span>
    <span class="hljs-keyword">for</span>(thisidx=<span class="hljs-number">0</span>;thisidx&lt;=NUM_CHARS;thisidx++)
    {
        freqarr[thisidx]=<span class="hljs-number">0</span>;
    }

    <span class="hljs-keyword">while</span>((c=getchar())!=EOF)
    {
        <span class="hljs-keyword">if</span>(c&lt;NUM_CHARS)  <span class="hljs-comment">/* &#x5B57;&#x7B26;&#x503C;&#x5C0F;&#x4E8E;256 */</span>
        {
            thisval=++freqarr[c];
            <span class="hljs-keyword">if</span>(thisval&gt;maxval)
            {
                maxval=thisval;
            }
        }
        <span class="hljs-keyword">else</span>    <span class="hljs-comment">/*&#x5B57;&#x7B26;&#x503C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;256 */</span>
        {
            thisval=++freqarr[NUM_CHARS];
            <span class="hljs-keyword">if</span>(thisval&gt;maxval)
            {
                maxval=thisval;
            }
        }
    }

    <span class="hljs-comment">/* &#x683C;&#x5F0F;&#x5316;&#x8F93;&#x51FA;&#x7ED3;&#x679C; */</span>
    <span class="hljs-keyword">for</span>(thisval=maxval;thisval&gt;<span class="hljs-number">0</span>;thisval--)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%4ld |&quot;</span>,thisval);
        <span class="hljs-keyword">for</span>(thisidx=<span class="hljs-number">0</span>;thisidx&lt;NUM_CHARS;thisidx++)
        {
            <span class="hljs-keyword">if</span>(freqarr[thisidx]&gt;=thisval)
            {
                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;*&quot;</span>);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(freqarr[thisidx]&gt;<span class="hljs-number">0</span>)
            {
                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; &quot;</span>);
            }
        }
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;     +&quot;</span>);
    <span class="hljs-keyword">for</span>(thisidx=<span class="hljs-number">0</span>;thisidx&lt;=NUM_CHARS;thisidx++)
    {
        <span class="hljs-keyword">if</span>(freqarr[thisidx]&gt;<span class="hljs-number">0</span>)
        {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-&quot;</span>);
        }
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n      &quot;</span>);

    <span class="hljs-comment">/* &#x6309;&#x4F4D;&#x8F93;&#x51FA;&#x5B57;&#x7B26;ASCII&#x7801;&#x503C; */</span>
    <span class="hljs-keyword">for</span>(thisidx=<span class="hljs-number">0</span>;thisidx&lt;NUM_CHARS;thisidx++)
    {
        <span class="hljs-keyword">if</span>(freqarr[thisidx]&gt;<span class="hljs-number">0</span>)
        {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,thisidx/<span class="hljs-number">100</span>);     <span class="hljs-comment">/* &#x767E;&#x4F4D; */</span>
        }
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n      &quot;</span>);
    <span class="hljs-keyword">for</span>(thisidx=<span class="hljs-number">0</span>;thisidx&lt;NUM_CHARS;thisidx++)
    {
        <span class="hljs-keyword">if</span>(freqarr[thisidx]&gt;<span class="hljs-number">0</span>)
        {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,(thisidx-(<span class="hljs-number">100</span>*(thisidx/<span class="hljs-number">100</span>)))/<span class="hljs-number">10</span>);    <span class="hljs-comment">/* &#x5341;&#x4F4D; */</span>
        }
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n      &quot;</span>);
    <span class="hljs-keyword">for</span>(thisidx=<span class="hljs-number">0</span>;thisidx&lt;NUM_CHARS;thisidx++)
    {
        <span class="hljs-keyword">if</span>(freqarr[thisidx]&gt;<span class="hljs-number">0</span>)
        {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,thisidx-(<span class="hljs-number">10</span>*(thisidx/<span class="hljs-number">10</span>)));  <span class="hljs-comment">/* &#x4E2A;&#x4F4D; */</span>
        }
    }

    <span class="hljs-comment">/* &#x5B57;&#x7B26;&#x503C;&#x5927;&#x4E8E;256&#x7684;&#x7ED3;&#x679C;&#x8F93;&#x51FA; */</span>
    <span class="hljs-keyword">if</span>(freqarr[NUM_CHARS]&gt;<span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&gt;%d\n&quot;</span>,NUM_CHARS);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h1 id="&#x51FD;&#x6570;"><a name="&#x51FD;&#x6570;" class="plugin-anchor" href="#&#x51FD;&#x6570;"><span class="fa fa-link"></span></a>&#x51FD;&#x6570;</h1>
<p><strong>&#x51FD;&#x6570;</strong>&#x63D0;&#x4F9B;&#x4E86;&#x5C01;&#x88C5;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4F18;&#x70B9;&#x662F;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x4E86;&#x89E3;&#x5176;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x3002;K&amp;R&#x5982;&#x6B64;&#x5F62;&#x5BB9;&#xFF1A;</p>
<blockquote>
<p>With properly designed functions,it is possible to ignore <strong>how</strong> a job is done;knowing  <strong>what</strong> is done is sufficient.</p>
</blockquote>
<p>&#x4E0B;&#x9762;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x7684;&#x7528;<code>pow(m,n)</code>&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;m&#x7684;n&#x6B21;&#x5E42;&#xFF0C;&#x867D;&#x7136;&#x8FD9;&#x4E0D;&#x662F;&#x6548;&#x7387;&#x6700;&#x9AD8;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x8DB3;&#x591F;&#x7528;&#x6765;&#x63CF;&#x8FF0;&#x51FD;&#x6570;&#x7684;&#x4E00;&#x4E9B;&#x6982;&#x5FF5;&#xFF1A;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">power</span><span class="hljs-params">(<span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> n)</span></span>;

<span class="hljs-comment">/* test power function */</span>
main()
{
    <span class="hljs-keyword">int</span> i;

    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i)
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d %d %d\n&quot;</span>, i, power(<span class="hljs-number">2</span>,i), power(-<span class="hljs-number">3</span>,i));

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* power: raise base to n-th power; n &gt;= 0 */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">power</span><span class="hljs-params">(<span class="hljs-keyword">int</span> base, <span class="hljs-keyword">int</span> n)</span>
</span>{
    <span class="hljs-keyword">int</span> i, p;

    p = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= n; ++i)
        p = p * base;
    <span class="hljs-keyword">return</span> p;
}
</code></pre>
<p>&#x51FD;&#x6570;&#x6309;&#x7167;&#x7A0B;&#x5E8F;&#x4E2D;&#x7ED9;&#x5B9A;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9A;&#x4E49;&#xFF0C;&#x9700;&#x8981;&#x7ED9;&#x5B9A;<strong>&#x8FD4;&#x56DE;&#x7C7B;&#x578B;(return-type)</strong>,<strong>&#x51FD;&#x6570;&#x540D;(function-name)</strong>,<strong>&#x53C2;&#x6570;&#x58F0;&#x660E;(parameter declarations)</strong>
&#x4EE5;&#x53CA;&#x51FD;&#x6570;&#x4F53;&#x5185;&#x7684;<strong>&#x53D8;&#x91CF;&#x5B9A;&#x4E49;(declarations)</strong>&#x548C;<strong>&#x8BED;&#x53E5;(statements)</strong>&#x3002;&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x4EFB;&#x4F55;&#x987A;&#x5E8F;&#x51FA;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x5B58;&#x5728;&#x4E8E;&#x4E00;&#x4E2A;&#x6E90;&#x6587;&#x4EF6;&#x6216;&#x591A;&#x4E2A;&#x6E90;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F46;
&#x540C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x5206;&#x5F00;&#x6765;&#x5B9A;&#x4E49;&#x3002;</p>
<p><code>power()</code>&#x4F7F;&#x7528;&#x7684;&#x53C2;&#x6570;&#x540D;&#x5B57;&#x5BF9;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x4E0D;&#x53EF;&#x89C1;&#xFF0C;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x53C2;&#x6570;&#x540D;&#x5B57;&#x800C;&#x4E0D;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#xFF0C;&#x4F8B;&#x5982;<code>main()</code>&#x4E2D;&#x7684;<code>i</code>&#x548C;<code>power()</code>&#x4E2D;&#x7684;<code>i</code>&#x5E76;&#x4E0D;&#x76F8;&#x5173;
&#x3002;</p>
<p>&#x51FD;&#x6570;&#x9700;&#x8981;&#x91C7;&#x7528;<code>return expression;</code>&#x6765;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x503C;&#x7ED9;&#x8C03;&#x7528;&#x8005;&#xFF0C;<code>expression</code>&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x6B64;&#x65F6;<code>return;</code>&#x53EA;&#x8D77;&#x63A7;&#x5236;&#x4F5C;&#x7528;&#xFF0C;&#x4E0D;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x503C;&#x3002;<code>main()</code>&#x51FD;&#x6570;
&#x548C;&#x5176;&#x5B83;&#x51FD;&#x6570;&#x4E00;&#x6837;&#xFF0C;&#x4E5F;&#x8981;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x8FD4;&#x56DE;0&#x8868;&#x793A;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#xFF0C;&#x8FD4;&#x56DE;&#x975E;&#x96F6;&#x503C;&#x8868;&#x793A;&#x5F02;&#x5E38;&#x6216;&#x9519;&#x8BEF;&#x9000;&#x51FA;&#x3002;&#x6B64;&#x540E;&#x90FD;&#x5C06;&#x5BF9;<code>main()</code>&#x8BBE;&#x7F6E;&#x8FD4;&#x56DE;&#x8BED;&#x53E5;&#xFF0C;K&amp;R&#xFF1A;</p>
<blockquote>
<p>but we will include them hereafter,as a reminder that programs should return status to their environment.</p>
</blockquote>
<p>&#x5728;<code>main()</code>&#x4E4B;&#x524D;&#x7684;<code>int power(int base, int n);</code>&#x79F0;&#x4E3A;<strong>&#x51FD;&#x6570;&#x539F;&#x578B;(function prototype)</strong>&#xFF0C;&#x58F0;&#x660E;<code>power()</code>&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x6536;&#x4E24;&#x4E2A;int&#x53C2;&#x6570;&#x5E76;&#x4E14;&#x8FD4;&#x56DE;int&#x503C;
&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x51FD;&#x6570;&#x539F;&#x578B;&#x9700;&#x8981;&#x548C;&#x5B9A;&#x4E49;&#x4EE5;&#x53CA;&#x8C03;&#x7528;&#x76F8;&#x5339;&#x914D;&#xFF0C;&#x4F46;&#x53C2;&#x6570;&#x540D;&#x5B57;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5339;&#x914D;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x51FD;&#x6570;&#x539F;&#x578B;&#x4E2D;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;<code>int power(int, int);</code>&#x548C;&#x7A0B;&#x5E8F;
&#x4E2D;&#x7684;&#x51FD;&#x6570;&#x539F;&#x578B;&#x662F;&#x7B49;&#x6548;&#x7684;&#x3002;</p>
<p><strong>ANSI C</strong>&#x548C;&#x4E4B;&#x524D;&#x6807;&#x51C6;&#x7684;&#x6700;&#x5927;&#x7684;&#x6539;&#x8FDB;&#x5728;&#x4E8E;&#x51FD;&#x6570;&#x7684;&#x58F0;&#x660E;&#x548C;&#x5B9A;&#x4E49;&#xFF0C;&#x5728;&#x4EE5;&#x524D;&#x7684;&#x6807;&#x51C6;&#x4E2D;&#xFF0C;<code>power()</code>&#x7684;&#x5B9A;&#x4E49;&#x5C06;&#x4F1A;&#x662F;&#x8FD9;&#x6837;&#x5B50;&#xFF1A;</p>
<pre><code class="lang-C"><span class="hljs-comment">/* power: raise base to n-th power; n &gt;= 0 */</span>
<span class="hljs-comment">/*(old-style version) */</span>
power(base, n)
<span class="hljs-keyword">int</span> base, n;
{
    <span class="hljs-keyword">int</span> i, p;

    p = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= n; ++i)
        p = p * base;
    <span class="hljs-keyword">return</span> p;
}
</code></pre>
<p>&#x53C2;&#x6570;&#x540D;&#x5728;&#x62EC;&#x53F7;&#x5185;&#x7ED9;&#x5B9A;&#xFF0C;&#x5176;&#x7C7B;&#x578B;&#x5728;&#x82B1;&#x62EC;&#x53F7;&#x524D;&#x58F0;&#x660E;&#xFF0C;&#x7F3A;&#x7701;&#x4E3A;<code>int</code>&#x7C7B;&#x578B;&#x3002;</p>
<p><code>power()</code>&#x7684;&#x58F0;&#x660E;&#x5C06;&#x4F1A;&#x662F;<code>int power();</code>&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x53C2;&#x6570;&#x5217;&#x8868;&#xFF0C;&#x6240;&#x4EE5;&#x7F16;&#x8BD1;&#x5668;&#x4E0D;&#x80FD;&#x5373;&#x65F6;&#x68C0;&#x67E5;<code>power()</code>&#x662F;&#x5426;&#x88AB;&#x6B63;&#x786E;&#x8C03;&#x7528;&#x3002;&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;&#xFF0C;&#x65B0;&#x8BED;&#x6CD5;&#x6807;&#x51C6;
&#x5141;&#x8BB8;&#x7F16;&#x8BD1;&#x5668;&#x66F4;&#x5BB9;&#x6613;&#x68C0;&#x6D4B;&#x53C2;&#x6570;&#x6570;&#x91CF;&#x548C;&#x7C7B;&#x578B;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x65B0;&#x6807;&#x51C6;&#x3002;</p>
<blockquote>
<p>The old style of declaration and definition still works
in ANSI C, at least for a transition period, but we strongly recommend that you use the new
form when you have a compiler that supports it.</p>
<p>Exercise 1.15. Rewrite the temperature conversion program of Section 1.2 to use a function
 for conversion.</p>
</blockquote>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">FtoC</span><span class="hljs-params">(<span class="hljs-keyword">float</span> f)</span>
</span>{
    <span class="hljs-keyword">float</span> c;
    c=(<span class="hljs-number">5.0</span>/<span class="hljs-number">9.0</span>)*(f-<span class="hljs-number">32.0</span>);
    <span class="hljs-keyword">return</span> c;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">float</span> fahr,celsius;
    <span class="hljs-keyword">int</span> lower,upper,step;

    lower=<span class="hljs-number">0</span>;
    upper=<span class="hljs-number">300</span>;
    step=<span class="hljs-number">20</span>;

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;F    C\n\n&quot;</span>);
    fahr=lower;
    <span class="hljs-keyword">while</span>(fahr&lt;=upper)
    {
        celsius=FtoC(fahr);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3.0f %6.1f\n&quot;</span>,fahr,celsius);
        fahr=fahr+step;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h1 id="&#x53C2;&#x6570;&#x4F20;&#x503C;&#x8C03;&#x7528;"><a name="&#x53C2;&#x6570;&#x4F20;&#x503C;&#x8C03;&#x7528;" class="plugin-anchor" href="#&#x53C2;&#x6570;&#x4F20;&#x503C;&#x8C03;&#x7528;"><span class="fa fa-link"></span></a>&#x53C2;&#x6570;-&#x4F20;&#x503C;&#x8C03;&#x7528;</h1>
<p>&#x5728;C&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x90FD;&#x901A;&#x8FC7;<strong>&#x503C;&#x4F20;&#x9012;(passed by value)</strong>&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x63A5;&#x6536;&#x4E86;&#x5B58;&#x5728;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x503C;&#x800C;&#x4E0D;&#x662F;&#x539F;&#x59CB;&#x53D8;&#x91CF;&#x3002;</p>
<blockquote>
<p>It usually leads to more compact programs with fewer extraneous variables,because parameters can be treated as
conveniently initialized local variables in the called routine.</p>
</blockquote>
<p>&#x5229;&#x7528;&#x8FD9;&#x79CD;&#x7279;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x5199;&#x51FA;&#x53E6;&#x5916;&#x4E00;&#x79CD;<code>power()</code>&#x7684;&#x5B9E;&#x73B0;</p>
<pre><code class="lang-C"><span class="hljs-comment">/* power: raise base to n-th power; n &gt;= 0; version 2 */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">power</span><span class="hljs-params">(<span class="hljs-keyword">int</span> base, <span class="hljs-keyword">int</span> n)</span>
</span>{
    <span class="hljs-keyword">int</span> p;

    <span class="hljs-keyword">for</span> (p = <span class="hljs-number">1</span>; n &gt; <span class="hljs-number">0</span>; --n)
        p = p * base;
    <span class="hljs-keyword">return</span> p;
}
</code></pre>
<p>&#x53C2;&#x6570;<code>n</code>&#x662F;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#xFF0C;&#x7528;&#x5B83;&#x6765;&#x63A7;&#x5236;&#x5FAA;&#x73AF;&#xFF0C;&#x5219;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x8BBE;&#x7F6E;<code>i</code>&#x53D8;&#x91CF;&#xFF0C;&#x51FD;&#x6570;&#x5185;&#x65E0;&#x8BBA;&#x5BF9;<code>n</code>&#x600E;&#x4E48;&#x64CD;&#x4F5C;&#x90FD;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;<code>power()</code>&#x8C03;&#x7528;&#x7684;&#x539F;&#x59CB;&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x540C;&#x65F6;&#xFF0C;&#x5FC5;&#x8981;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x9700;&#x8981;&#x5728;&#x8C03;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x8FD9;&#x65F6;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x76EE;&#x6807;&#x53D8;&#x91CF;&#x7684;<strong>&#x5730;&#x5740;(address)</strong>(<strong>&#x6307;&#x9488;(pointer)</strong>)&#xFF0C;&#x5E76;&#x4E14;
&#x8C03;&#x7528;&#x51FD;&#x6570;&#x5FC5;&#x987B;&#x5C06;&#x53C2;&#x6570;&#x58F0;&#x660E;&#x4E3A;&#x6307;&#x9488;&#x7C7B;&#x578B;&#xFF0C;&#x7136;&#x540E;&#x95F4;&#x63A5;&#x5730;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x6307;&#x9488;&#x6765;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x6570;&#x7EC4;&#x5219;&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x5F53;&#x6570;&#x7EC4;&#x7684;&#x540D;&#x5B57;&#x88AB;&#x7528;&#x4F5C;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x4F20;&#x9012;&#x7ED9;&#x51FD;&#x6570;&#x7684;&#x503C;&#x662F;&#x6570;&#x7EC4;&#x8D77;&#x59CB;&#x5143;&#x7D20;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x53E6;&#x5916;&#x521B;&#x5EFA;&#x6570;&#x7EC4;&#x7684;&#x62F7;&#x8D1D;&#x3002;</p>
<h1 id="&#x5B57;&#x7B26;&#x6570;&#x7EC4;"><a name="&#x5B57;&#x7B26;&#x6570;&#x7EC4;" class="plugin-anchor" href="#&#x5B57;&#x7B26;&#x6570;&#x7EC4;"><span class="fa fa-link"></span></a>&#x5B57;&#x7B26;&#x6570;&#x7EC4;</h1>
<p>C&#x4E2D;&#x6700;&#x5E38;&#x7528;&#x7684;&#x6570;&#x7EC4;&#x662F;<strong>&#x5B57;&#x7B26;&#x6570;&#x7EC4;(Character Arrays)</strong>&#xFF0C;&#x4E3A;&#x4E86;&#x63CF;&#x8FF0;&#x5B57;&#x7B26;&#x6570;&#x7EC4;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x7A0B;&#x5E8F;&#x7528;&#x6765;&#x8BFB;&#x5165;&#x6587;&#x672C;&#x884C;&#x5E8F;&#x5217;&#x7136;&#x540E;&#x6253;&#x5370;&#x6700;&#x957F;&#x7684;&#x6587;&#x672C;&#x884C;&#x3002;</p>
<ul>
<li>&#x8BFB;&#x5165;&#x884C;&#x5230;&#x8F93;&#x5165;&#x7ED3;&#x675F;</li>
<li>&#x5982;&#x679C;&#x6BD4;&#x4E4B;&#x524D;&#x7684;&#x6700;&#x957F;&#x884C;&#x957F;&#xFF0C;&#x4FDD;&#x5B58;&#x6700;&#x957F;&#x884C;&#x53CA;&#x5176;&#x957F;&#x5EA6;</li>
<li>&#x8BFB;&#x5165;&#x7ED3;&#x675F;&#x540E;&#x8F93;&#x51FA;&#x6700;&#x957F;&#x884C;</li>
</ul>
<p>&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x6D41;&#x7A0B;&#xFF0C;&#x9996;&#x5148;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x51FD;&#x6570;<code>getline()</code>&#x6765;&#x8BFB;&#x5165;&#x4E0B;&#x4E00;&#x884C;&#x8F93;&#x5165;&#xFF0C;<code>getline()</code>&#x8981;&#x80FD;&#x591F;&#x8FD4;&#x56DE;&#x6807;&#x8BC6;&#x6587;&#x4EF6;&#x7ED3;&#x675F;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;<code>0</code>&#x6765;&#x8868;&#x793A;&#x6587;&#x4EF6;
&#x7ED3;&#x675F;&#xFF0C;&#x56E0;&#x4E3A;&#x6240;&#x6709;&#x6709;&#x6548;&#x6587;&#x672C;&#x884C;&#x7684;&#x957F;&#x5EA6;&#x90FD;&#x4E0D;&#x4F1A;&#x662F;0&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x53EA;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6362;&#x884C;&#x7B26;&#x7684;&#x6587;&#x672C;&#x884C;&#x7684;&#x957F;&#x5EA6;&#x90FD;&#x662F;1&#x3002;&#x7136;&#x540E;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x51FD;&#x6570;<code>copy()</code>&#x6765;&#x5C06;&#x5F97;&#x5230;&#x7684;
&#x65B0;&#x7684;&#x6700;&#x957F;&#x884C;&#x62F7;&#x8D1D;&#x5230;&#x5B89;&#x5168;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x6700;&#x540E;&#x4F7F;&#x7528;<code>main()</code>&#x51FD;&#x6570;&#x6765;&#x8C03;&#x7528;&#x524D;&#x4E24;&#x8005;&#x8FBE;&#x5230;&#x76EE;&#x7684;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXLINE <span class="hljs-number">1000</span>    <span class="hljs-comment">/* maximum input line length */</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> line[], <span class="hljs-keyword">int</span> maxline)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">char</span> to[], <span class="hljs-keyword">char</span> from[])</span></span>;

<span class="hljs-comment">/* print the longest input */</span>
main()
{
    <span class="hljs-keyword">int</span> len;    <span class="hljs-comment">/* current line length */</span>
    <span class="hljs-keyword">int</span> max;    <span class="hljs-comment">/* maximum length seen so far */</span>
    <span class="hljs-keyword">char</span> line[MAXLINE];        <span class="hljs-comment">/* current input line */</span>
    <span class="hljs-keyword">char</span> longest[MAXLINE];    <span class="hljs-comment">/* longest line saved here */</span>

    max = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> ((len = getline(line, MAXLINE)) &gt; <span class="hljs-number">0</span>)
        <span class="hljs-keyword">if</span> (len &gt; max) {
            max = len;
            copy(longest, line);
        }
    <span class="hljs-keyword">if</span> (max &gt; <span class="hljs-number">0</span>) <span class="hljs-comment">/* there was a line */</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>, longest);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* getline: read a line into s, return length */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[],<span class="hljs-keyword">int</span> lim)</span>
</span>{
    <span class="hljs-keyword">int</span> c, i;
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i &lt; lim-<span class="hljs-number">1</span> &amp;&amp; (c=getchar())!=EOF &amp;&amp; c!=<span class="hljs-string">&apos;\n&apos;</span>; ++i)
        s[i] = c;
    <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos;\n&apos;</span>) {
        s[i] = c;
        ++i;
    }
    s[i] = <span class="hljs-string">&apos;\0&apos;</span>;
    <span class="hljs-keyword">return</span> i;
}

<span class="hljs-comment">/* copy: copy &apos;from&apos; into &apos;to&apos;; assume to is big enough */</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">char</span> to[], <span class="hljs-keyword">char</span> from[])</span>
</span>{
    <span class="hljs-keyword">int</span> i;

    i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> ((to[i] = from[i]) != <span class="hljs-string">&apos;\0&apos;</span>)
        ++i;
}
</code></pre>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4F7F;&#x7528;gcc&#x7F16;&#x8BD1;&#x65F6;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x56E0;&#x4E3A;<code>stdio.h</code>&#x4E2D;&#x5DF2;&#x7ECF;&#x5BF9;<code>getline()</code>&#x8FDB;&#x884C;&#x4E86;&#x5B9A;&#x4E49;&#x3002;&#x5C06;<code>getline()</code>&#x6539;&#x6210;&#x5176;&#x5B83;&#x540D;&#x5B57;&#x80FD;&#x591F;
&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5728;<code>int getline(char s[],int lim);</code>&#x7684;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x4E2D;&#xFF0C;&#x5E76;&#x4E0D;&#x5FC5;&#x8981;&#x6307;&#x5B9A;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;(&#x5BF9;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#x65F6;&#x6307;&#x5B9A;&#x957F;&#x5EA6;&#x662F;&#x4E3A;&#x4E86;&#x5206;&#x914D;&#x5185;&#x5B58;)&#x3002;
<code>copy()</code>&#x4E0D;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x662F;<code>void</code>&#x7C7B;&#x578B;&#xFF0C;&#x8868;&#x793A;&#x4E0D;&#x8FD4;&#x56DE;&#x503C;&#x3002;</p>
<p><code>getline()</code>&#x5728;&#x6570;&#x7EC4;&#x7684;&#x7ED3;&#x5C3E;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&apos;\0&apos;&#x6765;&#x6807;&#x8BC6;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x7ED3;&#x5C3E;&#xFF0C;&#x5B57;&#x7B26;&#x4E32;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x4E5F;&#x662F;&#x6309;&#x7167;&quot;&#x5B57;&#x7B26;&#x4E32;&#x5B57;&#x7B26;+\0&quot;&#x6765;&#x5B58;&#x50A8;&#x7684;&#xFF0C;&#x683C;&#x5F0F;&#x5316;&#x5B57;&#x7B26;&#x4E32;<code>%s</code>
&#x8981;&#x6C42;&#x76F8;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x662F;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x8868;&#x793A;&#x7684;&#xFF0C;<code>copy()</code>&#x4E5F;&#x4F9D;&#x8D56;&#x4E8E;&#x8FD9;&#x79CD;&#x8868;&#x793A;&#x5F62;&#x5F0F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x67D0;&#x4E00;&#x884C;&#x957F;&#x5230;&#x8D85;&#x8FC7;&#x4E86;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#xFF0C;<code>getline()</code>&#x5728;&#x6570;&#x7EC4;&#x6536;&#x96C6;&#x6EE1;&#x4E4B;&#x540E;&#x4ECD;&#x7136;&#x4F1A;&#x7EE7;&#x7EED;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x4F1A;&#x9020;&#x6210;&#x4E00;&#x4E9B;&#x6270;&#x52A8;&#x3002;<code>main()</code>&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5224;&#x65AD;
&#x884C;&#x7684;&#x957F;&#x5EA6;&#x4EE5;&#x53CA;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x6765;&#x5224;&#x5B9A;&#x662F;&#x5426;&#x51FA;&#x73B0;&#x4E86;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;</p>
<p><code>getline()</code>&#x4E8B;&#x5148;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x8F93;&#x5165;&#x884C;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x6EA2;&#x51FA;&#x5904;&#x7406;&#xFF0C;&#x4F46;&#x662F;<code>copy()</code>&#x8C03;&#x7528;&#x65F6;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x4E86;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x7701;&#x6389;&#x6EA2;&#x51FA;
&#x68C0;&#x67E5;&#x3002;</p>
<blockquote>
<p>Exercise 1-16. Revise the main routine of the longest-line program so it will correctly print
the length of arbitrary long input lines, and as much as possible of the text.</p>
</blockquote>
<p>&#x65B9;&#x6CD5;&#x4E00;&#xFF1A;&#x4FEE;&#x6539;<code>getline()</code>&#x51FD;&#x6570;&#xFF0C;&#x4F7F;&#x4E4B;&#x8FD4;&#x56DE;&#x6587;&#x672C;&#x884C;&#x7684;&#x5B9E;&#x9645;&#x957F;&#x5EA6;&#x800C;&#x4E0D;&#x662F;&#x5199;&#x5165;&#x6570;&#x7EC4;&#x7684;&#x5B57;&#x7B26;&#x4E2A;&#x6570;&#xFF0C;&#x7A0B;&#x5E8F;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x65B0;&#x589E;&#x52A0;&#x4E86;
&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x8FD9;&#x6837;<code>j</code>&#x7528;&#x6765;&#x63A7;&#x5236;&#x5199;&#x5165;&#x6570;&#x7EC4;&#xFF0C;<code>i</code>&#x7528;&#x6765;&#x8BB0;&#x5F55;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x3002;&#x5C06;<code>getline()</code>&#x683C;&#x5916;
&#x547D;&#x540D;&#x4EE5;&#x514D;&#x7F16;&#x8BD1;&#x5668;&#x62A5;&#x9519;&#x3002;&#x7A0B;&#x5E8F;&#x6BCF;&#x8BFB;&#x5165;&#x4E00;&#x884C;&#xFF0C;&#x5C31;&#x8F93;&#x51FA;&#x5F53;&#x524D;&#x884C;&#x7684;&#x957F;&#x5EA6;&#x53CA;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5728;&#x8F93;&#x5165;&#x7ED3;&#x675F;&#x4EE5;&#x540E;&#xFF0C;&#x8F93;&#x51FA;&#x6700;&#x957F;&#x884C;&#x53CA;&#x5176;&#x957F;&#x5EA6;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXLINE <span class="hljs-number">1000</span> <span class="hljs-comment">/* maximum input line size */</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getline_1</span><span class="hljs-params">(<span class="hljs-keyword">char</span> line[], <span class="hljs-keyword">int</span> maxline)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">char</span> to[], <span class="hljs-keyword">char</span> from[])</span></span>;

<span class="hljs-comment">/* print longest input line */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> len; <span class="hljs-comment">/* current line length */</span>
    <span class="hljs-keyword">int</span> max; <span class="hljs-comment">/* maximum length seen so far */</span>
    <span class="hljs-keyword">char</span> line[MAXLINE];    <span class="hljs-comment">/* current input line */</span>
    <span class="hljs-keyword">char</span> longest[MAXLINE]; <span class="hljs-comment">/* longest line saved here */</span>

    max = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span>((len = getline_1(line, MAXLINE)) &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d: %s&quot;</span>, len, line);

        <span class="hljs-keyword">if</span>(len &gt; max)
        {
            max = len;
            copy(longest, line);
        }
    }
    <span class="hljs-keyword">if</span>(max &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Longest is %d characters:\n%s&quot;</span>, max, longest);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* getline_1: read a line into s, return length */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getline_1</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[], <span class="hljs-keyword">int</span> lim)</span>
</span>{
    <span class="hljs-keyword">int</span> c, i, j;

    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>; (c = getchar())!=EOF &amp;&amp; c != <span class="hljs-string">&apos;\n&apos;</span>; ++i)
    {
        <span class="hljs-keyword">if</span>(i &lt; lim - <span class="hljs-number">1</span>)
        {
            s[j++] = c;
        }
    }
    <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos;\n&apos;</span>)
    {
        <span class="hljs-keyword">if</span>(i &lt;= lim - <span class="hljs-number">1</span>)
        {
            s[j++] = c;
        }
        ++i;
    }
    s[j] = <span class="hljs-string">&apos;\0&apos;</span>;
    <span class="hljs-keyword">return</span> i;
}

<span class="hljs-comment">/* copy: copy &apos;from&apos; into &apos;to&apos;; assume &apos;to&apos; is big enough */</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">char</span> to[], <span class="hljs-keyword">char</span> from[])</span>
</span>{
    <span class="hljs-keyword">int</span> i;

    i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>((to[i] = from[i]) != <span class="hljs-string">&apos;\0&apos;</span>)
    {
        ++i;
    }
}
</code></pre>
<p>&#x65B9;&#x6CD5;&#x4E8C;&#xFF1A;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5BF9;&#x9898;&#x76EE;&#x8FDB;&#x884C;&#x4E86;&#x66F4;&#x6DF1;&#x523B;&#x7684;&#x7406;&#x89E3;(&#x548C;&#x4E2D;&#x6587;&#x8BD1;&#x672C;&#x4E0A;&#x7684;&#x5DEE;&#x4E0D;&#x591A;)&#xFF0C;&#x9996;&#x5148;&#x662F;&#x4FEE;&#x6539;<code>main()</code>&#x7A0B;&#x5E8F;&#xFF0C;&#x5176;&#x6B21;&#x662F;&#x5B9E;&#x73B0;
&#x201C;&#x8F93;&#x51FA;&#x4EFB;&#x610F;&#x957F;&#x7684;&#x957F;&#x5EA6;&#x7684;&#x540C;&#x65F6;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x5730;&#x8F93;&#x51FA;&#x5B57;&#x7B26;(20&#x4E2A;)&#x201D;&#x3002;&#x7406;&#x89E3;&#x7A0B;&#x5E8F;&#x7684;&#x96BE;&#x70B9;&#x4F9D;&#x65E7;&#x5728;&#x7406;&#x89E3;&#x6BCF;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;
<code>getmore</code>&#x6765;&#x63A7;&#x5236;&#x7EE7;&#x7EED;&#x8BFB;&#x53D6;&#x8D85;&#x51FA;&#x6570;&#x7EC4;&#x5B58;&#x50A8;&#x4E4B;&#x5916;&#x800C;&#x53C8;&#x5728;&#x6362;&#x884C;&#x7B26;&#x4E4B;&#x524D;&#x7684;&#x5B57;&#x7B26;&#xFF0C;<code>temp</code>&#x5728;&#x5FC5;&#x8981;&#x7684;&#x65F6;&#x5019;&#x8BB0;&#x5F55;&#x5B57;&#x7B26;&#x4E32;&#x5F00;&#x59CB;&#x7684;
&#x6BB5;&#xFF0C;<code>prevmax</code>&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x7EDF;&#x8BA1;&#x4EFB;&#x610F;&#x957F;&#x5EA6;&#x7684;&#x8F93;&#x5165;&#xFF0C;&#x6BCF;&#x6B21;&#x8D85;&#x51FA;&#x6570;&#x7EC4;&#x5B58;&#x50A8;&#x957F;&#x5EA6;&#x800C;&#x53C8;&#x6CA1;&#x6709;&#x6362;&#x884C;&#x65F6;&#x8FDB;&#x884C;&#x957F;&#x5EA6;&#x7D2F;&#x52A0;&#x3002;</p>
<pre><code class="lang-C">
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXLINE <span class="hljs-number">20</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getline_1</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[], <span class="hljs-keyword">int</span> lim)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">char</span> to[], <span class="hljs-keyword">char</span> from[])</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">char</span> line[MAXLINE];
    <span class="hljs-keyword">char</span> longest[MAXLINE];
    <span class="hljs-keyword">char</span> temp[MAXLINE];
    <span class="hljs-keyword">int</span> len, max, prevmax, getmore;

    max = prevmax = getmore = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>((len = getline_1(line, MAXLINE)) &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">if</span>(line[len - <span class="hljs-number">1</span>] != <span class="hljs-string">&apos;\n&apos;</span>)
        {
            <span class="hljs-keyword">if</span>(getmore == <span class="hljs-number">0</span>)
                copy(temp, line);
            prevmax += len;
            <span class="hljs-keyword">if</span>(max &lt; prevmax)
                max = prevmax;
            getmore = <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-keyword">if</span>(getmore == <span class="hljs-number">1</span>)
            {
                <span class="hljs-keyword">if</span>(max &lt; prevmax + len)
                {
                    max = prevmax + len;
                    copy(longest, temp);
                    longest[MAXLINE - <span class="hljs-number">2</span>] = <span class="hljs-string">&apos;\n&apos;</span>;
                }
                getmore = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(max &lt; len)
            {
                max = len;
                copy(longest, line);
            }
            prevmax = <span class="hljs-number">0</span>;
        }
    }
    <span class="hljs-keyword">if</span>(max &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>, longest);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;len = %d\n&quot;</span>, max);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getline_1</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[], <span class="hljs-keyword">int</span> lim)</span>
</span>{
    <span class="hljs-keyword">int</span> c, i;
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>;
        i &lt; lim - <span class="hljs-number">1</span> &amp;&amp; ((c = getchar()) != EOF &amp;&amp; c != <span class="hljs-string">&apos;\n&apos;</span>);
        ++i)
        s[i] = c;

    <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos;\n&apos;</span>)
    {
        s[i] = c;
        ++i;
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c == EOF &amp;&amp; i &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">/* gotta do something about no newline preceding EOF */</span>
        s[i] = <span class="hljs-string">&apos;\n&apos;</span>;
        ++i;
    }
    s[i] = <span class="hljs-string">&apos;\0&apos;</span>;
    <span class="hljs-keyword">return</span> i;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">char</span> to[], <span class="hljs-keyword">char</span> from[])</span>
</span>{
    <span class="hljs-keyword">int</span> i;

    i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>((to[i] = from[i]) != <span class="hljs-string">&apos;\0&apos;</span>)
        ++i;
}
</code></pre>
<blockquote>
<p>Exercise 1-17. Write a program to print all input lines that are longer than 80 characters.</p>
</blockquote>
<p>&#x9047;&#x5230;&#x6B64;&#x7C7B;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x8FB9;&#x754C;&#x60C5;&#x51B5;&#x3002;&#x8F93;&#x51FA;&#x957F;&#x5EA6;&#x5927;&#x4E8E;80&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8BBE;&#x7F6E;&#x7B26;&#x53F7;&#x5E38;&#x91CF;<code>MINLENGTH</code>&#x4E3A;81&#xFF0C;&#x5F53;&#x8F93;&#x5165;&#x5B57;&#x7B26;&#x4E32;&#x5305;&#x62EC;80&#x4E2A;&#x6709;
&#x6548;&#x5B57;&#x7B26;&#x52A0;&#x4E00;&#x4E2A;&#x6362;&#x884C;&#x7B26;&#x7684;&#x8FB9;&#x754C;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;<code>readbuff()</code>&#x4F1A;&#x5728;&#x9047;&#x5230;&#x6362;&#x884C;&#x7B26;&#x65F6;&#x8FD4;&#x56DE;0&#xFF0C;&#x8FD9;&#x6837;<code>main()</code>&#x4E0D;&#x4F1A;&#x5224;&#x5B9A;&#x4E3A;&#x6EE1;&#x8DB3;&#x957F;&#x5EA6;&#x6761;&#x4EF6;&#x3002;
&#x7A0B;&#x5E8F;&#x7684;&#x601D;&#x60F3;&#x662F;&#x5148;&#x8C03;&#x7528;<code>readbuff()</code>&#x5C1D;&#x8BD5;&#x8BFB;&#x53D6;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5982;&#x679C;&#x8BFB;&#x5230;81&#x4E2A;&#x6709;&#x6548;&#x5B57;&#x7B26;&#x800C;&#x6CA1;&#x6709;&#x9047;&#x5230;EOF&#x6216;&#x662F;&apos;\n&apos;&#x65F6;&#xFF0C;&#x7EE7;&#x7EED;&#x8C03;&#x7528;<code>copyline()</code>
&#x6765;&#x8F93;&#x51FA;&#x4E4B;&#x524D;&#x4FDD;&#x5B58;&#x5728;buffer[]&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4EE5;&#x53CA;&#x5269;&#x4F59;&#x7684;&#x5B57;&#x7B26;&#x3002;</p>
<p>&#x8FD8;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;<code>readbuff()</code>&#x548C;<code>copyline()</code>&#x5BF9;<code>size_t</code>&#x7C7B;&#x578B;&#x7684;<code>i</code>&#x53D8;&#x91CF;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x3002;&#x8BD5;&#x60F3;<code>readbuff()</code>&#x4E0D;&#x5BF9;<code>i</code>&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;
<code>i</code>&#x7684;&#x521D;&#x59CB;&#x503C;&#x662F;&#x672A;&#x77E5;&#x7684;&#xFF0C;&#x5047;&#x8BBE;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x6570;&#xFF0C;&#x5C06;&#x4F1A;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;<code>while</code>&#x8BED;&#x53E5;&#x8FD4;&#x56DE;1&#xFF0C;&#x7136;&#x540E;&#x4F7F;<code>main()</code>&#x8C03;&#x7528;<code>copyline()</code>&#x628A;&#x6240;&#x6709;&#x5B57;&#x7B26;
&#x90FD;&#x8F93;&#x51FA;&#xFF0C;&#x9020;&#x6210;&#x9519;&#x8BEF;&#x3002;&#x6240;&#x4EE5;&#x521D;&#x59CB;&#x5316;&#x8D4B;&#x503C;&#x5F80;&#x5F80;&#x5BF9;&#x7A0B;&#x5E8F;&#x7684;&#x6B63;&#x786E;&#x6027;&#x6709;&#x5F88;&#x5927;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x6270;&#x52A8;&#x4E5F;&#x80FD;&#x9020;&#x6210;&#x7A0B;&#x5E8F;&#x53D1;&#x751F;&#x91CD;&#x5927;&#x9519;&#x8BEF;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MINLENGTH <span class="hljs-number">81</span></span>

<span class="hljs-keyword">char</span> buffer[MINLENGTH];

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">readbuff</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buffer)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">copyline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buffer)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> status = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>(status != -<span class="hljs-number">1</span>){
        status = readbuff(buffer);
        <span class="hljs-keyword">if</span>(status == <span class="hljs-number">1</span>){
            status = copyline(buffer);
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">readbuff</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buffer)</span>
</span>{
    <span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> c;

    <span class="hljs-keyword">while</span>(i &lt; MINLENGTH){
        c = getchar();
        <span class="hljs-keyword">if</span>(c == EOF) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos;\n&apos;</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        buffer[i++] = c;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">copyline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buffer)</span>
</span>{
    <span class="hljs-keyword">size_t</span> i;
    <span class="hljs-keyword">int</span> c;
    <span class="hljs-keyword">int</span> status = <span class="hljs-number">1</span>;

    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>;i &lt; MINLENGTH;i++)
        <span class="hljs-built_in">putchar</span>(buffer[i]);
    <span class="hljs-keyword">while</span>(status ==<span class="hljs-number">1</span>){
        c = getchar();
        <span class="hljs-keyword">if</span>(c == EOF)
            status = -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos;\n&apos;</span>)
            status = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">putchar</span>(c);
    }
    <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\n&apos;</span>);
    <span class="hljs-keyword">return</span> status;
}
</code></pre>
<blockquote>
<p>Exercise 1-18. Write a program to remove trailing blanks and tabs from each line of input,
and to delete entirely blank lines.</p>
</blockquote>
<p>&#x4E0B;&#x9762;&#x662F;Ben Pfaff&#x7ED9;&#x51FA;&#x7684;&#x89E3;&#x7B54;&#xFF0C;&#x786E;&#x5B9E;&#x6BD4;&#x8F83;neat&#xFF0C;&#x7406;&#x89E3;&#x7A0B;&#x5E8F;&#x6709;&#x51E0;&#x4E2A;&#x96BE;&#x70B9;&#x3002;
&#x7B26;&#x53F7;&#x5E38;&#x91CF;<code>MAXQUEUE</code>&#x7528;&#x6765;&#x9650;&#x5236;&#x6BCF;&#x6B21;&#x6700;&#x5927;&#x53EF;&#x5904;&#x7406;&#x7684;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x7B26;&#x53F7;(&apos;\t&apos;&#x6216;&apos; &apos;)&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x7A0B;&#x5E8F;&#x4E2D;&#x8BBE;&#x5B9A;&#x4E3A;1001&#xFF0C;&#x5219;&#x8868;&#x793A;
&#x6700;&#x5927;&#x6BCF;&#x6B21;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x884C;&#x672B;&#x51FA;&#x73B0;1000&#x4E2A;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#xFF0C;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#x4E34;&#x65F6;&#x5B58;&#x50A8;&#x5728;<code>blank[]</code>&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;<code>head</code>&#x7528;&#x6765;&#x6807;&#x8BC6;&#x6700;&#x540E;
&#x5B58;&#x5728;<code>blank[]</code>&#x4E2D;&#x7684;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#x4F4D;&#x7F6E;&#xFF0C;<code>tail</code>&#x7528;&#x6765;&#x6807;&#x8BC6;&#x5F53;&#x524D;&#x672A;&#x5904;&#x7406;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x7F6E;&#x3002;Ben Pfaff&#x7684;&#x610F;&#x601D;
&#x662F;&#x65E2;&#x7136;&#x5230;&#x76EE;&#x524D;&#x7AE0;&#x8282;&#x4E3A;&#x6B62;&#x8FD8;&#x6CA1;&#x6709;&#x4ECB;&#x7ECD;&#x52A8;&#x6001;&#x5206;&#x914D;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x7684;&#x6280;&#x672F;&#xFF0C;&#x90A3;&#x4E48;&#x9650;&#x5B9A;&#x6BCF;&#x6B21;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x7684;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C;
&#x67D0;&#x6B21;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x5B8C;&#xFF0C;&#x90A3;&#x4E48;&#x901A;&#x8FC7;<code>main()</code>&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;<code>retval</code>&#x6765;&#x6307;&#x793A;&#x7ED9;&#x7CFB;&#x7EDF;&#x7A0B;&#x5E8F;&#x8FD8;&#x9700;&#x8981;&#x7EE7;&#x7EED;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7CFB;&#x7EDF;
&#x7A0B;&#x5E8F;&#x591A;&#x6B21;&#x8C03;&#x7528;&#x8BE5;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x6765;&#x8FBE;&#x5230;&#x76EE;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8BFB;&#x5165;&#x6362;&#x884C;&#x7B26;&#xFF0C;&#x8868;&#x793A;&#x8FD9;&#x4E00;&#x884C;&#x5DF2;&#x7ECF;&#x5230;&#x4E86;&#x8F93;&#x5165;&#x7ED3;&#x5C3E;&#xFF0C;&#x9700;&#x8981;&#x5C06;<code>head</code>&#x548C;<code>tail</code>&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;<code>nonspace</code>&#x6765;
&#x5224;&#x65AD;&#x662F;&#x5426;&#x8FD8;&#x6709;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x6CA1;&#x6709;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x679C;<code>nonspace</code>&#x662F;0&#xFF0C;&#x5219;&#x8FD9;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x53EA;&#x5305;&#x542B;&#x6362;&#x884C;&#x7B26;&#x6216;&#x662F;&#x53EA;&#x5305;&#x542B;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x548C;
&#x6362;&#x884C;&#x7B26;&#x7684;&#x884C;&#xFF0C;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x6389;(&#x5373;&#x4E0D;&#x8F93;&#x51FA;&#x6362;&#x884C;&#x7B26;)&#xFF0C;&#x5982;&#x679C;<code>nonspace</code>&#x662F;1&#xFF0C;&#x5219;&#x8868;&#x793A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x5B8C;&#x6216;&#x662F;&#x5DF2;&#x7ECF;&#x5904;&#x7406;
&#x5B8C;&#x4E86;&#x8FD9;&#x6B21;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x80FD;&#x5904;&#x7406;&#x7684;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x5B57;&#x7B26;(&#x4E4B;&#x540E;&#x8BF4;&#x660E;)&#x3002;&#x82E5;&#x9047;&#x5230;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#xFF0C;&#x9996;&#x5148;&#x68C0;&#x67E5;&#x5F53;&#x524D;<code>blank[]</code>&#x4E2D;&#x5DF2;&#x7ECF;&#x4E34;&#x65F6;&#x5B58;&#x653E;&#x4E86;&#x591A;&#x5C11;
&#x5F85;&#x5904;&#x7406;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;&#x82E5;&#x662F;&#x6CA1;&#x6709;&#x8FBE;&#x5230;&#x4E0A;&#x9650;&#xFF0C;&#x5219;&#x5C06;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x5B58;&#x5728;<code>head</code>&#x4F4D;&#x7F6E;&#x540C;&#x65F6;<code>head</code>&#x8981;&#x5F80;&#x540E;&#x79FB;&#x4E00;&#x4E2A;&#x5355;&#x4F4D;&#x3002;&#x82E5;&#x662F;
&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x4E0A;&#x9650;&#xFF0C;&#x6B64;&#x65F6;&#x65E0;&#x8BBA;&#x5F53;&#x524D;&#x5B58;&#x50A8;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x662F;&#x5426;&#x5C5E;&#x4E8E;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x7B26;&#xFF0C;&#x90FD;&#x8981;&#x5148;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x7A7A;&#x767D;&#x7B26;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x88AB;&#x8F93;
&#x51FA;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x4E0D;&#x5C5E;&#x4E8E;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;&#x5F53;&#x7136;&#x4E0D;&#x5F71;&#x54CD;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x88AB;&#x8F93;&#x51FA;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x5C5E;&#x4E8E;&#x884C;&#x672B;&#x5B57;&#x7B26;&#xFF0C;&#x5219;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;
&#x4E4B;&#x540E;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x6B63;&#x786E;&#x5B58;&#x50A8;&#x8FDB;<code>blank[]</code>&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x817E;&#x51FA;&#x4F4D;&#x7F6E;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x8F93;&#x51FA;&#x7684;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x8981;&#x7559;&#x7ED9;&#x4E0B;&#x4E00;&#x6B21;&#x7CFB;&#x7EDF;&#x7A0B;&#x5E8F;
&#x8C03;&#x7528;&#x65F6;&#x518D;&#x6765;&#x5904;&#x7406;&#x3002;&#x8F93;&#x51FA;<code>tail</code>&#x4F4D;&#x7F6E;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;<code>tail</code>&#x76F8;&#x5E94;&#x5730;&#x8981;&#x5F80;<code>head</code>&#x9760;&#x8FD1;&#x4E00;&#x4E2A;&#x5355;&#x4F4D;&#xFF0C;&#x5E76;&#x4FEE;&#x6539;<code>retval</code>&#x544A;&#x8BC9;
&#x7CFB;&#x7EDF;&#x7A0B;&#x5E8F;&#x8FD9;&#x6B21;&#x8C03;&#x7528;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x597D;&#xFF0C;&#x540C;&#x65F6;&#x8981;&#x5C06;<code>nonspace</code>&#x7F6E;1&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x6B21;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x4E0D;&#x4E86;&#x4E86;&#xFF0C;&#x9047;&#x5230;&apos;\n&apos;&#x65F6;
&#x53EA;&#x80FD;&#x8F93;&#x51FA;&#x6362;&#x884C;&#x7B26;&#xFF0C;&#x628A;&#x672A;&#x5904;&#x7406;&#x5B8C;&#x7684;&#x4EFB;&#x52A1;&quot;&#x7559;&#x7ED9;&#x540E;&#x4EBA;&#x89E3;&#x51B3;&quot;&#x3002;&#x817E;&#x51FA;&#x4F4D;&#x7F6E;&#x540E;&#x5C06;&#x6700;&#x65B0;&#x8BFB;&#x5165;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x5B58;&#x5230;<code>head</code>&#x4F4D;&#x7F6E;&#x5904;
&#x7136;&#x540E;&#x5F80;&#x540E;&#x79FB;&#x4E00;&#x4E2A;&#x5355;&#x4F4D;&#x3002;&#x82E5;&#x9047;&#x5230;&#x975E;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;&#x5219;&#x8F93;&#x51FA;<code>blank[]</code>&#x4E4B;&#x4E2D;&#x4E34;&#x65F6;&#x5B58;&#x50A8;&#x7684;&#x6240;&#x6709;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;&#x7136;&#x540E;&#x8F93;&#x51FA;&#x975E;&#x7A7A;&#x767D;
&#x5B57;&#x7B26;&#x5E76;&#x5C06;<code>nonspace</code>&#x7F6E;1&#x8868;&#x793A;<code>blank[]</code>&#x4E2D;&#x6CA1;&#x6709;&#x8FD8;&#x672A;&#x8F93;&#x51FA;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x76F4;&#x63A5;&#x8F93;&#x51FA;&#x4E0D;&#x4FBF;&#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x53BB;&#x9664;&#x4E86;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;&#x4F7F;&#x7528;<strong>&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;</strong>&#x5230;&#x6587;&#x4EF6;&#x6765;&#x9A8C;&#x8BC1;&#x662F;&#x4E00;&#x79CD;&#x68C0;&#x67E5;&#x6B63;&#x786E;&#x6027;
&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXQUEUE <span class="hljs-number">1001</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">advance</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pointer)</span>
</span>{
    <span class="hljs-keyword">if</span> (pointer &lt; MAXQUEUE - <span class="hljs-number">1</span>)
        <span class="hljs-keyword">return</span> pointer + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-comment">//freopen(&quot;output.txt&quot;,&quot;w&quot;,stdout);   /*&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x6587;&#x4EF6;*/</span>
    <span class="hljs-keyword">char</span> blank[MAXQUEUE];
    <span class="hljs-keyword">int</span> head, tail;
    <span class="hljs-keyword">int</span> nonspace;
    <span class="hljs-keyword">int</span> retval;
    <span class="hljs-keyword">int</span> c;

    retval = nonspace = head = tail = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> ((c = getchar()) != EOF) {
        <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos;\n&apos;</span>) {
            head = tail = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (nonspace)
                <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\n&apos;</span>);
            nonspace = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos; &apos;</span> || c == <span class="hljs-string">&apos;\t&apos;</span>) {
            <span class="hljs-keyword">if</span> (advance(head) == tail) {
                <span class="hljs-built_in">putchar</span>(blank[tail]);
                tail = advance(tail);
                nonspace = <span class="hljs-number">1</span>;
                retval = EXIT_FAILURE;
            }
            blank[head] = c;
            head = advance(head);
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">while</span> (head != tail) {
                <span class="hljs-built_in">putchar</span>(blank[tail]);
                tail = advance(tail);
            }
            <span class="hljs-built_in">putchar</span>(c);
            nonspace = <span class="hljs-number">1</span>;
        }
    }
    <span class="hljs-keyword">return</span> retval;
}
</code></pre>
<p>&#x7EC6;&#x5FC3;&#x7684;&#x540C;&#x5B66;&#x4F1A;&#x53D1;&#x73B0;&#x4E0A;&#x9762;&#x7684;&#x7A0B;&#x5E8F;&#x7ECF;&#x8FC7;&#x591A;&#x6B21;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x603B;&#x80FD;&#x5904;&#x7406;&#x5B8C;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x7B26;&#x53F7;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x975E;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x4E4B;&#x95F4;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x8FBE;&#x5230;&#x4E86;&#x5904;&#x7406;&#x4E0A;&#x9650;(&#x4F8B;&#x5982;&#xFF1A;&quot;A&quot;
+1000&#x4E2A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;+&quot;B&quot;)&#xFF0C;&#x867D;&#x7136;
&#x8FD9;&#x4E9B;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x90FD;&#x80FD;&#x6B63;&#x786E;&#x8F93;&#x51FA;&#x5E76;&#x4E14;&#x4E0D;&#x5F71;&#x54CD;&#x5904;&#x7406;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x7684;&#x884C;&#x672B;&#x7A7A;&#x767D;&#x7B26;&#xFF0C;&#x4F46;&#x662F;<code>retval</code>&#x540C;&#x6837;&#x4F1A;&#x7ED9;&#x7CFB;&#x7EDF;&#x7A0B;&#x5E8F;&#x8FD4;&#x56DE;&#x8FD8;&#x8981;&#x7EE7;&#x7EED;&#x5904;&#x7406;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;
&#x9020;&#x6210;&#x7CFB;&#x7EDF;&#x7A0B;&#x5E8F;&#x5728;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x6270;&#x52A8;&#x60C5;&#x51B5;&#x65F6;&#x867D;&#x7136;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x597D;&#x4E86;&#x4ECD;&#x7136;&#x4F1A;&#x65E0;&#x9650;&#x6B21;&#x5730;&#x8C03;&#x7528;&#x8BE5;&#x7A0B;&#x5E8F;&#x3002;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;&#x540E;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x547D;&#x4EE4;<code>echo $?</code>&#x6765;&#x67E5;&#x770B;
&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;<code>MAXQUEUE</code>&#x4FEE;&#x6539;&#x5F97;&#x8F83;&#x5C0F;&#x6765;&#x9A8C;&#x8BC1;&#x3002;Chris Sidi&#x7ED9;&#x51FA;&#x4E86;&#x57FA;&#x4E8E;Ben Pfaff&#x7ED9;&#x51FA;&#x7684;&#x65B9;&#x6CD5;&#x7684;&#x6539;&#x8FDB;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;
&#x52A0;&#x5165;&#x65B0;&#x53D8;&#x91CF;<code>spaceJustPrinted</code>&#x6765;&#x68C0;&#x67E5;&#x5F53;&#x524D;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x7684;&#x5B57;&#x7B26;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x9047;&#x5230;&#x6362;&#x884C;&#x7B26;&#x65F6;&#x518D;&#x6839;&#x636E;&#x4E4B;&#x524D;&#x8F93;&#x51FA;&#x7684;&#x5B57;&#x7B26;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8981;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;
&#x4FE1;&#x53F7;&#x3002;&#x7A0B;&#x5E8F;&#x8FD8;&#x589E;&#x52A0;&#x4E86;&#x5904;&#x7406;&#x67D0;&#x4E9B;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x6700;&#x540E;&#x4E00;&#x884C;&#x6CA1;&#x6709;&#x6362;&#x884C;&#x7B26;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x9C81;&#x68D2;&#x6027;&#x3002;</p>
<pre><code class="lang-C">
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXQUEUE <span class="hljs-number">1001</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">advance</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pointer)</span>
</span>{
    <span class="hljs-keyword">if</span> (pointer &lt; MAXQUEUE - <span class="hljs-number">1</span>)
        <span class="hljs-keyword">return</span> pointer + <span class="hljs-number">1</span>;
      <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">char</span> blank[MAXQUEUE];
     <span class="hljs-keyword">int</span> head, tail;
      <span class="hljs-keyword">int</span> nonspace;
      <span class="hljs-keyword">int</span> retval;
      <span class="hljs-keyword">int</span> c;
      <span class="hljs-keyword">int</span> spaceJustPrinted; <span class="hljs-comment">/*boolean: was the last character printed whitespace?*/</span>

    retval = spaceJustPrinted = nonspace = head = tail = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">while</span> ((c = getchar()) != EOF) {
        <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos;\n&apos;</span>) {
            head = tail = <span class="hljs-number">0</span>;
              <span class="hljs-keyword">if</span> (spaceJustPrinted == <span class="hljs-number">1</span>) <span class="hljs-comment">/*if some trailing whitespace was printed...*/</span>
                retval = EXIT_FAILURE;
              <span class="hljs-keyword">if</span> (nonspace) {
                <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&apos;\n&apos;</span>);
                spaceJustPrinted = <span class="hljs-number">0</span>; <span class="hljs-comment">/* this instruction isn&apos;t really necessary since
                                        spaceJustPrinted is only used to determine the
                                        return value, but we&apos;ll keep this boolean
                                        truthful */</span>
                   nonspace = <span class="hljs-number">0</span>;  <span class="hljs-comment">/* moved inside conditional just to save a needless
                                assignment */</span>
              }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&apos; &apos;</span> || c == <span class="hljs-string">&apos;\t&apos;</span>) {
              <span class="hljs-keyword">if</span> (advance(head) == tail) {
                <span class="hljs-built_in">putchar</span>(blank[tail]); <span class="hljs-comment">/* these whitespace chars being printed early
                                      are only a problem if they are trailing,
                                      which we&apos;ll check when we hit a \n or EOF */</span>
                spaceJustPrinted = <span class="hljs-number">1</span>;
                tail = advance(tail);
                nonspace = <span class="hljs-number">1</span>;
              }
            blank[head] = c;
              head = advance(head);
        }
        <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">while</span> (head != tail) {
                <span class="hljs-built_in">putchar</span>(blank[tail]);
                tail = advance(tail);
              }
          <span class="hljs-built_in">putchar</span>(c);
          spaceJustPrinted = <span class="hljs-number">0</span>;
          nonspace = <span class="hljs-number">1</span>;
        }
      }

      <span class="hljs-comment">/* if the last line wasn&apos;t ended with a newline before the EOF,
      we&apos;ll need to figure out if trailing space was printed here */</span>
      <span class="hljs-keyword">if</span> (spaceJustPrinted == <span class="hljs-number">1</span>) <span class="hljs-comment">/*if some trailing whitespace was printed...*/</span>
        retval = EXIT_FAILURE;

     <span class="hljs-keyword">return</span> retval;
}
</code></pre>
<p>&#x8FD9;&#x9053;&#x9898;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x5C06;&#x8F93;&#x5165;&#x5B58;&#x5230;&#x5B57;&#x7B26;&#x6570;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x6362;&#x884C;&#x7B26;&#x5F00;&#x59CB;&#x5F80;&#x524D;&#x5220;&#x53EF;&#x80FD;&#x7684;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x7B49;&#x3002;</p>
<blockquote>
<p>Exercise 1-19. Write a function <code>reverse(s)</code> that reverses the character string <code>s</code>. Use it to
write a program that reverses its input a line at a time.</p>
</blockquote>
<p>&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x7684;&#x601D;&#x8DEF;&#x662F;&#x628A;&#x884C;&#x672B;&#x6362;&#x884C;&#x7B26;&#x5148;&#x53BB;&#x6389;&#xFF0C;&#x7136;&#x540E;&#x5C06;&apos;\0&apos;&#x4E4B;&#x524D;&#x7684;&#x5B57;&#x7B26;&#x98A0;&#x5012;&#x987A;&#x5E8F;&#xFF0C;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x7684;&#x65F6;&#x5019;&#x518D;&#x8865;&#x4E0A;&#x6362;&#x884C;&#x7B26;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAX_LINE <span class="hljs-number">1024</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">discardnewline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[])</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">reverse</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[])</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getaline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[],<span class="hljs-keyword">int</span> lim)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">char</span> line[MAX_LINE];

    <span class="hljs-keyword">while</span>(getaline(line,MAX_LINE)&gt;<span class="hljs-number">0</span>)
    {
        discardnewline(line);
        reverse(line);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>,line);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">discardnewline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[])</span>
</span>{
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; s[i] != <span class="hljs-string">&apos;\0&apos;</span>; i++)
    {
        <span class="hljs-keyword">if</span>(s[i] == <span class="hljs-string">&apos;\n&apos;</span>)
            s[i] = <span class="hljs-string">&apos;\0&apos;</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">reverse</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[])</span>
</span>{
    <span class="hljs-keyword">char</span> ch;
    <span class="hljs-keyword">int</span> i,j;

    <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>; s[j] != <span class="hljs-string">&apos;\0&apos;</span>; j++)
        ;
    --j;
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; j; i++)
    {
        ch = s[i];
        s[i] = s[j];
        s[j] = ch;
        --j;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getaline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[], <span class="hljs-keyword">int</span> lim)</span>
</span>{
    <span class="hljs-keyword">int</span> c,i;
    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;
        i &lt; lim - <span class="hljs-number">1</span> &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span class="hljs-string">&apos;\n&apos;</span>;
        ++i)
        s[i] = c;
    <span class="hljs-keyword">if</span>(c ==<span class="hljs-string">&apos;\n&apos;</span>){
        s[i] = c;
        ++i;
    }
    s[i] = <span class="hljs-string">&apos;\0&apos;</span>;
    <span class="hljs-keyword">return</span> i;
}
</code></pre>
<p>&#x770B;&#x4E0A;&#x53BB;&#x884C;&#x672B;&#x7684;&apos;\n&apos;&#x786E;&#x5B9E;&#x6BD4;&#x8F83;&#x8BA8;&#x538C;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5148;&#x628A;&#x5B83;&#x53BB;&#x6389;&#xFF0C;&#x4F46;&#x662F;&#x4ED4;&#x7EC6;&#x60F3;&#x60F3;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x5FC5;&#x8981;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x7CBE;&#x7B80;
&#x7A0B;&#x5E8F;&#x5982;&#x4E0B;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAX_LINE <span class="hljs-number">1024</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">reverse</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[])</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getaline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[],<span class="hljs-keyword">int</span> lim)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">char</span> line[MAX_LINE];

    <span class="hljs-keyword">while</span>(getaline(line,MAX_LINE)&gt;<span class="hljs-number">0</span>)
    {
        reverse(line);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,line);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">reverse</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[])</span>
</span>{
    <span class="hljs-keyword">char</span> ch;
    <span class="hljs-keyword">int</span> i,j;

    <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>; s[j] != <span class="hljs-string">&apos;\n&apos;</span>; j++)
        ;
    --j;
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; j; i++)
    {
        ch = s[i];
        s[i] = s[j];
        s[j] = ch;
        --j;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getaline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> s[], <span class="hljs-keyword">int</span> lim)</span>
</span>{
    <span class="hljs-keyword">int</span> c,i;
    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;
        i &lt; lim - <span class="hljs-number">1</span> &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != <span class="hljs-string">&apos;\n&apos;</span>;
        ++i)
        s[i] = c;
    <span class="hljs-keyword">if</span>(c ==<span class="hljs-string">&apos;\n&apos;</span>){
        s[i] = c;
        ++i;
    }
    s[i] = <span class="hljs-string">&apos;\0&apos;</span>;
    <span class="hljs-keyword">return</span> i;
}
</code></pre>
<h1 id="&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x4E0E;&#x4F5C;&#x7528;&#x57DF;"><a name="&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x4E0E;&#x4F5C;&#x7528;&#x57DF;" class="plugin-anchor" href="#&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x4E0E;&#x4F5C;&#x7528;&#x57DF;"><span class="fa fa-link"></span></a>&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x4E0E;&#x4F5C;&#x7528;&#x57DF;</h1>
<p>&#x5728;<code>main()</code>&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;&#x4F8B;&#x5982;<code>line</code>,<code>longest</code>&#x7B49;&#x5BF9;&#x4E8E;<code>main()</code>&#x662F;<strong>&#x5C40;&#x90E8;(local)&#x53D8;&#x91CF;</strong>&#xFF0C;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x3002;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x4E5F;&#x662F;
&#x4E00;&#x6837;&#xFF0C;&#x4E0D;&#x540C;&#x51FD;&#x6570;&#x4E2D;&#x7684;<code>i</code>&#x5E76;&#x4E0D;&#x5177;&#x6709;&#x8054;&#x7CFB;&#x3002;&#x51FD;&#x6570;&#x5185;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x53EA;&#x5728;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x65F6;&#x521B;&#x5EFA;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x51FD;&#x6570;&#x9000;&#x51FA;&#x65F6;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x6D88;&#x5931;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x5E38;&#x79F0;
&#x4ED6;&#x4EEC;&#x4E3A;<strong>&#x81EA;&#x52A8;(automatic)&#x53D8;&#x91CF;</strong>&#x3002;&#x81EA;&#x52A8;&#x53D8;&#x91CF;&#x4E0D;&#x4F1A;&#x5728;&#x4E24;&#x6B21;&#x8C03;&#x7528;&#x4E4B;&#x95F4;&#x4FDD;&#x5B58;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x5728;&#x51FD;&#x6570;&#x5165;&#x53E3;&#x5904;&#x663E;&#x5F0F;&#x5730;&#x8BBE;&#x5B9A;&#x3002;</p>
<p>&#x9664;&#x4E86;&#x81EA;&#x52A8;&#x53D8;&#x91CF;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x79CD;<strong>&#x5916;&#x90E8;(external)</strong>&#x53D8;&#x91CF;&#xFF0C;&#x80FD;&#x591F;&#x88AB;&#x4EFB;&#x4F55;&#x51FD;&#x6570;&#x8BBF;&#x95EE;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x66FF;&#x4EE3;&#x53C2;&#x6570;&#x5217;&#x8868;&#x6765;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x8BAF;&#x3002;&#x8FD9;&#x6837;
&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x4FEE;&#x6539;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x540E;&#x5176;&#x503C;&#x90FD;&#x4F1A;&#x4FDD;&#x5B58;&#x3002;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x53EA;&#x80FD;&#x5728;&#x6240;&#x6709;&#x51FD;&#x6570;&#x4E4B;&#x5916;&#x5B9A;&#x4E49;&#x4E00;&#x6B21;&#xFF0C;&#x5E76;&#x5206;&#x914D;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;&#x5728;&#x51FD;&#x6570;&#x4E2D;&#x540C;&#x65F6;&#x5FC5;&#x987B;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x58F0;
&#x660E;&#x540E;&#x624D;&#x80FD;&#x8BBF;&#x95EE;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>extern</code>&#x8BED;&#x53E5;&#x663E;&#x5F0F;&#x58F0;&#x660E;&#xFF0C;&#x6216;&#x901A;&#x8FC7;&#x4E0A;&#x4E0B;&#x6587;&#x9690;&#x5F0F;&#x58F0;&#x660E;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x8BF4;&#x660E;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x4FEE;&#x6539;&#x6700;&#x957F;&#x884C;&#x7A0B;&#x5E8F;&#x5982;&#x4E0B;&#xFF0C;<code>max</code>&#x4E3A;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x3002;</p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> MAXLINE <span class="hljs-number">1000</span>    <span class="hljs-comment">/*  maximum input line size */</span></span>

<span class="hljs-keyword">int</span> max;    <span class="hljs-comment">/* maximum length seen so far */</span>
<span class="hljs-keyword">char</span> line[MAXLINE];        <span class="hljs-comment">/* current input line */</span>
<span class="hljs-keyword">char</span> longest[MAXLINE];    <span class="hljs-comment">/* longest line saved here */</span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getaline</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;

<span class="hljs-comment">/*print longest input line; specialized version */</span>
main()
{
    <span class="hljs-keyword">int</span> len;
    <span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> max;
    <span class="hljs-keyword">extern</span> <span class="hljs-keyword">char</span> longest[];

    max = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>((len = getaline()) &gt; <span class="hljs-number">0</span>)
        <span class="hljs-keyword">if</span>(len &gt; max){
            max = len;
            copy();
        }
    <span class="hljs-keyword">if</span> (max &gt; <span class="hljs-number">0</span>)    <span class="hljs-comment">/* there was a line */</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s&quot;</span>,longest);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* getaline: specialized version */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getaline</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> c,i;
    <span class="hljs-keyword">extern</span> <span class="hljs-keyword">char</span> line[];

    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>;i &lt; MAXLINE - <span class="hljs-number">1</span>
        &amp;&amp; (c=getchar()) != EOF &amp;&amp; c != <span class="hljs-string">&apos;\n&apos;</span>;++i)
        line[i] = c;
    <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&apos;\n&apos;</span>){
        line[i] = c;
        ++i;
    }
    line[i] = <span class="hljs-string">&apos;\0&apos;</span>;
    <span class="hljs-keyword">return</span> i;
}

<span class="hljs-comment">/* copy: specialized version */</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">copy</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">extern</span> <span class="hljs-keyword">char</span> line[],longest[];

    i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>((longest[i] = line[i]) != <span class="hljs-string">&apos;\0&apos;</span>)
        ++i;
}
</code></pre>
<p>&#x5728;&#x51FD;&#x6570;&#x4F7F;&#x7528;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x4E4B;&#x524D;&#xFF0C;&#x51FD;&#x6570;&#x5FC5;&#x987B;&#x8981;&#x77E5;&#x9053;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x58F0;&#x660E;&#x524D;&#x9762;&#x8981;&#x52A0;&#x4E0A;&#x5173;&#x952E;&#x5B57;<code>extern</code>&#x3002;&#x5728;&#x7279;&#x5B9A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code>extern</code>&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x8FD9;&#x65F6;
&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x9700;&#x8981;&#x5728;&#x51FD;&#x6570;&#x4E4B;&#x524D;&#x5B9A;&#x4E49;&#xFF0C;&#x8FD9;&#x6837;<code>main()</code>,<code>getaline()</code>,<code>copy()</code>&#x4E2D;&#x7684;<code>extern</code>&#x90FD;&#x662F;&#x591A;&#x4F59;&#x7684;&#x3002;</p>
<blockquote>
<p>In fact, common practice is to place definitions of all external
variables at the beginning of the source file, and then omit all extern declarations.</p>
</blockquote>
<p>&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x6709;&#x591A;&#x4E2A;&#x6E90;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x5728;<em>file1</em>&#x4E2D;&#x5E76;&#x4E14;&#x5728;<em>file2</em>&#x548C;<em>file3</em>&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x5728;<em>file2</em>&#x548C;<em>file3</em>&#x4E2D;&#x5FC5;&#x987B;&#x7528;<code>extern</code>
&#x58F0;&#x660E;&#x3002;&#x901A;&#x5E38;&#x5B9E;&#x8DF5;&#x4E0A;&#x5C06;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x548C;&#x51FD;&#x6570;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5373;&#x5934;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x4E0A;&#x9762;&#x7684;<code>getaline()</code>&#x548C;<code>copy()</code>&#x6CA1;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x4E3A;&#x4E86;&#x5411;&#x524D;&#x517C;&#x5BB9;&#xFF0C;ANSI C&#x4F7F;&#x7528;<code>void</code>&#x6765;&#x663E;&#x5F0F;&#x58F0;&#x660E;&#xFF0C;&#x4EE5;&#x5173;&#x95ED;&#x6240;&#x6709;&#x53C2;&#x6570;&#x5217;&#x8868;&#x68C0;&#x67E5;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;<strong>&#x5B9A;&#x4E49;(definitions)</strong>&#x548C;<strong>&#x58F0;&#x660E;(declarations)</strong>&#x7684;&#x533A;&#x522B;&#xFF0C;&#x5B9A;&#x4E49;&#x662F;&#x521B;&#x5EFA;&#x53D8;&#x91CF;&#x5E76;&#x5206;&#x914D;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF0C;&#x58F0;&#x660E;&#x662F;&#x8BF4;&#x660E;&#x53D8;&#x91CF;&#x6027;&#x8D28;&#x4F46;&#x4E0D;&#x5206;&#x914D;&#x5185;&#x5B58;&#x3002;</p>
<blockquote>
<p>The usual practice is to collect extern declarations of variables and functions in a
separate file, historically called a header, that is included by #include at the front of each
source file.</p>
</blockquote>
<p>&#x53E6;&#x5916;&#xFF0C;&#x8FC7;&#x5206;&#x4F9D;&#x8D56;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x597D;(&#x867D;&#x7136;&#x770B;&#x8D77;&#x6765;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x901A;&#x8BAF;&#xFF0C;&#x53C2;&#x6570;&#x5217;&#x8868;&#x53EF;&#x4EE5;&#x53D8;&#x77ED;&#x5E76;&#x4E14;&#x53D8;&#x91CF;&#x8BBF;&#x95EE;&#x66F4;&#x5BB9;&#x6613;)&#x3002;</p>
<blockquote>
<p>But external variables are always there even when you don&apos;t want them.
Relying too heavily on external variables is fraught with peril since it leads to programs
whose data connections are not all obvious - variables can be changed in unexpected and even
inadvertent ways, and the program is hard to modify.</p>
</blockquote>
<p>&#x8FD9;&#x4E00;&#x8282;&#x7684;&#x6700;&#x957F;&#x884C;&#x7248;&#x672C;&#x5E76;&#x6CA1;&#x6709;&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x597D;&#xFF0C;&#x6709;&#x4E24;&#x4E2A;&#x539F;&#x56E0;&#xFF1A;</p>
<ul>
<li>&#x8FC7;&#x5EA6;&#x4F9D;&#x8D56;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF1B;</li>
<li>&#x628A;&#x7A0B;&#x5E8F;&#x91CC;&#x7684;&#x53D8;&#x91CF;&#x653E;&#x5230;&#x51FD;&#x6570;&#x6A21;&#x5757;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x7834;&#x574F;&#x4E86;<code>getaline()</code>&#x548C;<code>copy()</code>&#x7684;&#x901A;&#x7528;&#x6027;&#x3002;</li>
</ul>
<blockquote>
<p>Exercise 1-20. Write a program <strong>detab</strong> that replaces tabs in the input with the proper number
of blanks to space to the next tab stop. Assume a fixed set of tab stops, say every n columns.
Should n be a variable or a symbolic parameter?</p>
<p>Exercise 1-21. Write a program entab that replaces strings of blanks by the minimum
number of tabs and blanks to achieve the same spacing. Use the same tab stops as for detab.
When either a tab or a single blank would suffice to reach a tab stop, which should be given
preference?</p>
<p>Exercise 1-22. Write a program to ``fold&apos;&apos; long input lines into two or more shorter lines after
the last non-blank character that occurs before the n-th column of input. Make sure your
program does something intelligent with very long lines, and if there are no blanks or tabs
before the specified column.</p>
<p>Exercise 1-23. Write a program to remove all comments from a C program. Don&apos;t forget to
handle quoted strings and character constants properly. <strong>C comments don&apos;t nest</strong>.</p>
<p>Exercise 1-24. Write a program to check a C program for rudimentary syntax errors like
unmatched parentheses, brackets and braces. Don&apos;t forget about quotes, both single and
double, escape sequences, and comments. (This program is hard if you do it in full
generality.)</p>
</blockquote>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Introduction"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>
 
<script src="gitbook/app.js"></script>
<script src="gitbook/app-ext.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"disqus":{"shortName":"oncebooks","useIdentifier":false},"ga":{"token":"UA-49487364-1","configuration":"auto"},"anchors":{},"yahei":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":[]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>
 
    <div class="footer"> </div>
    
</body>



</html>
