<!DOCTYPE HTML>
<html lang="en" >


<head>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>网页前端技术小组分享计划-Chapter 2 | 读书笔记</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="generator" content="GitBook 2.4.3">  
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon"> 
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-yahei/yahei.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
    
 
    
    
    <link rel="next" href="../cpp-primer/chapter3.html" />
    
    
    <link rel="prev" href="../cpp-primer/chapter1.html" />
    
 <script type="text/javascript" src="../https.js"></script>
    
</head>

<body class="theme-gray">
    <div class="header">
        <a aria-label="Table of Contents" class="btn-toggle-summary" href="#">
            <i class="fa fa-align-justify"></i>
        </a>
        <a class="logo">网页前端技术小组分享计划</a>
        <ul class="nav">
            
        </ul>
    </div>
     
    <div class="book" data-level="3.2" data-basepath=".." data-revision="Sun Nov 15 2015 09:18:58 GMT+0000 (UTC)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">

            
                
                    <a href="../index.html">

                        

                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="a-song-of-ice-and-fire/index.html">

            
                
                    <a href="../a-song-of-ice-and-fire/index.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        《A Song of Ice and Fire》
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="a-song-of-ice-and-fire/a-game-of-thrones.html">

            
                
                    <a href="../a-song-of-ice-and-fire/a-game-of-thrones.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        《A Game of Thrones》
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="clean-code/clean-code.html">

            
                
                    <a href="../clean-code/clean-code.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        《Clean Code》
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="cpp-primer/index.html">

            
                
                    <a href="../cpp-primer/index.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        《C++ primer》
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="cpp-primer/chapter1.html">

            
                
                    <a href="../cpp-primer/chapter1.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        Chapter 1
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="3.2" data-path="cpp-primer/chapter2.html">

            
                
                    <a href="../cpp-primer/chapter2.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        Chapter 2
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="cpp-primer/chapter3.html">

            
                
                    <a href="../cpp-primer/chapter3.html">

                        

                        <i class="fa fa-check"></i>
                        
                            
                        
                        Chapter 3
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    
    <a href="#" target="_blank" class="btn pull-right weibo-sharing-link sharing-link" data-sharing="weibo" aria-label="Weibo"><i class="fa fa-weibo"></i></a>
    
    


    
    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >读书笔记</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="chapter-2-variables-and-basic-types"><a name="chapter-2-variables-and-basic-types" class="plugin-anchor" href="#chapter-2-variables-and-basic-types"><span class="fa fa-link"></span></a>Chapter 2. Variables and Basic Types</h2>
<h3 id="exercise-2-1"><a name="exercise-2-1" class="plugin-anchor" href="#exercise-2-1"><span class="fa fa-link"></span></a>Exercise 2.1</h3>
<blockquote>
<p>What are the differences between <code>int</code>, <code>long</code>, <code>long long</code>, and <code>short</code>? Between an <code>unsigned</code> and a <code>signed</code> type? Between a <code>float</code> and a <code>double</code>?</p>
</blockquote>
<p>C++ &#x89C4;&#x5B9A;<code>short</code>&#x548C;<code>int</code>&#x81F3;&#x5C11;16&#x4F4D;(2&#x5B57;&#x8282;),<code>long</code>&#x81F3;&#x5C11;32&#x4F4D;(4&#x5B57;&#x8282;),&#xB7;<code>long long</code>&#x81F3;&#x5C11;64&#x4F4D;(8&#x5B57;&#x8282;)&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;<code>long long</code>&#x4E3A;C++11&#x65B0;&#x7279;&#x6027;&#x3002;</p>
<p><code>signed</code>&#x80FD;&#x8868;&#x793A;&#x8D1F;&#x6570;&#x3001;&#x6B63;&#x6570;&#x548C;&#x96F6;&#xFF0C;<code>unsigned</code>&#x53EA;&#x80FD;&#x8868;&#x793A;&#x975E;&#x8D1F;&#x6570;&#x3002;</p>
<p>C/C++&#x6807;&#x51C6;&#x5E76;&#x672A;&#x6307;&#x5B9A;<code>float</code>&#x3001;<code>double</code>&#x548C;<code>long double</code>&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x80FD;&#x6309;&#x7167;IEEE&#x53CC;&#x7CBE;&#x5EA6;&#x6D6E;&#x70B9;&#x6570;&#x6807;&#x51C6;&#x5B9E;&#x73B0;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;gcc&#x3001;MSVC&#x7B49;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#x548C;x86&#x3001;x64&#x3001;ARM&#x7B49;&#x5E73;&#x53F0;&#x4E0A;&#xFF0C;<code>float</code>&#x6309;&#x7167;IEEE&#x5355;&#x7CBE;&#x5EA6;&#x6D6E;&#x70B9;&#x6570;&#x5B9E;&#x73B0;(<code>binary32</code>)&#xFF0C;&#x5373;:1&#x7B26;&#x53F7;&#x4F4D;+8&#x6307;&#x6570;&#x4F4D;+23&#x5C3E;&#x6570;&#x4F4D;;<code>double</code>&#x6309;&#x7167;IEEE&#x53CC;&#x7CBE;&#x5EA6;&#x6D6E;&#x70B9;&#x6570;&#x5B9E;&#x73B0;(<code>binary64</code>),&#x5373;:1&#x7B26;&#x53F7;&#x4F4D;+11&#x6307;&#x6570;&#x4F4D;+52&#x5C3E;&#x6570;&#x4F4D;;32&#x4F4D;&#x7CFB;&#x7EDF;&#x4E0A;<code>long double</code>&#x6620;&#x5C04;&#x4E3A;<code>double</code>&#xFF0C;64&#x4F4D;&#x7CFB;&#x7EDF;&#x4E0A;<code>long double</code>&#x53EF;&#x80FD;&#x5305;&#x62EC;:1&#x7B26;&#x53F7;&#x4F4D;+15&#x6307;&#x6570;&#x4F4D;+64&#x5C3E;&#x6570;&#x4F4D;(10&#x5B57;&#x8282;)&#xFF0C;&#x53C2;&#x8003;<a href="https://msdn.microsoft.com/zh-cn/library/0b34tf65.aspx" target="_blank">MSVC&#x6D6E;&#x70B9;&#x8868;&#x793A;&#x5F62;&#x5F0F;</a>&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x5305;&#x62EC;:1&#x7B26;&#x53F7;&#x4F4D;+63&#x6307;&#x6570;&#x4F4D;+64&#x4F4D;&#x6570;&#x4F4D;(16&#x5B57;&#x8282;)&#xFF0C;&#x53C2;&#x8003;<a href="http://stackoverflow.com/questions/15176290/what-is-long-double-on-x86-64" target="_blank">What is long double on x86-64?</a>&#xFF1B;&#x5177;&#x4F53;<code>long double</code>&#x5360;&#x591A;&#x5C11;&#x5B57;&#x8282;&#xFF0C;&#x4F9D;&#x8D56;&#x4E8E;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#xFF0C;&#x4F46;&#x4E3B;&#x8981;&#x662F;10&#x5B57;&#x8282;&#x548C;16&#x5B57;&#x8282;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#x3002;</p>
<p>&#x7528;&#x6CD5;&#xFF1A;</p>
<ul>
<li>&#x91C7;&#x7528;<code>int</code>&#x505A;&#x6574;&#x578B;&#x8FD0;&#x7B97;&#xFF0C;<code>short</code>&#x5F80;&#x5F80;&#x8FC7;&#x5C0F;&#xFF0C;&#x800C;<code>long</code>&#x901A;&#x5E38;&#x548C;<code>long long</code>&#x5927;&#x5C0F;&#x76F8;&#x540C;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x636E;&#x503C;&#x8303;&#x56F4;&#x8D85;&#x8FC7;<code>int</code>&#xFF0C;&#x5219;&#x4F7F;&#x7528;<code>long long</code>&#x3002;</li>
<li>&#x6570;&#x636E;&#x503C;<strong>&#x4E0D;&#x53EF;&#x80FD;</strong>&#x4E3A;&#x8D1F;&#x6570;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;<code>unsigned</code></li>
<li>&#x76F4;&#x63A5;<code>double</code>&#x7528;&#x6765;&#x505A;&#x6D6E;&#x70B9;&#x6570;&#x8FD0;&#x7B97;&#xFF0C;<code>float</code>&#x7CBE;&#x5EA6;&#x5F80;&#x5F80;&#x4E0D;&#x591F;&#xFF0C;&#x5E76;&#x4E14;<code>double</code>&#x548C;<code>float</code>&#x7684;&#x8FD0;&#x7B97;&#x6D88;&#x8017;&#x76F8;&#x5DEE;&#x4E0D;&#x5927;&#xFF0C;&#x751A;&#x81F3;&#x5728;&#x4E00;&#x4E9B;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x53CC;&#x7CBE;&#x5EA6;&#x6D6E;&#x70B9;&#x8FD0;&#x7B97;&#x6027;&#x80FD;&#x8981;&#x9AD8;&#x4E8E;&#x5355;&#x7CBE;&#x5EA6;&#x6D6E;&#x70B9;&#x8FD0;&#x7B97;&#xFF0C;<code>long double</code>&#x4E0D;&#x592A;&#x5FC5;&#x8981;&#xFF0C;&#x5E76;&#x4E14;&#x8BA1;&#x7B97;&#x6D88;&#x8017;&#x5927;(&#x7279;&#x522B;&#x4F18;&#x5316;&#x8FC7;&#x7684;&#x673A;&#x5668;&#x9664;&#x5916;)&#x3002;</li>
</ul>
<p>&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="http://www.parashift.com/c++-faq/choosing-int-size.html" target="_blank">What are the criteria for choosing between short / int / long data types?</a></li>
<li><a href="http://stackoverflow.com/questions/2386772/difference-between-float-and-double" target="_blank">Difference between float and double</a></li>
<li>&#x672C;&#x4E66;2.1.1&#x8282;&#x7684;Advice: Deciding which Type to Use&#x3002;</li>
</ul>
<p>&#x7A0B;&#x5E8F;&#x9A8C;&#x8BC1;(g++ GCC-5.2.0)<code>ex2_1.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">short</span> short_data;
    <span class="hljs-keyword">int</span> int_data;
    <span class="hljs-keyword">long</span> long_data;
    <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> long_long_data;

    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> uint_data;
    <span class="hljs-keyword">signed</span> <span class="hljs-keyword">int</span> sint_data;

    <span class="hljs-keyword">float</span> float_data;
    <span class="hljs-keyword">double</span> double_data;
    <span class="hljs-keyword">long</span> <span class="hljs-keyword">double</span> long_double_data;

    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Size of datatypes:&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;short:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(short_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;int:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(int_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;long:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(long_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;long long:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(long_long_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;unsigned int:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(uint_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;signed int:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(sint_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;float:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(float_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;double:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(double_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;long double:&quot;</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(long_double_data) &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x7F16;&#x8BD1;&#x8FD0;&#x884C;</p>
<pre><code class="lang-bash">$ g++ -std=c++<span class="hljs-number">11</span> -o ex2_1 ex2_1.cpp
$ ./ex2_1
Size of datatypes:
short:<span class="hljs-number">2</span>
int:<span class="hljs-number">4</span>
long:<span class="hljs-number">8</span>
long long:<span class="hljs-number">8</span>
unsigned int:<span class="hljs-number">4</span>
signed int:<span class="hljs-number">4</span>
<span class="hljs-built_in">float</span>:<span class="hljs-number">4</span>
double:<span class="hljs-number">8</span>
long double:<span class="hljs-number">16</span>
</code></pre>
<p>&#x6CE8;&#x610F;&#x5230;<code>long double</code>&#x4E3A;16&#x5B57;&#x8282;,<code>long long</code>&#x548C;<code>long</code>&#x90FD;&#x662F;8&#x5B57;&#x8282;&#x3002;<code>unsigned</code>&#x548C;<code>signed</code>&#x4E0D;&#x5F71;&#x54CD;&#x5B57;&#x8282;&#x5927;&#x5C0F;&#xFF0C;&#x53EA;&#x5F71;&#x54CD;&#x56FA;&#x5B9A;&#x5B57;&#x8282;&#x957F;&#x5EA6;&#x4E0B;&#x80FD;&#x8868;&#x793A;&#x7684;&#x8303;&#x56F4;&#x3002;</p>
<h3 id="exercise-2-2"><a name="exercise-2-2" class="plugin-anchor" href="#exercise-2-2"><span class="fa fa-link"></span></a>Exercise 2.2</h3>
<blockquote>
<p>To calculate a mortgage payment, what types would you use
for the rate, principal, and payment? Explain why you selected each type.</p>
</blockquote>
<p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5FE7;&#x4F24;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9996;&#x5148;&#x53C2;&#x8003;&#x4E00;&#x4E0B; <strong>&#x6309;&#x63ED;&#x8D37;&#x6B3E;(mortgage)</strong> &#x662F;&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#x7684;:</p>
<ul>
<li><a href="http://fang.com/house/tools.htm" target="_blank">&#x623F;&#x8D37;&#x8BA1;&#x7B97;&#x5668;</a></li>
</ul>
<p>&#x901A;&#x5E38;&#x4F1A;&#x7CBE;&#x786E;&#x5230;&#x5C0F;&#x6570;&#x70B9;&#x540E;&#x4E24;&#x4F4D;&#xFF0C;&#x7528;<code>float</code>&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#xFF0C;&#x4F46;&#x662F;&#x6B63;&#x5982;&#x524D;&#x9762;&#x6240;&#x8BB2;&#xFF0C;&#x76F4;&#x63A5;&#x91C7;&#x7528;<code>double</code>&#x6216;&#x8BB8;&#x662F;&#x6700;&#x7701;&#x4E8B;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<h3 id="exercise-2-3"><a name="exercise-2-3" class="plugin-anchor" href="#exercise-2-3"><span class="fa fa-link"></span></a>Exercise 2.3</h3>
<blockquote>
<p>What output will the following code produce?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">unsigned</span> u = <span class="hljs-number">10</span>, u2 = <span class="hljs-number">42</span>;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; u2 - u &lt;&lt; <span class="hljs-built_in">std</span>::endl;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; u - u2 &lt;&lt; <span class="hljs-built_in">std</span>::endl;
<span class="hljs-keyword">int</span> i = <span class="hljs-number">10</span>, i2 = <span class="hljs-number">42</span>;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; i2 - i &lt;&lt; <span class="hljs-built_in">std</span>::endl;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; i - i2 &lt;&lt; <span class="hljs-built_in">std</span>::endl;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; i - u &lt;&lt; <span class="hljs-built_in">std</span>::endl;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; u - i &lt;&lt; <span class="hljs-built_in">std</span>::endl;
</code></pre>
</blockquote>
<p>&#x89C1;&#x4E0B;&#x9898;</p>
<h3 id="exercise-2-4"><a name="exercise-2-4" class="plugin-anchor" href="#exercise-2-4"><span class="fa fa-link"></span></a>Exercise 2.4</h3>
<blockquote>
<p>Write a program to check whether your predictions were
correct. If not, study this section until you understand what the problem is.</p>
</blockquote>
<p>&#x8F93;&#x51FA;(gcc 5.2.0):</p>
<pre><code>32
4294967264
32
-32
0
0
</code></pre><h3 id="exercise-2-5"><a name="exercise-2-5" class="plugin-anchor" href="#exercise-2-5"><span class="fa fa-link"></span></a>Exercise 2.5</h3>
<blockquote>
<p>Determine the type of each of the following literals. Explain
the differences among the literals in each of the four examples:</p>
<ul>
<li>(a) &apos;a&apos;, L&apos;a&apos;, &quot;a&quot;, L&quot;a&quot;</li>
<li>(b) 10, 10u, 10L, 10uL, 012, 0xC</li>
<li>(c) 3.14, 3.14f, 3.14L</li>
<li>(d) 10, 10u, 10., 10e-2</li>
</ul>
</blockquote>
<p>(a): &#x5B57;&#x9762;&#x5B57;&#x7B26;, &#x5BBD;&#x5B57;&#x9762;&#x5B57;&#x7B26;, &#x5B57;&#x9762;&#x5B57;&#x7B26;&#x4E32;, &#x5BBD;&#x5B57;&#x9762;&#x5B57;&#x7B26;&#x4E32;.</p>
<p>(b): &#x5341;&#x8FDB;&#x5236;, unsigned&#x5341;&#x8FDB;&#x5236;, long&#x5341;&#x8FDB;&#x5236;, unsigned long&#x5341;&#x8FDB;&#x5236;, &#x516B;&#x8FDB;&#x5236;, &#x5341;&#x516D;&#x8FDB;&#x5236;.</p>
<p>(c): double, float, long double.</p>
<p>(d): &#x5341;&#x8FDB;&#x5236;, unsigned&#x5341;&#x8FDB;&#x5236;, double, double.</p>
<h3 id="exercise-2-6"><a name="exercise-2-6" class="plugin-anchor" href="#exercise-2-6"><span class="fa fa-link"></span></a>Exercise 2.6</h3>
<blockquote>
<p>What, if any, are the differences between the following
definitions:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> month = <span class="hljs-number">9</span>, day = <span class="hljs-number">7</span>;
<span class="hljs-keyword">int</span> month = <span class="hljs-number">09</span>, day = <span class="hljs-number">07</span>;
</code></pre>
</blockquote>
<p>&#x7B2C;&#x4E00;&#x884C;&#x4E3A;&#x5341;&#x8FDB;&#x5236;&#x6574;&#x578B;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x884C;<code>int month = 09</code>&#x9519;&#x8BEF;&#xFF0C;&#x56E0;&#x4E3A;&#x516B;&#x8FDB;&#x5236;&#x6570;&#x4E0D;&#x63A5;&#x53D7;<code>9</code>&#xFF0C;<code>day</code>&#x4E3A;&#x516B;&#x8FDB;&#x5236;&#x6574;&#x578B;</p>
<pre><code class="lang-bash">ex2_6.cpp:<span class="hljs-number">5</span>:<span class="hljs-number">17</span>: &#x9519;&#x8BEF;&#xFF1A;invalid digit <span class="hljs-string">&quot;9&quot;</span> <span class="hljs-keyword">in</span> octal constant
     int month = <span class="hljs-number">09</span>, day = <span class="hljs-number">07</span>;
                 ^
</code></pre>
<h3 id="exercise-2-7"><a name="exercise-2-7" class="plugin-anchor" href="#exercise-2-7"><span class="fa fa-link"></span></a>Exercise 2.7</h3>
<blockquote>
<p>What values do these literals represent? What type does each
have?</p>
<ul>
<li>(a) &quot;Who goes with F\145rgus?\012&quot;</li>
<li>(b) 3.14e1L</li>
<li>(c) 1024f</li>
<li>(d) 3.14L</li>
</ul>
</blockquote>
<p>(a): Who goes with Fergus?(new line) &#x5B57;&#x7B26;&#x4E32;</p>
<p>&#x53C2;&#x8003;:</p>
<blockquote>
<p><a href="http://www.theasciicode.com.ar/" target="_blank">ASCII Table</a></p>
</blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>:&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#x8F93;&#x51FA;&#x65F6;<code>\x</code>&#x540E;&#x63A5;&#x6570;&#x5B57;&#x6309;&#x7167;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x8BA1;&#x7B97;&#xFF0C;<code>\</code>&#x540E;&#x63A5;&#x6570;&#x5B57;&#x6309;&#x7167; <strong>&#x516B;&#x8FDB;&#x5236;</strong> &#x8BA1;&#x7B97;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5341;&#x8FDB;&#x5236;&#x8BA1;&#x7B97;&#xFF0C;<code>\0</code>&#x540E;&#x63A5;&#x6570;&#x5B57;&#x4E5F;&#x6309;&#x7167;&#x516B;&#x8FDB;&#x5236;&#x8BA1;&#x7B97;&#x3002;
&#x6240;&#x4EE5;<code>\145</code>&#x5B9E;&#x9645;&#x4E0A;&#x5BF9;&#x5E94;64+4*8+5*1=101&#xFF0C;&#x5BF9;&#x5E94;&#x5B57;&#x6BCD;<code>e</code>&#x3002;</p>
<p>(b): 31.4 <code>long double</code></p>
<p>(c): 1024 <code>float</code></p>
<p>(d): 3.14 <code>long double</code></p>
<h3 id="exercise-2-8"><a name="exercise-2-8" class="plugin-anchor" href="#exercise-2-8"><span class="fa fa-link"></span></a>Exercise 2.8</h3>
<blockquote>
<p>Using escape sequences, write a program to print 2M followed
by a newline. Modify the program to print 2, then a tab, then an M, followed
by a newline.</p>
</blockquote>
<p>&#x540C;&#x6837;&#x6CE8;&#x610F;&#xFF0C;&#x662F;&#x6309;&#x7167;&#x516B;&#x8FDB;&#x5236;&#x7ED9;&#x51FA;ASCII&#x7801;&#x7684;&#xFF0C;&#x6E90;&#x7801;<code>ex2_8.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\62\115\012&quot;</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;\62\t\115\012&quot;</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 id="exercise-2-9"><a name="exercise-2-9" class="plugin-anchor" href="#exercise-2-9"><span class="fa fa-link"></span></a>Exercise 2.9</h3>
<blockquote>
<p>Explain the following definitions. For those that are illegal,
explain what&#x2019;s wrong and how to correct it.</p>
<ul>
<li>(a) std::cin &gt;&gt; int input_value;</li>
<li>(b) int i = { 3.14 };</li>
<li>(c) double salary = wage = 9999.99;</li>
<li>(d) int i = 3.14;</li>
</ul>
</blockquote>
<p>(a): &#x9519;&#x8BEF;&#xFF1A;expected primary-expression before &#x2018;int&#x2019;&#xFF0C;&#x5148;&#x5B9A;&#x4E49;&#x518D;&#x4F7F;&#x7528;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> input_value = <span class="hljs-number">0</span>;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; input_value;
</code></pre>
<p>(b): &#x6CA1;&#x6709;&#x5F00;&#x542F;<code>-std=c++11</code>&#x65F6;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x53EA;&#x4F1A;&#x7ED9;&#x51FA;&#x4E00;&#x4E2A;&#x8B66;&#x544A;&#xFF0C;&#x63D0;&#x793A;: warning: implicit conversion from &apos;double&apos; to &apos;int&apos; changes value from 3.14 to 3&#x3002;&#x5F00;&#x542F;&#x4E86;<code>-std=c++11</code>&#x540E;&#xFF0C;&#x7531;&#x4E8E;<strong>&#x5217;&#x8868;&#x521D;&#x59CB;&#x5316;</strong>&#x7279;&#x6027;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x63D0;&#x793A;&#x65E0;&#x6CD5;&#x5C06;<code>double</code>&#x8F6C;&#x6362;&#x4E3A;<code>int</code></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">double</span> i = { <span class="hljs-number">3.14</span> };
</code></pre>
<p>(c): &#x82E5;&#x5DF2;&#x7ECF;&#x58F0;&#x660E;&#x4E86;<code>wage</code>&#x53D8;&#x91CF;&#xFF0C;&#x4E0D;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x63D0;&#x793A;&#x4F7F;&#x7528;&#x4E86;&#x6CA1;&#x6709;&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;<code>wage</code></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">double</span> wage;
<span class="hljs-keyword">double</span> salary = wage = <span class="hljs-number">9999.99</span>;
</code></pre>
<p>(d): &#x4E0D;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x4F46;&#x4F1A;&#x88AB;&#x622A;&#x65AD;&#x4E3A;3&#x8D4B;&#x503C;&#x7ED9;<code>i</code></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">double</span> i = <span class="hljs-number">3.14</span>;
</code></pre>
<h3 id="exercise-2-10"><a name="exercise-2-10" class="plugin-anchor" href="#exercise-2-10"><span class="fa fa-link"></span></a>Exercise 2.10</h3>
<blockquote>
<p>What are the initial values, if any, of each of the following variables?</p>
<pre><code class="lang-cpp"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> global_str;
<span class="hljs-keyword">int</span> global_int;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">int</span> local_int;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> local_str;
}
</code></pre>
</blockquote>
<p><code>global_str</code>&#x4E3A;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x9ED8;&#x8BA4;&#x521D;&#x59CB;&#x5316;&#x4E3A;&#x7A7A;<code>std::string</code>, <code>global_int</code>&#x4E3A;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x9ED8;&#x8BA4;&#x521D;&#x59CB;&#x5316;&#x4E3A;0
<code>local_int</code>&#x4E3A;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x672A;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5177;&#x6709;&#x4E0D;&#x786E;&#x5B9A;&#x503C;&#x3002;
<code>local_str</code>&#x4E3A;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x672A;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x503C;&#x4E3A;<code>std::string</code>&#x7C7B;&#x5B9A;&#x4E49;&#x7684;&#x7A7A;<code>std::string</code></p>
<p><strong>&#x6CE8;&#x610F;</strong>: &#x5B9A;&#x4E49;&#x4E8E;&#x51FD;&#x6570;&#x4F53;&#x5185;&#x7684;&#x5185;&#x7F6E;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5219;&#x5176;&#x503C;&#x672A;&#x5B9A;&#x4E49;&#x3002;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x5730;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5219;&#x5176;&#x503C;&#x7531;&#x7C7B;&#x51B3;&#x5B9A;&#x3002;<strong>&#x5EFA;&#x8BAE;&#x521D;&#x59CB;&#x5316;&#x6BCF;&#x4E00;&#x4E2A;&#x5185;&#x7F6E;&#x7C7B;&#x578B;&#x7684;&#x53D8;&#x91CF;</strong>&#x3002;</p>
<h3 id="exercise-2-11"><a name="exercise-2-11" class="plugin-anchor" href="#exercise-2-11"><span class="fa fa-link"></span></a>Exercise 2.11</h3>
<blockquote>
<p>Explain whether each of the following is a declaration or a
definition:</p>
<pre><code class="lang-cpp">(a) <span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> ix = <span class="hljs-number">1024</span>;
(b) <span class="hljs-keyword">int</span> iy;
(c) <span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> iz;
</code></pre>
</blockquote>
<p>(a): &#x5B9A;&#x4E49;(<code>extern</code>&#x4F46;&#x662F;&#x521D;&#x59CB;&#x5316;&#x4E86;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5B9A;&#x4E49;)</p>
<p>(b): &#x5B9A;&#x4E49;</p>
<p>(c): &#x58F0;&#x660E;</p>
<p><strong>&#x6CE8;&#x610F;</strong>: &#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x88AB;&#x591A;&#x6B21;&#x58F0;&#x660E;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x80FD;&#x5B9A;&#x4E49;&#x4E00;&#x6B21;&#x3002;</p>
<h3 id="exercise-2-12"><a name="exercise-2-12" class="plugin-anchor" href="#exercise-2-12"><span class="fa fa-link"></span></a>Exercise 2.12</h3>
<blockquote>
<p>Which, if any, of the following names are invalid?</p>
<pre><code class="lang-cpp">(a) <span class="hljs-keyword">int</span> <span class="hljs-keyword">double</span> = <span class="hljs-number">3.14</span>;
(b) <span class="hljs-keyword">int</span> _;
(c) <span class="hljs-keyword">int</span> <span class="hljs-keyword">catch</span>-<span class="hljs-number">22</span>;
(d) <span class="hljs-keyword">int</span> <span class="hljs-number">1</span>_or_2 = <span class="hljs-number">1</span>;
(e) <span class="hljs-keyword">double</span> Double = <span class="hljs-number">3.14</span>;
</code></pre>
</blockquote>
<p><code>a</code>(&#x4F7F;&#x7528;&#x4E86;&#x5173;&#x952E;&#x5B57;<code>double</code>), <code>c</code>(&#x4F7F;&#x7528;&#x4E86;<code>-</code>), <code>d</code>(&#x4EE5;&#x6570;&#x5B57;&#x5F00;&#x5934;)</p>
<h3 id="exercise-2-13"><a name="exercise-2-13" class="plugin-anchor" href="#exercise-2-13"><span class="fa fa-link"></span></a>Exercise 2.13</h3>
<blockquote>
<p>What is the value of j in the following program?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">42</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">int</span> i = <span class="hljs-number">100</span>;
    <span class="hljs-keyword">int</span> j = i;
}
</code></pre>
</blockquote>
<p><code>100</code>, &#x5168;&#x5C40;&#x53D8;&#x91CF;&#x503C;&#x88AB;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x503C;&#x8986;&#x76D6;&#x3002;</p>
<h3 id="exercise-2-14"><a name="exercise-2-14" class="plugin-anchor" href="#exercise-2-14"><span class="fa fa-link"></span></a>Exercise 2.14</h3>
<blockquote>
<p>Is the following program legal? If so, what values are printed?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">100</span>, sum = <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i != <span class="hljs-number">10</span>; ++i)
    sum += i;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; sum &lt;&lt; <span class="hljs-built_in">std</span>::endl;
</code></pre>
</blockquote>
<p>&#x5408;&#x6CD5;&#xFF0C;&#x8F93;&#x51FA;&#x4E3A;</p>
<pre><code class="lang-bash"><span class="hljs-number">100</span> <span class="hljs-number">45</span>
</code></pre>
<p><strong>&#x6CE8;&#x610F;</strong>: &#x8FD9;&#x6837;&#x5199;&#x4EE3;&#x7801;&#x5BB9;&#x6613;&#x6328;&#x63CD;</p>
<h3 id="exercise-2-15"><a name="exercise-2-15" class="plugin-anchor" href="#exercise-2-15"><span class="fa fa-link"></span></a>Exercise 2.15</h3>
<blockquote>
<p>Which of the following definitions, if any, are invalid? Why?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> ival = <span class="hljs-number">1.01</span>;
<span class="hljs-keyword">int</span> &amp;rval1 = <span class="hljs-number">1.01</span>;
<span class="hljs-keyword">int</span> &amp;rval2 = ival;
<span class="hljs-keyword">int</span> &amp;rval3;
</code></pre>
</blockquote>
<p>(a): &#x5408;&#x6CD5;</p>
<p>(b): &#x975E;&#x6CD5;&#xFF0C;&#x5F15;&#x7528;&#x521D;&#x59CB;&#x503C;&#x5FC5;&#x987B;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;</p>
<p>(c): &#x5408;&#x6CD5;</p>
<p>(d): &#x975E;&#x6CD5;&#xFF0C;&#x5F15;&#x7528;&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;</p>
<h3 id="exercise-2-16"><a name="exercise-2-16" class="plugin-anchor" href="#exercise-2-16"><span class="fa fa-link"></span></a>Exercise 2.16</h3>
<blockquote>
<p>Which, if any, of the following assignments are invalid? If they are valid, explain what they do.</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, &amp;r1 = i; <span class="hljs-keyword">double</span> d = <span class="hljs-number">0</span>, &amp;r2 = d;
r2 = <span class="hljs-number">3.14159</span>;
r2 = r1;
i = r2;
r1 = d;
</code></pre>
</blockquote>
<p>(a): &#x5408;&#x6CD5;&#xFF0C;&#x7ED9;<code>d</code>&#x8D4B;&#x503C;3.14159</p>
<p>(b): &#x5408;&#x6CD5;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x8F6C;&#x6362;&#x4E3A;<code>double</code></p>
<p>(c): &#x5408;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x88AB;&#x622A;&#x65AD;</p>
<p>(d): &#x5408;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x88AB;&#x622A;&#x65AD;</p>
<h3 id="exercise-2-17"><a name="exercise-2-17" class="plugin-anchor" href="#exercise-2-17"><span class="fa fa-link"></span></a>Exercise 2.17</h3>
<blockquote>
<p>What does the following code print?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i, &amp;ri = i;
i = <span class="hljs-number">5</span>; ri = <span class="hljs-number">10</span>;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; ri &lt;&lt; <span class="hljs-built_in">std</span>::endl;
</code></pre>
</blockquote>
<p>&#x8F93;&#x51FA;</p>
<pre><code class="lang-bash"><span class="hljs-number">10</span> <span class="hljs-number">10</span>
</code></pre>
<h3 id="exercise-2-18"><a name="exercise-2-18" class="plugin-anchor" href="#exercise-2-18"><span class="fa fa-link"></span></a>Exercise 2.18</h3>
<blockquote>
<p>Write code to change the value of a pointer. Write code to
change the value to which the pointer points.</p>
</blockquote>
<p>&#x6E90;&#x7801;<code>ex2_18.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> a = <span class="hljs-number">0</span>, b = <span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> *p1 = &amp;a, *p2 = p1;

<span class="hljs-comment">// &#x4FEE;&#x6539;&#x6307;&#x9488;p1&#x7684;&#x503C;</span>
p1 = &amp;b;
<span class="hljs-comment">// &#x4FEE;&#x6539;p2&#x6307;&#x5411;&#x7684;&#x503C;</span>
*p2 = b;
</code></pre>
<h3 id="exercise-2-19"><a name="exercise-2-19" class="plugin-anchor" href="#exercise-2-19"><span class="fa fa-link"></span></a>Exercise 2.19</h3>
<blockquote>
<p>Explain the key differences between pointers and references.</p>
</blockquote>
<p><strong>&#x5B9A;&#x4E49;</strong>:</p>
<ul>
<li>&#x6307;&#x9488;&#x6307;&#x5411;&#x5176;&#x5B83;&#x5BF9;&#x8C61;</li>
<li>&#x5F15;&#x7528;&#x662F;&#x5BF9;&#x8C61;&#x7684;&#x522B;&#x540D;</li>
</ul>
<p><strong>&#x533A;&#x522B;</strong>:</p>
<ol>
<li>&#x5F15;&#x7528;&#x662F; <strong>&#x5DF2;&#x7ECF;&#x5B58;&#x5728;</strong> &#x7684;&#x5BF9;&#x8C61;&#x7684;&#x522B;&#x540D;&#xFF0C;&#x672C;&#x8EAB;&#x4E0D;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x6307;&#x9488;&#x672C;&#x8EAB;&#x662F;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x4E00;&#x65E6;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5F15;&#x7528;&#x548C;&#x5BF9;&#x8C61;&#x7ED1;&#x5B9A;&#xFF0C;&#x4E0D;&#x80FD;&#x518D;&#x7ED1;&#x5B9A;&#x5230;&#x5176;&#x5B83;&#x5BF9;&#x8C61;&#xFF0C;&#x6307;&#x9488;&#x53EF;&#x4EE5;&#x88AB;&#x8D4B;&#x503C;&#x548C;&#x62F7;&#x8D1D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5411;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x5F15;&#x7528;&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x6307;&#x9488;&#x5728;&#x5B9A;&#x4E49;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x5FC5;&#x521D;&#x59CB;&#x5316;</li>
</ol>
<p><strong>&#x4F7F;&#x7528;&#x5EFA;&#x8BAE;</strong>:</p>
<ul>
<li>Use reference wherever you can, pointers wherever you must.</li>
<li>Avoid pointers until you can&apos;t.</li>
</ul>
<h3 id="exercise-2-20"><a name="exercise-2-20" class="plugin-anchor" href="#exercise-2-20"><span class="fa fa-link"></span></a>Exercise 2.20</h3>
<blockquote>
<p>What does the following program do?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">42</span>;
<span class="hljs-keyword">int</span> *p1 = &amp;i; *p1 = *p1 * *p1;
</code></pre>
</blockquote>
<p><code>p1</code>&#x6307;&#x5411;&#x6574;&#x578B;&#x53D8;&#x91CF;<code>i</code>&#xFF0C;<code>i</code>&#x7684;&#x503C;&#x53D8;&#x4E3A;1764(42*42)&#x3002;</p>
<h3 id="exercise-2-21"><a name="exercise-2-21" class="plugin-anchor" href="#exercise-2-21"><span class="fa fa-link"></span></a>Exercise 2.21</h3>
<blockquote>
<p>Explain each of the following definitions. Indicate whether any are illegal and, if so, why.</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;
(a) <span class="hljs-keyword">double</span>* dp = &amp;i;
(b) <span class="hljs-keyword">int</span> *ip = i;
(c) <span class="hljs-keyword">int</span> *p = &amp;i;
</code></pre>
</blockquote>
<p>(a): &#x975E;&#x6CD5;&#xFF0C;&#x4E0D;&#x80FD;&#x7528;<code>int *</code>&#x7C7B;&#x578B;&#x521D;&#x59CB;&#x5316;<code>double *</code>&#x7C7B;&#x578B;</p>
<p>(b): &#x975E;&#x6CD5;&#xFF0C;&#x4E0D;&#x80FD;&#x7528;<code>int</code>&#x7C7B;&#x578B;&#x521D;&#x59CB;&#x5316;<code>int *</code></p>
<p>(c): &#x5408;&#x6CD5;</p>
<h3 id="exercise-2-22"><a name="exercise-2-22" class="plugin-anchor" href="#exercise-2-22"><span class="fa fa-link"></span></a>Exercise 2.22</h3>
<p>Assuming p is a pointer to int, explain the following code:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">if</span> (p) <span class="hljs-comment">// ...</span>
<span class="hljs-keyword">if</span> (*p) <span class="hljs-comment">// ...</span>
</code></pre>
<p>&#x7B2C;&#x4E00;&#x884C;&#x5224;&#x65AD;<code>p</code>&#x662F;&#x5426;&#x4E3A;<code>nullptr</code></p>
<p>&#x7B2C;&#x4E8C;&#x884C;&#x5224;&#x65AD;<code>p</code>&#x6307;&#x5411;&#x7684;&#x53D8;&#x91CF;&#x662F;&#x5426;&#x975E;&#x96F6;</p>
<h3 id="exercise-2-23"><a name="exercise-2-23" class="plugin-anchor" href="#exercise-2-23"><span class="fa fa-link"></span></a>Exercise 2.23</h3>
<blockquote>
<p>Given a pointer p, can you determine whether p points to a valid object? If so, how? If not, why not?</p>
</blockquote>
<p>&#x4E0D;&#x80FD;&#x3002;</p>
<h3 id="exercise-2-24"><a name="exercise-2-24" class="plugin-anchor" href="#exercise-2-24"><span class="fa fa-link"></span></a>Exercise 2.24</h3>
<blockquote>
<p>Why is the initialization of p legal but that of lp illegal?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">42</span>;
<span class="hljs-keyword">void</span> *p = &amp;i;
<span class="hljs-keyword">long</span> *lp = &amp;i;
</code></pre>
</blockquote>
<p>&#x7EE7;&#x627F;&#x4E8E;C&#x7684;<code>void*</code>&#x53EF;&#x4EE5;&#x6307;&#x5411;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x6545;<code>p</code>&#x5408;&#x6CD5;&#x3002;</p>
<p>&#x800C;C++&#x89C4;&#x5B9A;&#x4E0D;&#x80FD;&#x9690;&#x5F0F;&#x5730;&#x8FDB;&#x884C;<code>int *</code>&#x5411;<code>long *</code>&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x6545;<code>lp</code>&#x975E;&#x6CD5;&#x3002;</p>
<h3 id="exercise-2-25"><a name="exercise-2-25" class="plugin-anchor" href="#exercise-2-25"><span class="fa fa-link"></span></a>Exercise 2.25</h3>
<blockquote>
<p>Determine the types and values of each of the following
variables.</p>
<pre><code class="lang-cpp">(a) <span class="hljs-keyword">int</span>* ip, i, &amp;r = i;
(b) <span class="hljs-keyword">int</span> i, *ip = <span class="hljs-number">0</span>;
(c) <span class="hljs-keyword">int</span>* ip, ip2;
</code></pre>
</blockquote>
<p>(a): <code>ip</code> &#x6307;&#x5411;<code>int</code>&#x578B;&#x53D8;&#x91CF;&#x7684;&#x6307;&#x9488;&#xFF0C;<code>i</code>&#x4E3A;<code>int</code>&#x578B;&#x53D8;&#x91CF;&#xFF0C;<code>r</code>&#x4E3A;&#x5BF9;<code>i</code>&#x7684;&#x5F15;&#x7528;</p>
<p>(b): <code>ip</code> &#x4E3A;&#x7A7A;&#x6307;&#x9488;,<code>i</code>&#x4E3A;<code>int</code>&#x578B;&#x53D8;&#x91CF;</p>
<p>(c): <code>ip</code> &#x6307;&#x5411;<code>int</code>&#x578B;&#x53D8;&#x91CF;&#x7684;&#x6307;&#x9488;&#xFF0C;<code>ip2</code>&#x4E3A;<code>int</code>&#x578B;&#x53D8;&#x91CF;</p>
<p><strong>&#x6CE8;&#x610F;</strong> : <code>*</code>&#x4E3A;&#x7C7B;&#x578B;&#x4FEE;&#x9970;&#x7B26;&#xFF0C;&#x53EA;&#x5BF9;<code>ip</code>&#x8D77;&#x4F5C;&#x7528;&#x3002;</p>
<h3 id="exercise-2-26"><a name="exercise-2-26" class="plugin-anchor" href="#exercise-2-26"><span class="fa fa-link"></span></a>Exercise 2.26</h3>
<blockquote>
<p>Which of the following are legal? For those that are illegal,
explain why.</p>
<pre><code class="lang-cpp">(a) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> buf;
(b) <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;        
(c) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = cnt;
(d) ++cnt; ++sz;
</code></pre>
</blockquote>
<p>(a): &#x975E;&#x6CD5;&#xFF0C;<code>const</code> &#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;</p>
<p>(b): &#x5408;&#x6CD5;</p>
<p>(c): &#x5408;&#x6CD5;</p>
<p>(d): &#x975E;&#x6CD5;&#xFF0C;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;<code>const</code>&#x5BF9;&#x8C61;<code>sz</code></p>
<h3 id="exercise-2-27"><a name="exercise-2-27" class="plugin-anchor" href="#exercise-2-27"><span class="fa fa-link"></span></a>Exercise 2.27</h3>
<blockquote>
<p>Which of the following initializations are legal? Explain why.</p>
<pre><code class="lang-cpp">(a) <span class="hljs-keyword">int</span> i = -<span class="hljs-number">1</span>, &amp;r = <span class="hljs-number">0</span>;         
(b) <span class="hljs-keyword">int</span> *<span class="hljs-keyword">const</span> p2 = &amp;i2;       
(c) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> i = -<span class="hljs-number">1</span>, &amp;r = <span class="hljs-number">0</span>;  
(d) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *<span class="hljs-keyword">const</span> p3 = &amp;i2;
(e) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *p1 = &amp;i2;       
(f) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> &amp;<span class="hljs-keyword">const</span> r2;       
(g) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> i2 = i, &amp;r = i;
</code></pre>
</blockquote>
<p>(a): &#x975E;&#x6CD5;&#xFF0C;<code>r</code>&#x5FC5;&#x987B;&#x5F15;&#x7528;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;</p>
<p>(b): &#x5408;&#x6CD5;</p>
<p>(c): &#x5408;&#x6CD5;</p>
<p>(d): &#x5408;&#x6CD5;</p>
<p>(e): &#x5408;&#x6CD5;</p>
<p>(f): &#x975E;&#x6CD5;&#xFF0C;<code>const</code>&#x9650;&#x5B9A;&#x7B26;&#x4E0D;&#x80FD;&#x5E94;&#x7528;&#x5230;<code>const int&amp;</code>&#x4E0A;</p>
<p>(g): &#x5408;&#x6CD5;</p>
<h3 id="exercise-2-28"><a name="exercise-2-28" class="plugin-anchor" href="#exercise-2-28"><span class="fa fa-link"></span></a>Exercise 2.28</h3>
<blockquote>
<p>Explain the following definitions. Identify any that are illegal.</p>
<pre><code class="lang-cpp">(a) <span class="hljs-keyword">int</span> i, *<span class="hljs-keyword">const</span> cp;       <span class="hljs-comment">// illegal, cp must initialize.</span>
(b) <span class="hljs-keyword">int</span> *p1, *<span class="hljs-keyword">const</span> p2;     <span class="hljs-comment">// illegal, p2 must initialize.</span>
(c) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> ic, &amp;r = ic;  <span class="hljs-comment">// illegal, ic must initialize.</span>
(d) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *<span class="hljs-keyword">const</span> p3;    <span class="hljs-comment">// illegal, p3 must initialize.</span>
(e) <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *p;           <span class="hljs-comment">// legal. a pointer to const int.</span>
</code></pre>
</blockquote>
<p>(a): &#x975E;&#x6CD5;&#xFF0C;<code>cp</code>&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;</p>
<p>(b): &#x975E;&#x6CD5;&#xFF0C;<code>p2</code>&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;</p>
<p>(c): &#x975E;&#x6CD5;&#xFF0C;<code>ic</code>&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;</p>
<p>(d): &#x975E;&#x6CD5;&#xFF0C;<code>p3</code>&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;</p>
<p>(e): &#x5408;&#x6CD5;&#xFF0C;<code>p</code>&#x6307;&#x5411;<code>const int</code></p>
<h3 id="exercise-2-29"><a name="exercise-2-29" class="plugin-anchor" href="#exercise-2-29"><span class="fa fa-link"></span></a>Exercise 2.29</h3>
<blockquote>
<p>Uing the variables in the previous exercise, which of the
following assignments are legal? Explain why.</p>
<pre><code class="lang-cpp">(a)i = ic;     
(b)p1 = p3;    
(c)p1 = &amp;ic;   
(d)p3 = &amp;ic;   
(e)p2 = p1;    
(f)ic = *p3;
</code></pre>
</blockquote>
<p>(a): &#x5408;&#x6CD5;</p>
<p>(b): &#x975E;&#x6CD5;&#xFF0C;<code>p3</code>&#x6307;&#x5411;<code>const int</code>&#xFF0C;<code>p1</code>&#x6307;&#x5411;<code>int</code></p>
<p>(c): &#x975E;&#x6CD5;&#xFF0C;<code>ic</code>&#x4E3A;<code>const int</code></p>
<p>(d): &#x975E;&#x6CD5;&#xFF0C;<code>p3</code>&#x4E3A;<code>const</code>&#x6307;&#x9488;</p>
<p>(e): &#x975E;&#x6CD5;&#xFF0C;<code>p2</code>&#x4E3A;<code>const</code>&#x6307;&#x9488;</p>
<p>(f): &#x975E;&#x6CD5;&#xFF0C;<code>ic</code>&#x4E3A;<code>const int</code></p>
<h3 id="exercise-2-30"><a name="exercise-2-30" class="plugin-anchor" href="#exercise-2-30"><span class="fa fa-link"></span></a>Exercise 2.30</h3>
<blockquote>
<p>For each of the following declarations indicate whether the
object being declared has top-level or low-level const.</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> v2 = <span class="hljs-number">0</span>; <span class="hljs-keyword">int</span> v1 = v2;
<span class="hljs-keyword">int</span> *p1 = &amp;v1, &amp;r1 = v1;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *p2 = &amp;v2, *<span class="hljs-keyword">const</span> p3 = &amp;i, &amp;r2 = v2;
</code></pre>
</blockquote>
<p><code>v2</code> &#x4E3A;&#x9876;&#x5C42;const&#xFF0C;<code>p2</code>&#x4E3A;&#x5E95;&#x5C42;const
<code>p3</code> &#x65E2;&#x662F;&#x9876;&#x5C42;const&#x4E5F;&#x662F;&#x5E95;&#x5C42;const
<code>r2</code> &#x4E3A;&#x5E95;&#x5C42;const</p>
<h3 id="exercise-2-31"><a name="exercise-2-31" class="plugin-anchor" href="#exercise-2-31"><span class="fa fa-link"></span></a>Exercise 2.31</h3>
<blockquote>
<p>Given the declarations in the previous exercise determine
whether the following assignments are legal. Explain how the top-level or
low-level const applies in each case.</p>
<pre><code class="lang-cpp">(a)r1 = v2;
(b)p1 = p2;
(c)p2 = p1;
(d)p1 = p3;
(e)p2 = p3;
</code></pre>
</blockquote>
<p>(a): &#x5408;&#x6CD5;&#xFF0C;&#x9876;&#x5C42;const&#x4E0D;&#x5F71;&#x54CD;&#x62F7;&#x8D1D;</p>
<p>(b): &#x975E;&#x6CD5;&#xFF0C;<code>p2</code>&#x5E95;&#x5C42;const&#x4F46;&#x662F;<code>p1</code>&#x4E0D;&#x662F;</p>
<p>(c): &#x5408;&#x6CD5;&#xFF0C;<code>int*</code>&#x8F6C;&#x6362;&#x4E3A;<code>const int*</code></p>
<p>(d): &#x975E;&#x6CD5;&#xFF0C;<code>p3</code>&#x5E95;&#x5C42;const&#x4F46;&#x662F;<code>p1</code>&#x4E0D;&#x662F;</p>
<p>(e): &#x5408;&#x6CD5;&#xFF0C;<code>p2</code>&#x548C;<code>p3</code>&#x90FD;&#x662F;&#x5E95;&#x5C42;const</p>
<h3 id="exercise-2-32"><a name="exercise-2-32" class="plugin-anchor" href="#exercise-2-32"><span class="fa fa-link"></span></a>Exercise 2.32</h3>
<blockquote>
<p>Is the following code legal or not? If not, how might you
make it legal?</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> null = <span class="hljs-number">0</span>, *p = null;
</code></pre>
</blockquote>
<p>&#x975E;&#x6CD5;&#xFF0C;&#x4ECE;<code>int</code>&#x5230;<code>int *</code>&#x7684;&#x8F6C;&#x6362;&#x65E0;&#x6548;&#xFF0C;&#x8981;&#x521B;&#x5EFA;&#x7A7A;&#x6307;&#x9488;&#xFF0C;&#x4E09;&#x79CD;&#x65B9;&#x6CD5;:</p>
<ul>
<li>&#x7528;C++11&#x5F15;&#x5165;&#x7684;<code>nullptr</code></li>
<li>&#x76F4;&#x63A5;&#x8D4B;&#x503C;0</li>
<li>&#x6216;&#x8005;&#x5F15;&#x5165;<code>cstdlib</code>&#x5934;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;<code>NULL</code>&#x9884;&#x5904;&#x7406;&#x53D8;&#x91CF;&#x3002;</li>
</ul>
<p>&#x53C2;&#x8003;&#x4FEE;&#x6539;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> null = <span class="hljs-number">0</span>, *p = <span class="hljs-literal">nullptr</span>;
</code></pre>
<h3 id="exercise-2-33"><a name="exercise-2-33" class="plugin-anchor" href="#exercise-2-33"><span class="fa fa-link"></span></a>Exercise 2.33</h3>
<blockquote>
<p>Using the variable definitions from this section, determine
what happens in each of these assignments:</p>
<pre><code class="lang-cpp">a=<span class="hljs-number">42</span>; <span class="hljs-comment">// &#x7ED9;a&#x8D4B;&#x503C;42</span>
b=<span class="hljs-number">42</span>; <span class="hljs-comment">// &#x7ED9;b&#x8D4B;&#x503C;42</span>
c=<span class="hljs-number">42</span>; <span class="hljs-comment">// &#x7ED9;c&#x8D4B;&#x503C;42</span>
d=<span class="hljs-number">42</span>; <span class="hljs-comment">// &#x9519;&#x8BEF;&#xFF0C;d&#x4E3A;int *&#xFF0C;&#x5E94;&#x6539;&#x4E3A;*d = 42;</span>
e=<span class="hljs-number">42</span>; <span class="hljs-comment">// &#x9519;&#x8BEF;&#xFF0C;e&#x4E3A;const int *&#xFF0C;&#x5E94;&#x6539;&#x4E3A;e = &amp;c;</span>
g=<span class="hljs-number">42</span>; <span class="hljs-comment">// &#x9519;&#x8BEF;&#xFF0C;g&#x4E3A;const int&amp;&#x5F15;&#x7528;&#xFF0C;&#x548C;ci&#x7ED1;&#x5B9A;&#xFF0C;&#x4E0D;&#x80FD;&#x518D;&#x7ED1;&#x5B9A;&#x5176;&#x5B83;&#x5BF9;&#x8C61;</span>
</code></pre>
</blockquote>
<h3 id="exercise-2-34"><a name="exercise-2-34" class="plugin-anchor" href="#exercise-2-34"><span class="fa fa-link"></span></a>Exercise 2.34</h3>
<blockquote>
<p>Write a program containing the variables and assignments from the previous exercise. Print the variables before and after the assignments to check whether your predictions in the previous exercise were correct. If not, study the examples until you can convince yourself you know &#xFFFC;&#xFFFC;what led you to the wrong conclusion.</p>
</blockquote>
<p>&#x6E90;&#x7801;<code>ex2_34.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, &amp;r = i;
    <span class="hljs-keyword">auto</span> a = r;   <span class="hljs-comment">// a is an int (r is an alias for i, which has type int)</span>

    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> ci = i, &amp;cr = ci;
    <span class="hljs-keyword">auto</span> b = ci; <span class="hljs-comment">// b is an int (top-level const in ci is dropped)</span>
    <span class="hljs-keyword">auto</span> c = cr; <span class="hljs-comment">// c is an int (cr is an alias for ci whose const is top-level)</span>
    <span class="hljs-keyword">auto</span> d = &amp;i; <span class="hljs-comment">// d is an int* (&amp; ofan int objectis int*)</span>
    <span class="hljs-keyword">auto</span> e = &amp;ci; <span class="hljs-comment">// e is const int*(&amp; of a const object is low-level const)</span>

    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> f = ci; <span class="hljs-comment">// deduced type of ci is int; f has type const int</span>
    <span class="hljs-keyword">auto</span> &amp;g = ci; <span class="hljs-comment">// g is a const int&amp; that is bound to ci</span>

    a = <span class="hljs-number">42</span>; b = <span class="hljs-number">42</span>; c = <span class="hljs-number">42</span>; *d = <span class="hljs-number">42</span>; e = &amp;c;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x6CE8;&#x610F;<code>auto</code>&#x7C7B;&#x578B;&#x6307;&#x793A;&#x7B26;&#x662F;C++11&#x65B0;&#x7279;&#x6027;&#xFF0C;&#x7F16;&#x8BD1;&#x65F6;&#x9700;&#x8981;&#x6253;&#x5F00;<code>-std=c++11</code></p>
<h3 id="exercise-2-35"><a name="exercise-2-35" class="plugin-anchor" href="#exercise-2-35"><span class="fa fa-link"></span></a>Exercise 2.35</h3>
<blockquote>
<p>Determine the types deduced in each of the following definitions. Once you&#x2019;ve figured out the types, write a program to see whether you were correct.</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">42</span>;
<span class="hljs-keyword">auto</span> j = i; <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> &amp;k = i; <span class="hljs-keyword">auto</span> *p = &amp;i; <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> j2 = i, &amp;k2 = i;
</code></pre>
</blockquote>
<p><code>j</code> &#x4E3A;<code>int</code>,<code>k</code>&#x4E3A;<code>const int&amp;</code>&#xFF0C;<code>p</code>&#x4E3A;<code>const int *</code>&#xFF0C;<code>j2</code>&#x4E3A;<code>const int</code>&#xFF0C;<code>k2</code>&#x4E3A;<code>const int&amp;</code>&#x3002;</p>
<p>&#x6E90;&#x7801;<code>ex2_35.cpp</code></p>
<pre><code class="lang-cpp">
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;typeinfo&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">42</span>;
    <span class="hljs-keyword">auto</span> j = i;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> &amp;k = i;
    <span class="hljs-keyword">auto</span> *p = &amp;i;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> j2 = i, &amp;k2 = i;

    <span class="hljs-comment">// print i means int, and PKi means pointer to const int.</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>   &lt;&lt; <span class="hljs-string">&quot;j is &quot;</span>      &lt;&lt; <span class="hljs-keyword">typeid</span>(j).name()
                &lt;&lt; <span class="hljs-string">&quot;\nk is &quot;</span>    &lt;&lt; <span class="hljs-keyword">typeid</span>(k).name()
                &lt;&lt; <span class="hljs-string">&quot;\np is &quot;</span>    &lt;&lt; <span class="hljs-keyword">typeid</span>(p).name()
                &lt;&lt; <span class="hljs-string">&quot;\nj2 is &quot;</span>   &lt;&lt; <span class="hljs-keyword">typeid</span>(j2).name()
                &lt;&lt; <span class="hljs-string">&quot;\nk2 is &quot;</span>   &lt;&lt; <span class="hljs-keyword">typeid</span>(k2).name()
                &lt;&lt; <span class="hljs-built_in">std</span>::endl;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x7F16;&#x8BD1;&#x548C;&#x8FD0;&#x884C;</p>
<pre><code class="lang-bash">$ g++ -std=c++<span class="hljs-number">11</span> ex2_35.cpp
$ ./a.out
j is i
k is i
p is PKi
j2 is i
k2 is i
</code></pre>
<p>&#x5176;&#x4E2D;<code>i</code>&#x8868;&#x793A;<code>int</code>&#xFF0C;<code>PKi</code>&#x8868;&#x793A;&#x6307;&#x5411;<code>const int</code>&#x7684;&#x6307;&#x9488;&#x3002;</p>
<h3 id="exercise-2-36"><a name="exercise-2-36" class="plugin-anchor" href="#exercise-2-36"><span class="fa fa-link"></span></a>Exercise 2.36</h3>
<blockquote>
<p>In the following code, determine the type of each variable
and the value each variable has when the code finishes:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> a = <span class="hljs-number">3</span>, b = <span class="hljs-number">4</span>;
<span class="hljs-keyword">decltype</span>(a) c = a;
<span class="hljs-keyword">decltype</span>((b)) d = a;
++c;
++d;
</code></pre>
</blockquote>
<p><code>c</code>&#x4E3A;<code>int</code>&#xFF0C;<code>d</code>&#x4E3A;<code>a</code>&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x6240;&#x6709;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x4E3A;4&#x3002;</p>
<h3 id="exercise-2-37"><a name="exercise-2-37" class="plugin-anchor" href="#exercise-2-37"><span class="fa fa-link"></span></a>Exercise 2.37</h3>
<blockquote>
<p>Assignment is an example of an expression that yields a reference type. The type is a reference to the type of the left-hand operand. That is, if i is an int, then the type of the expression i = x is int&amp;. Using that knowledge, determine the type and value of each variable in this code:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> a = <span class="hljs-number">3</span>, b = <span class="hljs-number">4</span>;
<span class="hljs-keyword">decltype</span>(a) c = a;
<span class="hljs-keyword">decltype</span>(a = b) d = a;
</code></pre>
</blockquote>
<p><code>c</code>&#x4E3A;<code>int</code>,<code>d</code>&#x4E3A;<code>int</code>&#x7684;&#x5F15;&#x7528;&#x3002;</p>
<p>a=3, b=4, c=3, d=3</p>
<p><strong>&#x6CE8;&#x610F;</strong>: &#x7F16;&#x8BD1;&#x5668;&#x53EA;&#x5206;&#x6790;<code>decltype</code>&#x62EC;&#x53F7;&#x5185;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x5E76;&#x4E0D;&#x5B9E;&#x9645;&#x8BA1;&#x7B97;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x503C;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x5B9E;&#x9645;&#x8C03;&#x7528;&#x62EC;&#x53F7;&#x5185;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<h3 id="exercise-2-38"><a name="exercise-2-38" class="plugin-anchor" href="#exercise-2-38"><span class="fa fa-link"></span></a>Exercise 2.38</h3>
<blockquote>
<p>Describe the differences in type deduction between decltype and auto. Give an example of an expression where auto and decltype will deduce the same type and an example where they will deduce differing types.</p>
</blockquote>
<p><code>decltype</code>&#x5904;&#x7406;&#x9876;&#x5C42;const&#x548C;&#x5F15;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x4E0E;<code>auto</code>&#x6709;&#x4E9B;&#x8BB8;&#x4E0D;&#x540C;&#xFF0C;&#x524D;&#x8005;&#x4F1A;&#x628A;&#x9876;&#x5C42;const&#x548C;&#x5F15;&#x7528;&#x5305;&#x62EC;&#x5728;&#x5185;&#x3002;&#x5373;<code>auto</code>&#x5904;&#x7406;&#x540E;&#x5F80;&#x5F80;&#x8FD8;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;<code>decltype</code>&#x4F1A;&#x4FDD;&#x7559;&#x5F15;&#x7528;&#x548C;&#x9876;&#x5C42;const&#x4FE1;&#x606F;&#x3002;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, &amp;r = i;
<span class="hljs-comment">// &#x76F8;&#x540C;</span>
<span class="hljs-keyword">auto</span> a = i;
<span class="hljs-keyword">decltype</span>(i) b = i;
<span class="hljs-comment">// &#x4E0D;&#x540C;&#xFF0C;c&#x4E3A;int&#xFF0C;&#x800C;d&#x4E3A;int&amp;</span>
<span class="hljs-keyword">auto</span> c = r;
<span class="hljs-keyword">decltype</span>(r) d = r;
</code></pre>
<p>&#x53C2;&#x8003;stackoverflow&#x4E0A;&#x7684;&#x4E24;&#x4E2A;&#x95EE;&#x7B54;: <a href="http://stackoverflow.com/questions/21369113/what-is-the-difference-between-auto-and-decltypeauto-when-returning-from-a-fun" target="_blank">What is the difference between auto and decltype(auto) when returning from a function?</a>&#x548C; <a href="http://stackoverflow.com/questions/12084040/decltype-vs-auto" target="_blank">decltype vs auto</a></p>
<h3 id="exercise-2-39"><a name="exercise-2-39" class="plugin-anchor" href="#exercise-2-39"><span class="fa fa-link"></span></a>Exercise 2.39</h3>
<blockquote>
<p>Compile the following program to see what happens when
you forget the semicolon after a class definition. Remember the message for
future reference.</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">struct</span> Foo { <span class="hljs-comment">/* empty  */</span> } <span class="hljs-comment">// Note: no semicolon</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
</blockquote>
<p>&#x9519;&#x8BEF;&#x4FE1;&#x606F;</p>
<pre><code class="lang-bash">$ g++ ex2_39.cpp
ex2_39.cpp:<span class="hljs-number">1</span>:<span class="hljs-number">27</span>: &#x9519;&#x8BEF;&#xFF1A;&#x7ED3;&#x6784;&#x5B9A;&#x4E49;&#x540E;&#x9700;&#x8981;&#x2018;;&#x2019;
 struct Foo { /* empty  */ } // Note: no semicolon
                           ^
</code></pre>
<h3 id="exercise-2-40"><a name="exercise-2-40" class="plugin-anchor" href="#exercise-2-40"><span class="fa fa-link"></span></a>Exercise 2.40</h3>
<blockquote>
<p>Write your own version of the Sales_data class.</p>
</blockquote>
<p>&#x6CE8;&#x610F;&#x4F7F;&#x7528;&#x5230;&#x4E86;C++11&#x7684;&#x65B0;&#x7279;&#x6027;: <strong>&#x7C7B;&#x5185;&#x521D;&#x59CB;&#x503C;</strong></p>
<pre><code class="lang-cpp"><span class="hljs-keyword">struct</span> Sales_data
{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> bookNo;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> bookName;
    <span class="hljs-keyword">unsigned</span> units_sold = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">double</span> revenue = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">double</span> price = <span class="hljs-number">0.0</span>;
    <span class="hljs-comment">//...</span>
}
</code></pre>
<h3 id="exercise-2-41"><a name="exercise-2-41" class="plugin-anchor" href="#exercise-2-41"><span class="fa fa-link"></span></a>Exercise 2.41</h3>
<blockquote>
<p>Use your Sales_data class to rewrite the exercises in &#xA7;
1.5.1(Exercise 1.20-1.22), &#xA7; 1.5.2(Exercise 1.23-1.24), and &#xA7; 1.6(Exercise 1.25). For now, you should define
your Sales_data class in the same file as your main function.</p>
</blockquote>
<p>&#x91CD;&#x5199;<code>1_20.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">struct</span> Sales_data
{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> bookNo;
    <span class="hljs-keyword">unsigned</span> units_sold = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">double</span> price = <span class="hljs-number">0.0</span>;
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">for</span> (Sales_data book;
         <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; book.bookNo &gt;&gt; book.units_sold &gt;&gt; book.price;
         <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; book.bookNo &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; book.units_sold &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; book.price &lt;&lt; <span class="hljs-built_in">std</span>::endl);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x91CD;&#x5199;<code>1_21.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">struct</span> Sales_data
{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> bookNo;
    <span class="hljs-keyword">unsigned</span> units_sold = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">double</span> revenue = <span class="hljs-number">0.0</span>;
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    Sales_data book1, book2;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; book1.bookNo &gt;&gt; book1.units_sold &gt;&gt; book1.revenue;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; book2.bookNo &gt;&gt; book2.units_sold &gt;&gt; book2.revenue;

    <span class="hljs-keyword">if</span> (book1.bookNo == book2.bookNo)
    {
        Sales_data book_sum;
        book_sum.bookNo = book1.bookNo;
        book_sum.units_sold = book1.units_sold + book2.units_sold;
        book_sum.revenue = book1.revenue + book2.revenue;
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; book_sum.bookNo &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt;
                     book_sum.units_sold &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt;
                     book_sum.revenue &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">&quot;Data must refer to same ISBN.&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
}
</code></pre>
<p>&#x91CD;&#x5199;<code>1_22.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">struct</span> Sales_data
{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> bookNo;
    <span class="hljs-keyword">unsigned</span> units_sold = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">double</span> revenue = <span class="hljs-number">0.0</span>;
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    Sales_data total;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; total.bookNo &gt;&gt; total.units_sold &gt;&gt; total.revenue) {
        Sales_data trans;
        <span class="hljs-keyword">while</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; trans.bookNo &gt;&gt; trans.units_sold &gt;&gt; trans.revenue) {
            <span class="hljs-keyword">if</span> (total.bookNo == trans.bookNo) {
                total.units_sold += trans.units_sold;
                total.revenue += trans.revenue;
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; total.bookNo &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt;
                             total.units_sold &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt;
                             total.revenue &lt;&lt; <span class="hljs-built_in">std</span>::endl;
                total = trans;
            }
        }
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; total.bookNo &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt;
                     total.units_sold &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt;
                     total.revenue &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">&quot;No data?!&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x91CD;&#x5199;<code>ex1_23.cpp</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">struct</span> Sales_data
{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> bookNo;
    <span class="hljs-keyword">unsigned</span> units_sold = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">double</span> revenue = <span class="hljs-number">0.0</span>;
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    Sales_data curr_book, val_book;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; curr_book.bookNo &gt;&gt; curr_book.units_sold &gt;&gt; curr_book.revenue) {
        <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; val_book.bookNo &gt;&gt; val_book.units_sold &gt;&gt; val_book.revenue) {
            <span class="hljs-keyword">if</span> (curr_book.bookNo == val_book.bookNo) {
                ++cnt;
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; curr_book.bookNo &lt;&lt; <span class="hljs-string">&quot; occurs &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="hljs-string">&quot; times &quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
                curr_book = val_book;
                cnt = <span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; curr_book.bookNo &lt;&lt; <span class="hljs-string">&quot; occurs &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="hljs-string">&quot; times &quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 id="exercise-2-42"><a name="exercise-2-42" class="plugin-anchor" href="#exercise-2-42"><span class="fa fa-link"></span></a>Exercise 2.42</h3>
<blockquote>
<p>Write your own version of the Sales_data.h header and use it to rewrite the exercise from &#xA7; 2.6.2(p. 76)</p>
</blockquote>
<p>&#x76F4;&#x63A5;&#x628A;<code>Sales_item</code>&#x7684;&#x529F;&#x80FD;&#x987A;&#x5E26;&#x5B9E;&#x73B0;&#xFF0C;&#x5934;&#x6587;&#x4EF6;<code>Sales_data.h</code></p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">ifndef</span> CH02_EX2_42_H_</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> CH02_EX2_42_H_</span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">struct</span> Sales_data
{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> bookNo;
    <span class="hljs-keyword">unsigned</span> units_sold = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">double</span> revenue = <span class="hljs-number">0.0</span>;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">CalcRevenue</span><span class="hljs-params">(<span class="hljs-keyword">double</span> price)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">CalcAveragePrice</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SetData</span><span class="hljs-params">(Sales_data data)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">AddData</span><span class="hljs-params">(Sales_data data)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Print</span><span class="hljs-params">()</span></span>;
};

<span class="hljs-keyword">void</span> Sales_data::CalcRevenue(<span class="hljs-keyword">double</span> price)
{
    revenue = units_sold * price;
}

<span class="hljs-keyword">void</span> Sales_data::SetData(Sales_data data)
{
    bookNo = data.bookNo;
    units_sold = data.units_sold;
    revenue = data.revenue;
}

<span class="hljs-keyword">void</span> Sales_data::AddData(Sales_data data)
{
    <span class="hljs-keyword">if</span> (bookNo != data.bookNo) <span class="hljs-keyword">return</span>;
    units_sold += data.units_sold;
    revenue += data.revenue;
}

<span class="hljs-keyword">double</span> Sales_data::CalcAveragePrice()
{
    <span class="hljs-keyword">if</span> (units_sold != <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> revenue / units_sold;
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
}

<span class="hljs-keyword">void</span> Sales_data::Print()
{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; bookNo &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; units_sold &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; revenue &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;
    <span class="hljs-keyword">double</span> averagePrice = CalcAveragePrice();
    <span class="hljs-keyword">if</span> (averagePrice != <span class="hljs-number">0.0</span>)
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; averagePrice &lt;&lt; <span class="hljs-built_in">std</span>::endl;
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;(no sales)&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
}

<span class="hljs-preprocessor">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">// CH02_EX2_42_H_</span></span>
</code></pre>
<p>&#x6CE8;&#x610F;<strong>&#x5934;&#x6587;&#x4EF6;&#x4FDD;&#x62A4;&#x7B26;</strong>&#x7684;&#x4F7F;&#x7528;</p>
<p>&#x91CD;&#x5199;1.5.1&#x8282;&#x95EE;&#x9898;</p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;ex2_42.h&quot;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    Sales_data book;
    <span class="hljs-keyword">double</span> price;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; book.bookNo &gt;&gt; book.units_sold &gt;&gt; price;
    book.CalcRevenue(price);
    book.Print();

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>&#x91CD;&#x5199;1.5.2&#x8282;&#x95EE;&#x9898;</p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;ex2_42.h&quot;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    Sales_data book1, book2;
    <span class="hljs-keyword">double</span> price1, price2;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; book1.bookNo &gt;&gt; book1.units_sold &gt;&gt; price1;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; book2.bookNo &gt;&gt; book2.units_sold &gt;&gt; price2;
    book1.CalcRevenue(price1);
    book2.CalcRevenue(price2);

    <span class="hljs-keyword">if</span> (book1.bookNo == book2.bookNo)
    {
        book1.AddData(book2);
        book1.Print();
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">&quot;Data must refer to same ISBN&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;  <span class="hljs-comment">// indicate failure</span>
    }
}
</code></pre>
<p>&#x91CD;&#x5199;1.6&#x8282;&#x95EE;&#x9898;</p>
<pre><code class="lang-cpp"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;ex2_42.h&quot;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    Sales_data total;
    <span class="hljs-keyword">double</span> totalPrice;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; total.bookNo &gt;&gt; total.units_sold &gt;&gt; totalPrice)
    {
        total.CalcRevenue(totalPrice);
        Sales_data trans;
        <span class="hljs-keyword">double</span> transPrice;
        <span class="hljs-keyword">while</span> (<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span> &gt;&gt; trans.bookNo &gt;&gt; trans.units_sold &gt;&gt; transPrice)
        {
            trans.CalcRevenue(transPrice);
            <span class="hljs-keyword">if</span> (total.bookNo == trans.bookNo)
            {
                total.AddData(trans);
            }
            <span class="hljs-keyword">else</span>
            {
                total.Print();
                total.SetData(trans);
            }
        }
        total.Print();
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">&quot;No data?!&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::endl;
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;  <span class="hljs-comment">// indicate failure</span>
    }
}
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../cpp-primer/chapter1.html" class="navigation navigation-prev " aria-label="Previous page: Chapter 1"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../cpp-primer/chapter3.html" class="navigation navigation-next " aria-label="Next page: Chapter 3"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>
 
<script src="../gitbook/app.js"></script>
<script src="../gitbook/app-ext.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"disqus":{"shortName":"techsquad"},"ga":{"token":"UA-49487364-1","configuration":"auto"},"addcssjs":{"js":["https.js"]}};
    gitbook.start(config);
});
</script>
 <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-49487364-1', 'auto');ga('send', 'pageview');</script>
    <div class="footer"> </div>
    
</body>



</html>
